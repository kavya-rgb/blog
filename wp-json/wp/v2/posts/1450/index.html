{"id":1450,"date":"2022-03-10T06:55:18","date_gmt":"2022-03-10T06:55:18","guid":{"rendered":"http:\/\/localhost\/wordpress\/adding-graphs-to-a-django-website\/"},"modified":"2022-03-10T06:55:18","modified_gmt":"2022-03-10T06:55:18","slug":"adding-graphs-to-a-django-website","status":"publish","type":"post","link":"http:\/\/localhost\/wordpress\/adding-graphs-to-a-django-website\/","title":{"rendered":"Adding Graphs to a Django Website"},"content":{"rendered":"<p> <br \/>\n<\/p>\n<div data-article-id=\"995887\" id=\"article-body\">\n<p>Another journey, captured in my journal, that I think is worth sharing. To wit, a story (of learning and how that proceeds), and a summary (of how to add graphs to a Django website).<\/p>\n<h2>\n  <a name=\"the-story\" href=\"#the-story\"><br \/>\n  <\/a><br \/>\n  The story<br \/>\n<\/h2>\n<p>I have a <a href=\"https:\/\/www.djangoproject.com\/\">Django<\/a> website on which I am presenting a table of data and some statistics on that table (maxima, minima, medians etc.). I wanted to add a histogram (a bar chart) that would summarise the frequency distribution of a value in one column of the table.<\/p>\n<p>If you struggle with abstractions, I can help a little with specifics too. In my case, it is a table of events, and one of the columns records how many people attended the event. The histogram then would have the number of attendees across the bottom and each bar represent how often that number of attendees was recorded.<\/p>\n<p>This is, in fact, just such a histogram:<\/p>\n<p><a href=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--5vfMUeLs--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/z3ic9ljy7yxjyflh28op.png\" class=\"article-body-image-wrapper\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--5vfMUeLs--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/z3ic9ljy7yxjyflh28op.png\" alt=\"A sample histogram\" loading=\"lazy\" width=\"636\" height=\"460\"\/><\/a><\/p>\n<p>taken from a table that list events and has a count of attendees (players, as they are gaming events). <\/p>\n<p>Now the existing page (no graph, just a table of events and some summary statistics) has a set of filters on it, so that you can look at a subset of all events &#8211; based on weekdays, or venue, or club, or host, or league, or duration or attendee counts etc &#8230; A set of filters can be chosen, and a refresh button clicked and voil\u00e0, the data is updated in the blink of an eye (with an AJAX call back to the server that fetches data and updates the relevant page elements).<\/p>\n<p>And that, then, is the context, the desire to plug a graph into such an existing Django page. And as usual, it proved to be, an adventure, with notes taken, and one worth sharing.<\/p>\n<h3>\n  <a name=\"choosing-a-tool\" href=\"#choosing-a-tool\"><br \/>\n  <\/a><br \/>\n  Choosing a tool<br \/>\n<\/h3>\n<p>Such a journey starts with an idea and no rush. At least on this project it does, quite in contrast to many projects, notably those that need to monetise rapidly or beat the competition to market. But this project is a backburner on which notes are taken, and jobs tackled as time permits. <\/p>\n<p>And it starts with the idea, and over time the idea collected three candidates:<\/p>\n<p>Long story short, this list is not exhaustive, there will be more out there, and each of these tools takes a little reading and comparing to arrive at a choice. <\/p>\n<p>Flot loses ground early, as it&#8217;s jQuery dependence in an era of jQuery decline (in popularity) didn&#8217;t strike me as an investment into the future. <\/p>\n<p>Dash and Bokeh go head-to-head in a number of online comparisons, the best of which I found was <a href=\"https:\/\/pauliacomi.com\">Paul Iacomi<\/a>&#8216;s:<\/p>\n<p><a href=\"https:\/\/pauliacomi.com\/2020\/06\/07\/plotly-v-bokeh.html\">https:\/\/pauliacomi.com\/2020\/06\/07\/plotly-v-bokeh.html<\/a><\/p>\n<p>I opted for Bokeh in the end based on those comparisons. You can spend a lot of time comparing a lot of alternatives, of course, and always end up taking a gamble and then investing in one. If you have more free time or are paid to, you can go one further and try several of them, compare them, and write up your experiences. I don&#8217;t, and so I did some basic reading and said: Bokeh, you&#8217;re the one.<br \/><a href=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--bifp9NFw--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/jbu0fu5ga5zbkm8nna6w.png\" class=\"article-body-image-wrapper\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--bifp9NFw--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/jbu0fu5ga5zbkm8nna6w.png\" alt=\"You're The One!\" loading=\"lazy\" width=\"880\" height=\"587\"\/><\/a><\/p>\n<h3>\n  <a name=\"the-first-graph\" href=\"#the-first-graph\"><br \/>\n  <\/a><br \/>\n  The first graph<br \/>\n<\/h3>\n<p>Bokeh themselves, provide a lovely little sample for a histogram:<\/p>\n<p><a href=\"https:\/\/docs.bokeh.org\/en\/latest\/docs\/gallery\/bar_basic.html\">https:\/\/docs.bokeh.org\/en\/latest\/docs\/gallery\/bar_basic.html<\/a><\/p>\n<p>And there are a number of online pages running through the basic steps of a Bokeh graph in Django ranging from the, IMHO, <a href=\"https:\/\/hackernoon.com\/integrating-bokeh-visualisations-into-django-projects-a1c01a16b67a\">bad<\/a><sup id=\"fnref1\"><a href=\"#fn1\">1<\/a><\/sup>, to the <a href=\"https:\/\/www.geeksforgeeks.org\/integrating-bokeh-visualizations-in-django-application\/\">OK<\/a><sup id=\"fnref2\"><a href=\"#fn2\">2<\/a><\/sup>. <\/p>\n<p>But, assuming you have a Django site already (my situation and if you&#8217;re reading here, possibly yours too &#8211; <a href=\"https:\/\/en.wikipedia.org\/wiki\/Cf.\">cf.<\/a> the title) it is worth summarising the needs.<\/p>\n<h3>\n  <a name=\"getting-the-basics-into-place\" href=\"#getting-the-basics-into-place\"><br \/>\n  <\/a><br \/>\n  Getting the basics into place<br \/>\n<\/h3>\n<ol>\n<li>\n<p>You&#8217;ll need to install the Python libraries &#8211; in whatever context your Django (backend) site is running in, of course. It&#8217;s as simple as <code>pip install bokeh<\/code> <\/p>\n<\/li>\n<li>\n<p>You&#8217;ll need to register Bokeh with Django as an app. Add <code>BokehApp<\/code> to (the end of) your <a href=\"https:\/\/docs.djangoproject.com\/en\/4.0\/ref\/settings\/#std:setting-INSTALLED_APPS\"><code>INSTALLED_APPS<\/code><\/a> setting. <\/p>\n<\/li>\n<li>\n<p>Your view will need to provide a few things in context to the Django template for rendering. Specifically, and at least, to things you will produce in that view using Bokeh (more on that later):<\/p>\n<ul>\n<li>\n<strong>A div string<\/strong>: Just a string that contains an HTML <a href=\"https:\/\/www.w3schools.com\/Tags\/tag_div.asp\">div<\/a> element that will house the graph itself. You can give it any name you like in the context, but if you called it <code>bokeh_graph_div<\/code> you&#8217;d simply stick it in your template as <code>{{ bokeh_graph_div | safe }}<\/code> where you want the graph to be.<\/li>\n<li>\n<strong>A script string<\/strong>: Just a string that contains an HTML <a href=\"https:\/\/www.w3schools.com\/Tags\/tag_script.asp\">script<\/a> element which you put anywhere in your template (though it&#8217;s customary to put these at the start or end of the template I guess). This is the script that will actually draw the graph onto a canvas it places in the div. Again, if you called this <code>bokeh_graph_script<\/code> in your context you&#8217;d include it in the template with <code>{{ bokeh_graph_script | safe }}<\/code> in your template. Note though this is just a tiny hook script, the bulk of the code that does that drawing and more, is in JavaScript libraries that you will need to include in your template as well.<\/li>\n<\/ul>\n<\/li>\n<li>\n<p>Your template will need to provide a few things too:<\/p>\n<ul>\n<li>It will need to include the <strong>div<\/strong> and <strong>script<\/strong> strings described above.<\/li>\n<li>\n<p>It will need to include style sheets for the Bokeh elements. Basic, recommendation is to include a basic Bokeh style sheet, and another for its widgets and to source them from a <a href=\"https:\/\/en.wikipedia.org\/wiki\/Content_delivery_network\">CDN<\/a>:<\/p>\n<pre class=\"highlight html\"><code><span class=\"nt\">&lt;link<\/span> <span class=\"na\">href=<\/span><span class=\"s\">\u201dhttp:\/\/cdn.pydata.org\/bokeh\/release\/bokeh-2.4.2.min.css\"<\/span> <span class=\"na\">rel=<\/span><span class=\"s\">\u201dstylesheet\u201d<\/span> <span class=\"na\">type=<\/span><span class=\"s\">\u201dtext\/css\u201d<\/span><span class=\"nt\">&gt;<\/span>\n<span class=\"nt\">&lt;link<\/span> <span class=\"na\">href=<\/span><span class=\"s\">\u201dhttp:\/\/cdn.pydata.org\/bokeh\/release\/bokeh-widgets-2.4.2.min.css\"<\/span> <span class=\"na\">rel=<\/span><span class=\"s\">\u201dstylesheet\u201d<\/span> <span class=\"na\">type=<\/span><span class=\"s\">\u201dtext\/css\u201d<\/span><span class=\"nt\">&gt;<\/span>\n<\/code><\/pre>\n<\/li>\n<li>\n<p>It will need to include the JavaScript that actually draws the graph and provides all of its features.  Four includes seem commonly recommended:<\/p>\n<pre class=\"highlight html\"><code><span class=\"nt\">&lt;script <\/span><span class=\"na\">src=<\/span><span class=\"s\">\"https:\/\/cdn.bokeh.org\/bokeh\/release\/bokeh-2.4.2.min.js\"<\/span><span class=\"nt\">&gt;&lt;\/script&gt;<\/span>\n<span class=\"nt\">&lt;script <\/span><span class=\"na\">src=<\/span><span class=\"s\">\"https:\/\/cdn.bokeh.org\/bokeh\/release\/bokeh-widgets-2.4.2.min.js\"<\/span><span class=\"nt\">&gt;&lt;\/script&gt;<\/span>\n<span class=\"nt\">&lt;script <\/span><span class=\"na\">src=<\/span><span class=\"s\">\"https:\/\/cdn.bokeh.org\/bokeh\/release\/bokeh-tables-2.4.2.min.js\"<\/span><span class=\"nt\">&gt;&lt;\/script&gt;<\/span>\n<span class=\"nt\">&lt;script <\/span><span class=\"na\">src=<\/span><span class=\"s\">\"https:\/\/cdn.bokeh.org\/bokeh\/release\/bokeh-api-2.4.2.min.js\"<\/span><span class=\"nt\">&gt;&lt;\/script&gt;<\/span>\n<\/code><\/pre>\n<\/li>\n<\/ul>\n<\/li>\n<\/ol>\n<p>With all that in place, you actually have a graph! But for one thing, the details of generating its content, the <strong>div<\/strong> and <strong>script<\/strong> mentioned earlier.<\/p>\n<h3>\n  <a name=\"defining-the-graphs-content\" href=\"#defining-the-graphs-content\"><br \/>\n  <\/a><br \/>\n  Defining the graph&#8217;s content<br \/>\n<\/h3>\n<p>For a histogram, you&#8217;ll need to prepare your data in two parallel lists one for the categories (X axis) and one for the values (Y axis).<\/p>\n<p>In pro forma:<\/p>\n<div class=\"highlight js-code-highlight\">\n<pre class=\"highlight python\"><code><span class=\"n\">categories<\/span> <span class=\"o\">=<\/span> <span class=\"p\">[<\/span> <span class=\"p\">...<\/span> <span class=\"p\">]<\/span>\n<span class=\"n\">values<\/span> <span class=\"o\">=<\/span> <span class=\"p\">[<\/span> <span class=\"p\">...<\/span> <span class=\"p\">]<\/span>\n<\/code><\/pre>\n<div class=\"highlight__panel js-actions-panel\">\n<div class=\"highlight__panel-action js-fullscreen-code-action\">\n    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"><title>Enter fullscreen mode<\/title>\n    <path d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\/>\n<\/svg><\/p>\n<p>    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"><title>Exit fullscreen mode<\/title>\n    <path d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\/>\n<\/svg><\/p>\n<\/div>\n<\/div>\n<\/div>\n<p>where these two lists have the same length.<\/p>\n<p>Then there are two objects of interest to create (the <strong>div<\/strong> and <strong>script<\/strong>), left.<\/p>\n<ol>\n<li>\n<p>Create a <a href=\"https:\/\/docs.bokeh.org\/en\/2.4.0\/docs\/reference\/plotting\/figure.html\">figure<\/a> which will hold the graph. This can be as simple as:<\/p>\n<pre class=\"highlight python\"><code><span class=\"kn\">from<\/span> <span class=\"nn\">bokeh.plotting<\/span> <span class=\"kn\">import<\/span> <span class=\"n\">figure<\/span>\n<span class=\"n\">my_figure<\/span> <span class=\"o\">=<\/span> <span class=\"n\">figure<\/span><span class=\"p\">()<\/span>\n<\/code><\/pre>\n<p><code>bokeh.plotting.figure<\/code> has a pile of options you can play with of course, for sizing, colouring, gridding, labelling and more. What it doesn&#8217;t deal with is data. It&#8217;s like the backdrop into which we can now drop our data somehow.<\/p>\n<\/li>\n<li>\n<p>Plonk your data onto the figure. Here I&#8217;m interested in a histogram and the <a href=\"https:\/\/docs.bokeh.org\/en\/2.4.0\/docs\/reference\/models\/glyphs.html?highlight=glyph\">glyph<\/a> of choice is the <a href=\"https:\/\/docs.bokeh.org\/en\/2.4.0\/docs\/reference\/models\/glyphs\/vbar.html\">vbar<\/a> and dropping it into the figure can be as simple as:<\/p>\n<pre class=\"highlight python\"><code><span class=\"n\">bars<\/span> <span class=\"o\">=<\/span> <span class=\"n\">my_figure<\/span><span class=\"p\">.<\/span><span class=\"n\">vbar<\/span><span class=\"p\">(<\/span><span class=\"n\">x<\/span><span class=\"o\">=<\/span><span class=\"n\">cateories<\/span><span class=\"p\">,<\/span> <span class=\"n\">top<\/span><span class=\"o\">=<\/span><span class=\"n\">values<\/span><span class=\"p\">)<\/span>\n<\/code><\/pre>\n<\/li>\n<li>\n<p>Build the Django context variables. There&#8217;s a single method (<a href=\"https:\/\/docs.bokeh.org\/en\/2.4.0\/docs\/reference\/embed.html?highlight=bokeh%20embed%20components#bokeh.embed.components\">bokeh.embed.components<\/a>) that will create them for you from your figure:<\/p>\n<pre class=\"highlight python\"><code><span class=\"kn\">from<\/span> <span class=\"nn\">bokeh.embed<\/span> <span class=\"kn\">import<\/span> <span class=\"n\">components<\/span>\n<span class=\"n\">bokeh_graph_script<\/span><span class=\"p\">,<\/span> <span class=\"n\">bokeh_graph_div<\/span> <span class=\"o\">=<\/span> <span class=\"n\">components<\/span><span class=\"p\">(<\/span><span class=\"n\">my_figure<\/span><span class=\"p\">)<\/span>\n<\/code><\/pre>\n<p>and then in your view, just add them to the context delivered to the template. <a href=\"https:\/\/djangotherightway.com\/django-templates\">A good tutorial<\/a> will help, but I&#8217;m assuming you have a Django site you&#8217;re dropping this into and so it might simply resemble:<\/p>\n<pre class=\"highlight python\"><code><span class=\"n\">context<\/span><span class=\"p\">.<\/span><span class=\"n\">update<\/span><span class=\"p\">({<\/span><span class=\"s\">\"bokeh_graph_script\"<\/span><span class=\"p\">:<\/span> <span class=\"n\">bokeh_graph_script<\/span><span class=\"p\">,<\/span>\n            <span class=\"s\">\"bokeh_graph_div\"<\/span><span class=\"p\">:<\/span> <span class=\"n\">bokeh_graph_div<\/span><span class=\"p\">})<\/span>\n<\/code><\/pre>\n<\/li>\n<\/ol>\n<p>Now you will see a lovely histogram of your values vs. categories in the page where you put the <strong>div<\/strong>. And you can look at the options for <a href=\"https:\/\/docs.bokeh.org\/en\/2.4.0\/docs\/reference\/plotting\/figure.html\"><code>bokeh.plotting.figure<\/code><\/a> and <a href=\"https:\/\/docs.bokeh.org\/en\/2.4.0\/docs\/reference\/plotting\/figure.html?highlight=vbar#bokeh.plotting.Figure.vbar\"><code>bokeh.plotting.figure.vbar<\/code><\/a> to make it look nice and the way you like. Oh, and heck if you want something more than a histogram there are plenty of other <a href=\"https:\/\/docs.bokeh.org\/en\/2.4.0\/docs\/reference\/models\/glyphs.html?highlight=glyphs\">glyphs to choose from<\/a>.<\/p>\n<h3>\n  <a name=\"a-specific-example-that-worked-for-me\" href=\"#a-specific-example-that-worked-for-me\"><br \/>\n  <\/a><br \/>\n  A specific example that worked for me<br \/>\n<\/h3>\n<p>With all that in mind an example I had running and liked:<\/p>\n<div class=\"highlight js-code-highlight\">\n<pre class=\"highlight python\"><code><span class=\"kn\">from<\/span> <span class=\"nn\">bokeh.plotting<\/span> <span class=\"kn\">import<\/span> <span class=\"n\">figure<\/span>\n<span class=\"kn\">from<\/span> <span class=\"nn\">bokeh.embed<\/span> <span class=\"kn\">import<\/span> <span class=\"n\">components<\/span>\n\n<span class=\"k\">def<\/span> <span class=\"nf\">view_Events<\/span><span class=\"p\">(<\/span><span class=\"n\">request<\/span><span class=\"p\">):<\/span>\n    <span class=\"c1\"># Collect the categories and values\n<\/span>    <span class=\"p\">(<\/span><span class=\"n\">players<\/span><span class=\"p\">,<\/span> <span class=\"n\">frequency<\/span><span class=\"p\">)<\/span> <span class=\"o\">=<\/span> <span class=\"n\">Event<\/span><span class=\"p\">.<\/span><span class=\"n\">frequency<\/span><span class=\"p\">(<\/span><span class=\"s\">\"players\"<\/span><span class=\"p\">,<\/span> <span class=\"n\">events<\/span><span class=\"p\">)<\/span>\n\n    <span class=\"c1\"># Create the figure\n<\/span>    <span class=\"n\">plot<\/span> <span class=\"o\">=<\/span> <span class=\"n\">figure<\/span><span class=\"p\">(<\/span><span class=\"n\">height<\/span><span class=\"o\">=<\/span><span class=\"mi\">350<\/span><span class=\"p\">,<\/span>\n                  <span class=\"n\">x_axis_label<\/span><span class=\"o\">=<\/span><span class=\"s\">\"Count of Players\"<\/span><span class=\"p\">,<\/span>\n                  <span class=\"n\">y_axis_label<\/span><span class=\"o\">=<\/span><span class=\"s\">\"Number of Events\"<\/span><span class=\"p\">,<\/span>\n                  <span class=\"n\">background_fill_alpha<\/span><span class=\"o\">=<\/span><span class=\"mi\">0<\/span><span class=\"p\">,<\/span>\n                  <span class=\"n\">border_fill_alpha<\/span><span class=\"o\">=<\/span><span class=\"mi\">0<\/span><span class=\"p\">,<\/span>\n                  <span class=\"n\">tools<\/span><span class=\"o\">=<\/span><span class=\"s\">\"pan,wheel_zoom,box_zoom,save,reset\"<\/span><span class=\"p\">)<\/span>\n\n    <span class=\"c1\"># And the bars\n<\/span>    <span class=\"n\">bars<\/span> <span class=\"o\">=<\/span> <span class=\"n\">plot<\/span><span class=\"p\">.<\/span><span class=\"n\">vbar<\/span><span class=\"p\">(<\/span><span class=\"n\">x<\/span><span class=\"o\">=<\/span><span class=\"n\">players<\/span><span class=\"p\">,<\/span> <span class=\"n\">top<\/span><span class=\"o\">=<\/span><span class=\"n\">frequency<\/span><span class=\"p\">,<\/span> <span class=\"n\">width<\/span><span class=\"o\">=<\/span><span class=\"mf\">0.9<\/span><span class=\"p\">)<\/span>\n\n    <span class=\"c1\"># Build the context variables\n<\/span>    <span class=\"n\">graph_script<\/span><span class=\"p\">,<\/span> <span class=\"n\">graph_div<\/span> <span class=\"o\">=<\/span> <span class=\"n\">components<\/span><span class=\"p\">(<\/span><span class=\"n\">plot<\/span><span class=\"p\">)<\/span>\n\n    <span class=\"c1\"># Add them to context\n<\/span>    <span class=\"n\">context<\/span> <span class=\"o\">=<\/span> <span class=\"p\">{<\/span><span class=\"s\">\"graph_script\"<\/span><span class=\"p\">:<\/span> <span class=\"n\">graph_script<\/span><span class=\"p\">,<\/span>\n               <span class=\"s\">\"graph_div\"<\/span><span class=\"p\">:<\/span> <span class=\"n\">graph_div<\/span><span class=\"p\">}<\/span>\n\n    <span class=\"c1\"># Render the view\n<\/span>    <span class=\"k\">return<\/span> <span class=\"n\">render<\/span><span class=\"p\">(<\/span><span class=\"n\">request<\/span><span class=\"p\">,<\/span> <span class=\"s\">'events.html'<\/span><span class=\"p\">,<\/span> <span class=\"n\">context<\/span><span class=\"o\">=<\/span><span class=\"n\">context<\/span><span class=\"p\">)<\/span>\n<\/code><\/pre>\n<div class=\"highlight__panel js-actions-panel\">\n<div class=\"highlight__panel-action js-fullscreen-code-action\">\n    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"><title>Enter fullscreen mode<\/title>\n    <path d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\/>\n<\/svg><\/p>\n<p>    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"><title>Exit fullscreen mode<\/title>\n    <path d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\/>\n<\/svg><\/p>\n<\/div>\n<\/div>\n<\/div>\n<p>That is in fact the code I used, with distracting details removed (as in, this view also contains a table of events and a table of stats and a pile of filtering controls and such which have been removed from this sample). Similarly, if I reduce the template <code>events.html<\/code> by removing all that distracting detail it looks like:<\/p>\n<div class=\"highlight js-code-highlight\">\n<pre class=\"highlight html\"><code>{% extends \"base.html\" %}\n\n{% block styles %}\n     <span class=\"nt\">&lt;link<\/span> <span class=\"na\">href=<\/span><span class=\"s\">\u201dhttp:\/\/cdn.pydata.org\/bokeh\/release\/bokeh-2.4.2.min.css\"<\/span> <span class=\"na\">rel=<\/span><span class=\"s\">\u201dstylesheet\u201d<\/span> <span class=\"na\">type=<\/span><span class=\"s\">\u201dtext\/css\u201d<\/span><span class=\"nt\">&gt;<\/span>\n     <span class=\"nt\">&lt;link<\/span> <span class=\"na\">href=<\/span><span class=\"s\">\u201dhttp:\/\/cdn.pydata.org\/bokeh\/release\/bokeh-widgets-2.4.2.min.css\"<\/span> <span class=\"na\">rel=<\/span><span class=\"s\">\u201dstylesheet\u201d<\/span> <span class=\"na\">type=<\/span><span class=\"s\">\u201dtext\/css\u201d<\/span><span class=\"nt\">&gt;<\/span>   \n{% endblock %}\n\n{% block content %}\n    <span class=\"nt\">&lt;h1&gt;<\/span>Graph of Event Attendance<span class=\"nt\">&lt;\/h1&gt;<\/span>\n    {{ graph_div | safe }}\n{% endblock %}\n\n{% block scripts %}\n    <span class=\"nt\">&lt;script <\/span><span class=\"na\">src=<\/span><span class=\"s\">\"https:\/\/cdn.bokeh.org\/bokeh\/release\/bokeh-2.4.2.min.js\"<\/span><span class=\"nt\">&gt;&lt;\/script&gt;<\/span>\n    <span class=\"nt\">&lt;script <\/span><span class=\"na\">src=<\/span><span class=\"s\">\"https:\/\/cdn.bokeh.org\/bokeh\/release\/bokeh-widgets-2.4.2.min.js\"<\/span><span class=\"nt\">&gt;&lt;\/script&gt;<\/span>\n    <span class=\"nt\">&lt;script <\/span><span class=\"na\">src=<\/span><span class=\"s\">\"https:\/\/cdn.bokeh.org\/bokeh\/release\/bokeh-tables-2.4.2.min.js\"<\/span><span class=\"nt\">&gt;&lt;\/script&gt;<\/span>\n    <span class=\"nt\">&lt;script <\/span><span class=\"na\">src=<\/span><span class=\"s\">\"https:\/\/cdn.bokeh.org\/bokeh\/release\/bokeh-api-2.4.2.min.js\"<\/span><span class=\"nt\">&gt;&lt;\/script&gt;<\/span>\n    {{ graph_script | safe }}\n{% endblock %}\n<\/code><\/pre>\n<div class=\"highlight__panel js-actions-panel\">\n<div class=\"highlight__panel-action js-fullscreen-code-action\">\n    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"><title>Enter fullscreen mode<\/title>\n    <path d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\/>\n<\/svg><\/p>\n<p>    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"><title>Exit fullscreen mode<\/title>\n    <path d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\/>\n<\/svg><\/p>\n<\/div>\n<\/div>\n<\/div>\n<p>When <code>base.html<\/code> is a Django template with placeholders for <code>styles<\/code>, <code>content<\/code> and <code>scripts<\/code>.<\/p>\n<h3>\n  <a name=\"making-it-interactive\" href=\"#making-it-interactive\"><br \/>\n  <\/a><br \/>\n  Making it interactive<br \/>\n<\/h3>\n<p>Here, the adventure truly begins. Bokeh is a rich library with high interactivity touted as one of its assets. The central feature of that is being able to update data in the graph in response to user requests. <\/p>\n<p>Alas, it proved not to be so simple at all, very poorly documented, and requiring some reverse engineering. Which is precisely where a journal comes in handy and why it becomes useful to document.<\/p>\n<p>And this story is long enough so the next chapter will come &#8230; next.<\/p>\n<p><a href=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--9npEhQUk--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/agsyx1mwp0rjtr7i39y3.jpg\" class=\"article-body-image-wrapper\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--9npEhQUk--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/agsyx1mwp0rjtr7i39y3.jpg\" alt=\"Comig soon\" loading=\"lazy\" width=\"880\" height=\"729\"\/><\/a><\/p>\n<hr\/>\n<p><a href=\"https:\/\/www.freepik.com\/photos\/people\">Pointing dude photo created by drobotdean &#8211; www.freepik.com<\/a> <br \/><a href=\"https:\/\/www.freepik.com\/photos\/flowers\">Coming soon photo created by rawpixel.com &#8211; www.freepik.com<\/a><\/p>\n<hr\/>\n<ol>\n<li id=\"fn1\">\n<p>In case you don&#8217;t like random judgements passed on websites, or, you&#8217;re the unfortunate author of that one, here&#8217;s why it&#8217;s bad: The code blocks are all inconsistent in width and style and font size, the whole thing is as a consequence a jarring bother to try and read, and for my needs it repeats unnecessarily all the Django hoo-ha. A better page would just say &#8220;Set up a Django project&#8221; linking to another page that explains how &#8211; written by same author or someone else, they abound, and then get into the meaty stuff that the title promises, namely &#8220;Integrating Bokeh visualisations into Django Projects&#8221;. Surprisingly enough if I&#8217;m drawn by that title (and I was), I know what a Django project is and I have one (or a few) and I&#8217;m looking to integrate Bokeh visualisations not have my hand held with clumsily formatted code examples through the basics of getting to where I already am, with a Django project.\u00a0<a href=\"#fnref1\">\u21a9<\/a><\/p>\n<\/li>\n<li id=\"fn2\">\n<p>This one is <em>OK<\/em> because the code blocks and images are at least in tune with the article. It&#8217;s short of <em>Great<\/em> because it falls behind an annoying login demand (which you can lose simply by disabling Javascript with <a href=\"https:\/\/add0n.com\/javascript-toggler.html\">any old browser addon<\/a> and reloading the page) and because it repeats the annoying handhold through setting up a Django site. Which is not annoying if that&#8217;s what you need, but it&#8217;s not what you need when you click on an article titled &#8220;Integrating Bokeh Visualisations in Django Application&#8221; &#8211; because if you click on that it&#8217;s because you have a Django application and want to integrate Bokeh visualisation into it. \u00a0<a href=\"#fnref2\">\u21a9<\/a><\/p>\n<p>I failed categorically to find a page I&#8217;d class as <em>Good<\/em> alas &#8211; and admit I find the web, driven by this endless need for publishing and novelty and enormous population of wannabe writers clamouring for attention just does reruns of the same mediocre stuff over and over! <\/p>\n<p>As an astute reader you will, of course, have noted that I am writing on-line about my disappointment with the bulk of on-line writing and the deep irony of that. I do to. <\/p>\n<p>Of course, I am not calmouring for attention, not doing reruns of the same mediocre stuff, over and over, nor assuming with every story that you are feree of context and a total noob, while at he same time trying to ensure I link all jargon and enw ideas to explanatory pages. Nor am I begging you for your likes, subscribes or whatever &#8211; I am just happy to share stories and notes now and then as much to myself and for you, and because I believe that learning (and particularly retention) is driven by story, and there are enough dry facts out there, but my story is often one of finding dry facts the hard way (because I could not find any documentation on it) and involve exploration and often reverse engineering. These are the stories I most like having clearly recorded.<\/p>\n<\/li>\n<\/ol><\/div>\n\n","protected":false},"excerpt":{"rendered":"<p>Another journey, captured in my journal, that I think is worth sharing. To wit, a story (of learning and how that proceeds), and a summary (of how to add graphs to a Django website). The story I have a Django website on which I am presenting a table of data and some statistics on that &hellip;<\/p>\n<p class=\"read-more\"> <a class=\"\" href=\"http:\/\/localhost\/wordpress\/adding-graphs-to-a-django-website\/\"> <span class=\"screen-reader-text\">Adding Graphs to a Django Website<\/span> Read More &raquo;<\/a><\/p>\n","protected":false},"author":1,"featured_media":1453,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"site-sidebar-layout":"default","site-content-layout":"default","ast-main-header-display":"","ast-hfb-above-header-display":"","ast-hfb-below-header-display":"","ast-hfb-mobile-header-display":"","site-post-title":"","ast-breadcrumbs-content":"","ast-featured-img":"","footer-sml-layout":"","theme-transparent-header-meta":"","adv-header-id-meta":"","stick-header-meta":"","header-above-stick-meta":"","header-main-stick-meta":"","header-below-stick-meta":""},"categories":[1],"tags":[],"_links":{"self":[{"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/posts\/1450"}],"collection":[{"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/comments?post=1450"}],"version-history":[{"count":0,"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/posts\/1450\/revisions"}],"wp:featuredmedia":[{"embeddable":true,"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/media\/1453"}],"wp:attachment":[{"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/media?parent=1450"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/categories?post=1450"},{"taxonomy":"post_tag","embeddable":true,"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/tags?post=1450"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}