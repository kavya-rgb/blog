{"id":1053,"date":"2022-03-09T13:51:39","date_gmt":"2022-03-09T13:51:39","guid":{"rendered":"http:\/\/localhost\/wordpress\/spo600-lab-05-algorithm-selection\/"},"modified":"2022-03-09T13:51:39","modified_gmt":"2022-03-09T13:51:39","slug":"spo600-lab-05-algorithm-selection","status":"publish","type":"post","link":"http:\/\/localhost\/wordpress\/spo600-lab-05-algorithm-selection\/","title":{"rendered":"SPO600 Lab 05 &#8211; Algorithm Selection"},"content":{"rendered":"<p> <br \/>\n<\/p>\n<div data-article-id=\"1016818\" id=\"article-body\">\n<h2>\n  <a name=\"hello\" href=\"#hello\"><br \/>\n  <\/a><br \/>\n  Hello<br \/>\n<\/h2>\n<p>In this lab we are supposed to run different versions of the same program and analyze the performance difference.<\/p>\n<p>This program basically will scale a number of samples that will be decided later but that must be enough for the program to run for 20 seconds or more.<\/p>\n<p>Each version of the program has some variance in in the algorithm.<br \/>Here are they: <br \/>From our <a href=\"https:\/\/wiki.cdot.senecacollege.ca\/wiki\/SPO600_Algorithm_Selection_Lab\">lab page<\/a><\/p>\n<div class=\"highlight js-code-highlight\">\n<pre class=\"highlight plaintext\"><code>1.  vol0.c is the basic or naive algorithm. This approach multiplies each sound sample by the volume scaling factor, casting from signed 16-bit integer to floating point and back again. Casting between integer and floating point can be expensive operations.\n\n2.  vol1.c does the math using fixed-point calculations. This avoids the overhead of casting between integer and floating point and back again.\n\n\n3.  vol2.c pre-calculates all 65536 different results, and then looks up the answer for each input value.\n\n4.  vol3.c is a dummy program - it doesn't scale the volume at all. It can be used to determine some of the overhead of the rest of the processing (besides scaling the volume) done by the other programs.\n\n\n5.  vol4.c uses Single Instruction, Multiple Data (SIMD) instructions accessed through inline assembley (assembly language code inserted into a C program). This program is specific to the AArch64 architecture and will not build for x86_64.\n\n6.  vol5.c uses SIMD instructions accessed through Complier Intrinsics. This program is also specific to AArch64.\n\n<\/code><\/pre>\n<div class=\"highlight__panel js-actions-panel\">\n<div class=\"highlight__panel-action js-fullscreen-code-action\">\n    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"><title>Enter fullscreen mode<\/title>\n    <path d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\/>\n<\/svg><\/p>\n<p>    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"><title>Exit fullscreen mode<\/title>\n    <path d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\/>\n<\/svg><\/p>\n<\/div>\n<\/div>\n<\/div>\n<p>In this lab we will use the AArch64 and x86_64 machines provided by the professor.<\/p>\n<h2>\n  <a name=\"aarch64\" href=\"#aarch64\"><br \/>\n  <\/a><br \/>\n  AArch64<br \/>\n<\/h2>\n<p>First, as said by the professor, we need to calculate the overhead of a dummy program. <br \/>This way we will know how much overhead we have and this way we can decrease it from our other algorithms runs.<\/p>\n<p>So lets set the number of samples so our program can run for over 20 seconds:<br \/><a href=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--Hu0EunKy--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/xd0ua0mv9a8t7j9vcipn.png\" class=\"article-body-image-wrapper\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--Hu0EunKy--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/xd0ua0mv9a8t7j9vcipn.png\" alt=\"header\" loading=\"lazy\" width=\"880\" height=\"317\"\/><\/a><\/p>\n<p>Then we compile our programs using the <code>make<\/code> command:<\/p>\n<p><a href=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--KDpIzxBs--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/dvbi21p39u0x17to4kh5.png\" class=\"article-body-image-wrapper\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--KDpIzxBs--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/dvbi21p39u0x17to4kh5.png\" alt=\"make\" loading=\"lazy\" width=\"880\" height=\"177\"\/><\/a><\/p>\n<p>And now lets run vol3 (Dummy program) for 5 times and see how long it takes in average.<\/p>\n<p><a href=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--6sz8A099--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/safxjv402tst14rt6c7f.png\" class=\"article-body-image-wrapper\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--6sz8A099--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/safxjv402tst14rt6c7f.png\" alt=\"aarch64vol3\" loading=\"lazy\" width=\"778\" height=\"956\"\/><\/a><\/p>\n<p>Lets discard the highest and the lowest values and get the average: <code>26.946 seconds<\/code> <br \/>This is the value of our overhead that we will subtract from the other programs.<\/p>\n<h3>\n  <a name=\"now-lets-do-the-same-with-others\" href=\"#now-lets-do-the-same-with-others\"><br \/>\n  <\/a><br \/>\n  Now lets do the same with others:<br \/>\n<\/h3>\n<h3>\n  <a name=\"vol0\" href=\"#vol0\"><br \/>\n  <\/a><br \/>\n  vol0:<br \/>\n<\/h3>\n<p><a href=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--qjNwUXS---\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/ehbhld879jnxjx0ljm71.png\" class=\"article-body-image-wrapper\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--qjNwUXS---\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/ehbhld879jnxjx0ljm71.png\" alt=\"vol0\" loading=\"lazy\" width=\"789\" height=\"970\"\/><\/a><\/p>\n<p>Again, lets discard the highest and lowest ones and get the average, then we subtract from the dummy overhead.<br \/>Our Average is <code>27.684 seconds<\/code>.<br \/><code>27.684<\/code> &#8211; <code>26.946 (overhead)<\/code> = <code>0.738s<\/code>.<br \/>We had <code>0.738s<\/code> scaling time.<\/p>\n<h3>\n  <a name=\"vol1\" href=\"#vol1\"><br \/>\n  <\/a><br \/>\n  vol1:<br \/>\n<\/h3>\n<p><a href=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--j9zrSFZC--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/al9kpunbfi7ww1332uxm.png\" class=\"article-body-image-wrapper\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--j9zrSFZC--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/al9kpunbfi7ww1332uxm.png\" alt=\"vol1\" loading=\"lazy\" width=\"755\" height=\"964\"\/><\/a><\/p>\n<p>Repeating the process, we have <code>27.501s<\/code> average<br \/>Subtracting the overhead we have:  <code>0.555s<\/code> scaling time<\/p>\n<h3>\n  <a name=\"vol2\" href=\"#vol2\"><br \/>\n  <\/a><br \/>\n  vol2:<br \/>\n<\/h3>\n<p><a href=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--zdmOOeon--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/ezt9o33mfc9eic7zhuzq.png\" class=\"article-body-image-wrapper\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--zdmOOeon--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/ezt9o33mfc9eic7zhuzq.png\" alt=\"vol2\" loading=\"lazy\" width=\"750\" height=\"956\"\/><\/a><\/p>\n<p>Average: <code>33.748s<\/code><br \/>Subtracting the overhead we have:  <code>6.802s<\/code> scaling time.<\/p>\n<h3>\n  <a name=\"vol4\" href=\"#vol4\"><br \/>\n  <\/a><br \/>\n  vol4:<br \/>\n<\/h3>\n<p><a href=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--HB8pWIoK--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/cxchdv9mpj6d7kn39tuy.png\" class=\"article-body-image-wrapper\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--HB8pWIoK--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/cxchdv9mpj6d7kn39tuy.png\" alt=\"vol4\" loading=\"lazy\" width=\"775\" height=\"994\"\/><\/a><\/p>\n<p>Average: <code>26.763s<\/code>.<br \/>Subtracting the overhead we have:  <code>-0.183s<\/code> scaling time.<\/p>\n<h3>\n  <a name=\"vol5\" href=\"#vol5\"><br \/>\n  <\/a><br \/>\n  vol5:<br \/>\n<\/h3>\n<p><a href=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--TH7NukHK--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/2udquejihlo3gfg2bdxt.png\" class=\"article-body-image-wrapper\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--TH7NukHK--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/2udquejihlo3gfg2bdxt.png\" alt=\"vol5\" loading=\"lazy\" width=\"794\" height=\"964\"\/><\/a><\/p>\n<p>Average: <code>26.729s<\/code>.<br \/>Subtracting the overhead we have:  <code>-0.216s<\/code> scaling time.<\/p>\n<hr\/>\n<p>I tried to change the <code>Makefile<\/code> to try to make it run faster by using the <code>-Ofast<\/code> and enable the vectorization <\/p>\n<p><a href=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--KwDvNbb9--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/my3o3qd324y44l6o0z4w.png\" class=\"article-body-image-wrapper\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--KwDvNbb9--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/my3o3qd324y44l6o0z4w.png\" alt=\"Ofast\" loading=\"lazy\" width=\"880\" height=\"301\"\/><\/a><\/p>\n<p>And had a 3 second average difference from the <code>-O2<\/code>.<\/p>\n<hr\/>\n<p>Now lets go to x86_64 machine<\/p>\n<h2>\n  <a name=\"x8665\" href=\"#x8665\"><br \/>\n  <\/a><br \/>\n  x86_65<br \/>\n<\/h2>\n<p>The dummy (vol3) ovearhead value is <code>23.650s<\/code>.<\/p>\n<p>Vol0 is the na\u00efve implementation:<br \/>The average was <code>24.158 s<\/code>.<br \/>Minus the overhead, the time scaling is:  <code>0.508s<\/code><\/p>\n<p>Vol1 is the fixed point implementation:<br \/>The average was <code>23.736s<\/code>.<br \/>Minus the overhead, the time scaling is:  <code>0.086s<\/code><\/p>\n<p>Vol2 is the precalculated implementation:<br \/>The average was <code>24.676sz<\/code>.<br \/>Minus the overhead, the time scaling is:  <code>1.026s<\/code><\/p>\n<hr\/>\n<h2>\n  <a name=\"finally\" href=\"#finally\"><br \/>\n  <\/a><br \/>\n  Finally<br \/>\n<\/h2>\n<p>Lets answer the questions on the c code:<br \/><a href=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--jhV3ox3q--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/t48dxiiz461eapdlc7x0.png\" class=\"article-body-image-wrapper\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--jhV3ox3q--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/t48dxiiz461eapdlc7x0.png\" alt=\"q1\" loading=\"lazy\" width=\"880\" height=\"101\"\/><\/a><\/p>\n<p>The dummy program will help us measure the overhead, this is the process that every other vol program will go through so we need to know how much it is in order to know how much is the scaling process time.<\/p>\n<p><a href=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--JGMoO-0p--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/8u3lj328gd205psqtkfp.png\" class=\"article-body-image-wrapper\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--JGMoO-0p--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/8u3lj328gd205psqtkfp.png\" alt=\"q2\" loading=\"lazy\" width=\"880\" height=\"221\"\/><\/a><\/p>\n<p>Those parts are needed because if you don\u2019t use the result of your calculations, the compiler will see it and avoid it as you are not using it anyway, so In the end your program will end up doing nothing at all.<\/p>\n<p><a href=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--AziFPfQM--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/zb6x5rh6g7eb25ecpwsr.png\" class=\"article-body-image-wrapper\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--AziFPfQM--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/zb6x5rh6g7eb25ecpwsr.png\" alt=\"q3\" loading=\"lazy\" width=\"880\" height=\"119\"\/><\/a><\/p>\n<p>That\u2019s a good question. I would say to make sure it\u2019s a positive number, but to be honest Im not sure. \u2639<\/p>\n<p>I could notice that different algorithms produce different outputs. But running the same program multiple times will produce the same result even with different performance times. I would say that the difference results between algorithms, in terms of audio is not big enough for us to perceive.<\/p>\n<p>Thank you for reading!<\/p>\n<\/p><\/div>\n\n","protected":false},"excerpt":{"rendered":"<p>Hello In this lab we are supposed to run different versions of the same program and analyze the performance difference. This program basically will scale a number of samples that will be decided later but that must be enough for the program to run for 20 seconds or more. Each version of the program has &hellip;<\/p>\n<p class=\"read-more\"> <a class=\"\" href=\"http:\/\/localhost\/wordpress\/spo600-lab-05-algorithm-selection\/\"> <span class=\"screen-reader-text\">SPO600 Lab 05 &#8211; Algorithm Selection<\/span> Read More &raquo;<\/a><\/p>\n","protected":false},"author":1,"featured_media":1054,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"site-sidebar-layout":"default","site-content-layout":"default","ast-main-header-display":"","ast-hfb-above-header-display":"","ast-hfb-below-header-display":"","ast-hfb-mobile-header-display":"","site-post-title":"","ast-breadcrumbs-content":"","ast-featured-img":"","footer-sml-layout":"","theme-transparent-header-meta":"","adv-header-id-meta":"","stick-header-meta":"","header-above-stick-meta":"","header-main-stick-meta":"","header-below-stick-meta":""},"categories":[1],"tags":[],"_links":{"self":[{"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/posts\/1053"}],"collection":[{"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/comments?post=1053"}],"version-history":[{"count":0,"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/posts\/1053\/revisions"}],"wp:featuredmedia":[{"embeddable":true,"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/media\/1054"}],"wp:attachment":[{"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/media?parent=1053"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/categories?post=1053"},{"taxonomy":"post_tag","embeddable":true,"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/tags?post=1053"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}