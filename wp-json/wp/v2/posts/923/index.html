{"id":923,"date":"2022-03-09T10:20:31","date_gmt":"2022-03-09T10:20:31","guid":{"rendered":"http:\/\/localhost\/wordpress\/how-to-use-nextjs-loader-for-page-transitions\/"},"modified":"2022-03-09T10:20:31","modified_gmt":"2022-03-09T10:20:31","slug":"how-to-use-nextjs-loader-for-page-transitions","status":"publish","type":"post","link":"http:\/\/localhost\/wordpress\/how-to-use-nextjs-loader-for-page-transitions\/","title":{"rendered":"How to Use NextJS Loader for Page Transitions"},"content":{"rendered":"<p> <br \/>\n<\/p>\n<div data-article-id=\"1017083\" id=\"article-body\">\n<p><strong>Context<\/strong><br \/>NextJs does Automating Code-Splitting on the basis of <a href=\"https:\/\/nextjs.org\/docs\/basic-features\/pages\">pages<\/a>, so each time there is a route change, nextjs dynamically loads the necessary modules.<\/p>\n<p>If you&#8217;re using Nextjs <a href=\"https:\/\/nextjs.org\/docs\/api-reference\/next\/link\">Link<\/a> Component, it prefetches the necessary modules related to page Link has href of, whenever it comes in viewport and whenever user hovers over it by default to make user experience smooth.<\/p>\n<p>But in some scenarios adding a loader for page transitions when modules are heavy or they are fetched yet boosts the user experience a lot.<\/p>\n<hr\/>\n<p><strong>Code<\/strong><\/p>\n<ul>\n<li>Let&#8217;s create a Loader Svg First, I&#8217;m using a svg loader from <a href=\"https:\/\/codepen.io\/nikhil8krishnan\/pen\/rVoXJa\">here<\/a>.\n<\/li>\n<\/ul>\n<div class=\"highlight js-code-highlight\">\n<pre class=\"highlight plaintext\"><code>export const SvgLoader = () =&gt; (\n  &lt;div style={{width: '100px'}}&gt;\n    &lt;svg\n      version=\"1.1\"\n      id=\"L4\"\n      xmlns=\"http:\/\/www.w3.org\/2000\/svg\"\n      x=\"0px\"\n      y=\"0px\"\n      viewBox=\"0 0 100 100\"\n      enable-background=\"new 0 0 0 0\"\n    &gt;\n      &lt;circle fill=\"#fff\" stroke=\"none\" cx=\"6\" cy=\"50\" r=\"6\"&gt;\n        &lt;animate attributeName=\"opacity\" dur=\"1s\" values=\"0;1;0\" repeatCount=\"indefinite\" begin=\"0.1\" \/&gt;\n      &lt;\/circle&gt;\n      &lt;circle fill=\"#fff\" stroke=\"none\" cx=\"26\" cy=\"50\" r=\"6\"&gt;\n        &lt;animate attributeName=\"opacity\" dur=\"1s\" values=\"0;1;0\" repeatCount=\"indefinite\" begin=\"0.2\" \/&gt;\n      &lt;\/circle&gt;\n      &lt;circle fill=\"#fff\" stroke=\"none\" cx=\"46\" cy=\"50\" r=\"6\"&gt;\n        &lt;animate attributeName=\"opacity\" dur=\"1s\" values=\"0;1;0\" repeatCount=\"indefinite\" begin=\"0.3\" \/&gt;\n      &lt;\/circle&gt;\n    &lt;\/svg&gt;\n  &lt;\/div&gt;\n);\n<\/code><\/pre>\n<div class=\"highlight__panel js-actions-panel\">\n<div class=\"highlight__panel-action js-fullscreen-code-action\">\n    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"><title>Enter fullscreen mode<\/title>\n    <path d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\/>\n<\/svg><\/p>\n<p>    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"><title>Exit fullscreen mode<\/title>\n    <path d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\/>\n<\/svg><\/p>\n<\/div>\n<\/div>\n<\/div>\n<ul>\n<li>Now Create  Loader Component that has the logic for when to show the loader.\n<\/li>\n<\/ul>\n<div class=\"highlight js-code-highlight\">\n<pre class=\"highlight plaintext\"><code>import React, { useState } from \"react\";\nimport { SvgLoader } from \".\/SvgLoader\";\n\nexport const Loader = () =&gt; {\n  const router = useRouter();\n  const [isLoaderVisible, setIsLoaderVisible] = useState(false);\n\n  React.useEffect(() =&gt; {\n    const handleRouteChange = (url, { shallow }) =&gt; {\n      setIsLoaderVisible(true);\n    };\n\n    const handleRouteComplete = (url, { shallow }) =&gt; {\n      setIsLoaderVisible(false);\n    };\n\n\/\/ here we subscribe to router change start and complete events\n    router.events.on(\"routeChangeStart\", handleRouteChange);\n    router.events.on(\"routeChangeComplete\", handleRouteComplete);\n\n\/\/ unsubscribing to router events when component unmounts to prevent memeory leaks\n    return () =&gt; {\n      router.events.off(\"routeChangeStart\", handleRouteChange);\n      router.events.off(\"routeChangeComplete\", handleRouteComplete);\n    };\n  }, []);\n\n  if (isLoaderVisible) {\n    return (\n      &lt;div\n        style={{\n          position: \"fixed\",\n          inset: 0,\n          display: \"flex\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n        }}\n      &gt;\n        &lt;SvgLoader \/&gt;\n      &lt;\/div&gt;\n    );\n  } else return null;\n};\n<\/code><\/pre>\n<div class=\"highlight__panel js-actions-panel\">\n<div class=\"highlight__panel-action js-fullscreen-code-action\">\n    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"><title>Enter fullscreen mode<\/title>\n    <path d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\/>\n<\/svg><\/p>\n<p>    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"><title>Exit fullscreen mode<\/title>\n    <path d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\/>\n<\/svg><\/p>\n<\/div>\n<\/div>\n<\/div>\n<ul>\n<li>Now we can use the above loader in any of the Higher Order compoents or even in _app.js\n<\/li>\n<\/ul>\n<div class=\"highlight js-code-highlight\">\n<pre class=\"highlight plaintext\"><code>import {Loader} from '..\/components\/Loader'\n\nfunction MyApp({Component, pageProps}: any) {\n  return (\n    &lt;&gt;\n      &lt;Loader \/&gt;\n      &lt;Component {...pageProps} \/&gt;\n    &lt;\/&gt;\n  );\n}\n<\/code><\/pre>\n<div class=\"highlight__panel js-actions-panel\">\n<div class=\"highlight__panel-action js-fullscreen-code-action\">\n    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"><title>Enter fullscreen mode<\/title>\n    <path d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\/>\n<\/svg><\/p>\n<p>    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"><title>Exit fullscreen mode<\/title>\n    <path d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\/>\n<\/svg><\/p>\n<\/div>\n<\/div>\n<\/div>\n<p>Output<br \/>Whenever there will be a page change, below loader will show up, incase modules are not imported.<br \/>Gist: <a href=\"https:\/\/gist.github.com\/arshkkk\/b3555c65441ff170d942c4e5309360a2\">https:\/\/gist.github.com\/arshkkk\/b3555c65441ff170d942c4e5309360a2<\/a><\/p>\n<p><a href=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--CXrbgBH3--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/fafe1ojhyzexrjyjb85j.png\" class=\"article-body-image-wrapper\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--CXrbgBH3--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/fafe1ojhyzexrjyjb85j.png\" alt=\"Image description\" loading=\"lazy\" width=\"880\" height=\"501\"\/><\/a><\/p>\n<\/p><\/div>\n<p><br \/>\n<br \/><a href=\"https:\/\/dev.to\/arshkkk\/how-to-use-nextjs-loader-for-page-transitions-1cpd\">Source link <\/a><\/p>\n","protected":false},"excerpt":{"rendered":"<p>ContextNextJs does Automating Code-Splitting on the basis of pages, so each time there is a route change, nextjs dynamically loads the necessary modules. If you&#8217;re using Nextjs Link Component, it prefetches the necessary modules related to page Link has href of, whenever it comes in viewport and whenever user hovers over it by default to &hellip;<\/p>\n<p class=\"read-more\"> <a class=\"\" href=\"http:\/\/localhost\/wordpress\/how-to-use-nextjs-loader-for-page-transitions\/\"> <span class=\"screen-reader-text\">How to Use NextJS Loader for Page Transitions<\/span> Read More &raquo;<\/a><\/p>\n","protected":false},"author":1,"featured_media":924,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"site-sidebar-layout":"default","site-content-layout":"default","ast-main-header-display":"","ast-hfb-above-header-display":"","ast-hfb-below-header-display":"","ast-hfb-mobile-header-display":"","site-post-title":"","ast-breadcrumbs-content":"","ast-featured-img":"","footer-sml-layout":"","theme-transparent-header-meta":"","adv-header-id-meta":"","stick-header-meta":"","header-above-stick-meta":"","header-main-stick-meta":"","header-below-stick-meta":""},"categories":[1],"tags":[],"_links":{"self":[{"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/posts\/923"}],"collection":[{"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/comments?post=923"}],"version-history":[{"count":0,"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/posts\/923\/revisions"}],"wp:featuredmedia":[{"embeddable":true,"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/media\/924"}],"wp:attachment":[{"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/media?parent=923"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/categories?post=923"},{"taxonomy":"post_tag","embeddable":true,"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/tags?post=923"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}