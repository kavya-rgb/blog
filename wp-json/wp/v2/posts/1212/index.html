{"id":1212,"date":"2022-03-09T17:22:46","date_gmt":"2022-03-09T17:22:46","guid":{"rendered":"http:\/\/localhost\/wordpress\/django-tutorial-10-deployment-dev-community\/"},"modified":"2022-03-09T17:22:46","modified_gmt":"2022-03-09T17:22:46","slug":"django-tutorial-10-deployment-dev-community","status":"publish","type":"post","link":"http:\/\/localhost\/wordpress\/django-tutorial-10-deployment-dev-community\/","title":{"rendered":"Django Tutorial #10: Deployment &#8211; DEV Community"},"content":{"rendered":"<p> <br \/>\n<\/p>\n<div data-article-id=\"1017571\" id=\"article-body\">\n<p>You can download the source code for this tutorial here:<\/p>\n<p><a href=\"https:\/\/www.ericsdevblog.com\/index.php\/beginners-roadmap-to-web-development\/\">Download the Source Code<\/a><\/p>\n<p>Finally, it&#8217;s time to deploy our Django project. Instead of doing everything manually, we use a server management panel, which is much more beginner-friendly.<\/p>\n<h2>\n  <a name=\"prepare-for-deployment\" href=\"#prepare-for-deployment\"><br \/>\n  <\/a><br \/>\n  Prepare For Deployment<br \/>\n<\/h2>\n<p>There are a few things we need to do before deploying our website.<\/p>\n<p>First, we need to prepare the static and media files. Make sure you have the following code in your <code>settings.py<\/code> file.<\/p>\n<div class=\"highlight js-code-highlight\">\n<pre class=\"highlight python\"><code><span class=\"n\">STATIC_ROOT<\/span> <span class=\"o\">=<\/span>  <span class=\"n\">os<\/span><span class=\"p\">.<\/span><span class=\"n\">path<\/span><span class=\"p\">.<\/span><span class=\"n\">join<\/span><span class=\"p\">(<\/span><span class=\"n\">BASE_DIR<\/span><span class=\"p\">,<\/span> <span class=\"s\">'static'<\/span><span class=\"p\">)<\/span>\n<span class=\"n\">STATIC_URL<\/span> <span class=\"o\">=<\/span> <span class=\"s\">'\/static\/'<\/span>\n\n<span class=\"n\">MEDIA_ROOT<\/span> <span class=\"o\">=<\/span>  <span class=\"n\">os<\/span><span class=\"p\">.<\/span><span class=\"n\">path<\/span><span class=\"p\">.<\/span><span class=\"n\">join<\/span><span class=\"p\">(<\/span><span class=\"n\">BASE_DIR<\/span><span class=\"p\">,<\/span> <span class=\"s\">'media'<\/span><span class=\"p\">)<\/span>\n<span class=\"n\">MEDIA_URL<\/span> <span class=\"o\">=<\/span> <span class=\"s\">'\/media\/'<\/span>\n<\/code><\/pre>\n<div class=\"highlight__panel js-actions-panel\">\n<div class=\"highlight__panel-action js-fullscreen-code-action\">\n    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"><title>Enter fullscreen mode<\/title>\n    <path d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\/>\n<\/svg><\/p>\n<p>    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"><title>Exit fullscreen mode<\/title>\n    <path d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\/>\n<\/svg><\/p>\n<\/div>\n<\/div>\n<\/div>\n<p>Run the following command:<\/p>\n<div class=\"highlight js-code-highlight\">\n<pre class=\"highlight shell\"><code>python manage.py collectstatic\n<\/code><\/pre>\n<div class=\"highlight__panel js-actions-panel\">\n<div class=\"highlight__panel-action js-fullscreen-code-action\">\n    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"><title>Enter fullscreen mode<\/title>\n    <path d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\/>\n<\/svg><\/p>\n<p>    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"><title>Exit fullscreen mode<\/title>\n    <path d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\/>\n<\/svg><\/p>\n<\/div>\n<\/div>\n<\/div>\n<p>This command will collect all static files from all the apps you created into the <code>static<\/code> folder.<\/p>\n<p>The media files, on the other hand, Django discourages serving media files directly from the server in the production environment. You need to configure your server settings. Take Apache as an example:<\/p>\n<div class=\"highlight js-code-highlight\">\n<pre class=\"highlight html\"><code>Alias \/media\/ \/path\/to\/media\/\n\n<span class=\"nt\">&lt;Directory<\/span> <span class=\"err\">\/<\/span><span class=\"na\">path<\/span><span class=\"err\">\/<\/span><span class=\"na\">to<\/span><span class=\"err\">\/<\/span><span class=\"na\">media<\/span><span class=\"nt\">\/&gt;<\/span>\nOrder deny,allow\nAllow from all\n<span class=\"nt\">&lt;\/Directory&gt;<\/span>\n<\/code><\/pre>\n<div class=\"highlight__panel js-actions-panel\">\n<div class=\"highlight__panel-action js-fullscreen-code-action\">\n    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"><title>Enter fullscreen mode<\/title>\n    <path d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\/>\n<\/svg><\/p>\n<p>    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"><title>Exit fullscreen mode<\/title>\n    <path d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\/>\n<\/svg><\/p>\n<\/div>\n<\/div>\n<\/div>\n<p>Notice that <code>\/media\/<\/code> matches the setting for <code>MEDIA_URL<\/code>, and <code>\/path\/to\/media\/<\/code> is the <strong>absolute<\/strong> path to the <code>media\/<\/code> folder.<\/p>\n<h3>\n  <a name=\"run-deployment-check\" href=\"#run-deployment-check\"><br \/>\n  <\/a><br \/>\n  Run Deployment Check<br \/>\n<\/h3>\n<p>Before we deploy our project, we need to check a few things. Go to terminal and run\u00a0<code>manage.py\u00a0check\u00a0--deploy<\/code>. This command will check the\u00a0<code>SECRET_KEY<\/code>,\u00a0<code>DEBUG<\/code>,\u00a0<code>ALLOWED_HOSTS<\/code>\u00a0and a few other sensitive settings for you.<\/p>\n<p>Please check your own settings against this documentation:\u00a0<a href=\"https:\/\/docs.djangoproject.com\/en\/4.0\/howto\/deployment\/checklist\/\">https:\/\/docs.djangoproject.com\/en\/4.0\/howto\/deployment\/checklist\/<\/a><\/p>\n<h2>\n  <a name=\"setup-a-vps\" href=\"#setup-a-vps\"><br \/>\n  <\/a><br \/>\n  Setup a VPS<br \/>\n<\/h2>\n<p>Next, let&#8217;s setup a new VPS by following this tutorial.<\/p>\n<p><a href=\"https:\/\/www.ericsdevblog.com\/index.php\/2019\/11\/how-to-setup-your-own-vps\/\">https:\/\/www.ericsdevblog.com\/index.php\/2019\/11\/how-to-setup-your-own-vps\/<\/a><\/p>\n<p>Now, you have two choices, you can either follow this tutorial and use a control panel to deploy our project, or you can do it manually.<\/p>\n<p>The control panel method does not guarantee success, I choose to use it here because it is a lot easier for beginners. So if it does not work for you, please refer to <a href=\"https:\/\/www.ericsdevblog.com\/index.php\/2020\/07\/how-to-deploy-a-django-project\/\">this article<\/a> and deploy it manually.<\/p>\n<h2>\n  <a name=\"install-a-control-panel-for-your-server\" href=\"#install-a-control-panel-for-your-server\"><br \/>\n  <\/a><br \/>\n  Install a Control Panel For Your Server<br \/>\n<\/h2>\n<p>There is a lot of different panels you can choose from. Here I&#8217;ll use <a href=\"http:\/\/aapanel.com\/\">aaPanel<\/a> as an example.<\/p>\n<p><a href=\"http:\/\/demo.aapanel.com\/fdgi87jbn\/\">aaPanel Demo<\/a><\/p>\n<p>Run the shellcode on the official site of <a href=\"http:\/\/aapanel.com\/\">aaPanel<\/a>. Again, <strong>make sure CentOS 7 is installed on your VPS<\/strong>. <a href=\"http:\/\/aapanel.com\/\">aaPanel<\/a> is developed on CentOS, using other systems may cause errors.<\/p>\n<p>After the installation process is finished. Follow the instructions on the screen and log into the panel.<\/p>\n<p><a href=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--4cyRPCgL--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/www.ericsdevblog.com\/wp-content\/uploads\/2019\/10\/linux-home.png%3Ffit%3D640%252C526%26ssl%3D1\" class=\"article-body-image-wrapper\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--4cyRPCgL--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/www.ericsdevblog.com\/wp-content\/uploads\/2019\/10\/linux-home.png%3Ffit%3D640%252C526%26ssl%3D1\" alt=\"https:\/\/www.ericsdevblog.com\/wp-content\/uploads\/2019\/10\/linux-home.png?fit=640%2C526&amp;ssl=1\" loading=\"lazy\" width=\"880\" height=\"723\"\/><\/a><\/p>\n<p>From now on, everything should be straightforward. Just install the latest version of the Apache server and Python. You can install MySQL if you want. It is more robust and secure. But if you don&#8217;t, Django will use SQLite by default. You can also install other tools, but for now, these are all we need.<\/p>\n<h2>\n  <a name=\"deploy-your-django-project\" href=\"#deploy-your-django-project\"><br \/>\n  <\/a><br \/>\n  Deploy Your Django Project<br \/>\n<\/h2>\n<p><a href=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--fhMxFJ_J--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/www.ericsdevblog.com\/wp-content\/uploads\/2020\/05\/image.png%3Ffit%3D953%252C411%26ssl%3D1\" class=\"article-body-image-wrapper\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--fhMxFJ_J--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/www.ericsdevblog.com\/wp-content\/uploads\/2020\/05\/image.png%3Ffit%3D953%252C411%26ssl%3D1\" alt=\"https:\/\/www.ericsdevblog.com\/wp-content\/uploads\/2020\/05\/image.png?fit=953%2C411&amp;ssl=1\" loading=\"lazy\" width=\"880\" height=\"380\"\/><\/a><\/p>\n<p>I tested this tool on my own server and it worked for me. However, since it is still under development, there is a chance that it won&#8217;t work for you. In that case, please refer to this post on <a href=\"https:\/\/www.ericsdevblog.com\/index.php\/2020\/07\/how-to-deploy-a-django-project\/\">how to deploy Django project manually<\/a>.<\/p>\n<p>First, go to &#8220;Files&#8221;, and create a new directory.<\/p>\n<p><a href=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--n7eawAI2--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/www.ericsdevblog.com\/wp-content\/uploads\/2020\/05\/image-1.png\" class=\"article-body-image-wrapper\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--n7eawAI2--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/www.ericsdevblog.com\/wp-content\/uploads\/2020\/05\/image-1.png\" alt=\"https:\/\/www.ericsdevblog.com\/wp-content\/uploads\/2020\/05\/image-1.png\" loading=\"lazy\" width=\"354\" height=\"212\"\/><\/a><\/p>\n<p>After that, upload your entire project to the folder you just created.<\/p>\n<p><a href=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--aB-bsokB--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/www.ericsdevblog.com\/wp-content\/uploads\/2020\/05\/image-2.png\" class=\"article-body-image-wrapper\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--aB-bsokB--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/www.ericsdevblog.com\/wp-content\/uploads\/2020\/05\/image-2.png\" alt=\"https:\/\/www.ericsdevblog.com\/wp-content\/uploads\/2020\/05\/image-2.png\" loading=\"lazy\" width=\"567\" height=\"521\"\/><\/a><\/p>\n<p>Next, open the Python Manager and add a new project.<\/p>\n<p><a href=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--JpFdK9d0--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/www.ericsdevblog.com\/wp-content\/uploads\/2020\/05\/image-3.png\" class=\"article-body-image-wrapper\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--JpFdK9d0--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/www.ericsdevblog.com\/wp-content\/uploads\/2020\/05\/image-3.png\" alt=\"https:\/\/www.ericsdevblog.com\/wp-content\/uploads\/2020\/05\/image-3.png\" loading=\"lazy\" width=\"635\" height=\"745\"\/><\/a><\/p>\n<p>&#8220;Path&#8221; should point to the dir that contains <code>manage.py<\/code>. &#8220;Version&#8221; is the version of Python that you installed.<\/p>\n<p>The startup module is can be either <code>gunicorn<\/code> or <code>uwsgi<\/code>. They are both interfaces that allow Django and the webserver to communicate. <code>gunicorn<\/code> did not work for me, so maybe you should try <code>uwsgi<\/code> first.<\/p>\n<p>The startup dir should point to the folder that contains <code>wsgi.py<\/code>. And finally, the &#8220;Port&#8221; can be anything you want. Once you click confirm, it will take a few minutes to install all dependencies.<\/p>\n<p>Finally, map the domain to the server and we are good to go! Assuming you already have one, if not, you can register a new domain name at <a href=\"https:\/\/www.shareasale.com\/r.cfm?b=467188&amp;u=2174092&amp;m=46483\">NameCheap<\/a>.<\/p>\n<\/p><\/div>\n\n","protected":false},"excerpt":{"rendered":"<p>You can download the source code for this tutorial here: Download the Source Code Finally, it&#8217;s time to deploy our Django project. Instead of doing everything manually, we use a server management panel, which is much more beginner-friendly. Prepare For Deployment There are a few things we need to do before deploying our website. First, &hellip;<\/p>\n<p class=\"read-more\"> <a class=\"\" href=\"http:\/\/localhost\/wordpress\/django-tutorial-10-deployment-dev-community\/\"> <span class=\"screen-reader-text\">Django Tutorial #10: Deployment &#8211; DEV Community<\/span> Read More &raquo;<\/a><\/p>\n","protected":false},"author":1,"featured_media":1213,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"site-sidebar-layout":"default","site-content-layout":"default","ast-main-header-display":"","ast-hfb-above-header-display":"","ast-hfb-below-header-display":"","ast-hfb-mobile-header-display":"","site-post-title":"","ast-breadcrumbs-content":"","ast-featured-img":"","footer-sml-layout":"","theme-transparent-header-meta":"","adv-header-id-meta":"","stick-header-meta":"","header-above-stick-meta":"","header-main-stick-meta":"","header-below-stick-meta":""},"categories":[1],"tags":[],"_links":{"self":[{"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/posts\/1212"}],"collection":[{"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/comments?post=1212"}],"version-history":[{"count":0,"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/posts\/1212\/revisions"}],"wp:featuredmedia":[{"embeddable":true,"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/media\/1213"}],"wp:attachment":[{"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/media?parent=1212"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/categories?post=1212"},{"taxonomy":"post_tag","embeddable":true,"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/tags?post=1212"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}