{"id":1039,"date":"2022-03-09T13:46:46","date_gmt":"2022-03-09T13:46:46","guid":{"rendered":"http:\/\/localhost\/wordpress\/integrate-supertokens-passwordless-authentication-with-next-js\/"},"modified":"2022-03-09T13:46:46","modified_gmt":"2022-03-09T13:46:46","slug":"integrate-supertokens-passwordless-authentication-with-next-js","status":"publish","type":"post","link":"http:\/\/localhost\/wordpress\/integrate-supertokens-passwordless-authentication-with-next-js\/","title":{"rendered":"Integrate SuperTokens Passwordless Authentication with Next.js"},"content":{"rendered":"<p> <br \/>\n<\/p>\n<div data-article-id=\"1016940\" id=\"article-body\">\n<h2>\n  <a name=\"a-quick-introduction\" href=\"#a-quick-introduction\"><br \/>\n  <\/a><br \/>\n  A Quick Introduction<br \/>\n<\/h2>\n<p><code>Authentication<\/code> is the mechanism to validate a user&#8217;s identity for an application. Authenticating a user with userId and password is the most common mechanism we use in many applications. However, there are other famous approaches to it. We can authenticate users using social logins, one-time passwords (OTP), or a magic link that helps authenticate directly. <\/p>\n<p><a href=\"https:\/\/supertokens.com\/\">SuperTokens<\/a> is an open-source, highly customized user auth provider framework that helps with all these forms of authentication mechanisms for your web applications. It is straightforward to integrate with a back-end framework like NodeJS, GoLang, Python and the front-end side with ReactJS, React Native, Plain Old JavaScript.<\/p>\n<p><a href=\"https:\/\/nextjs.org\/\">Next.js<\/a> is a popular React framework to build rapid web applications. In this article, we will learn how to integrate the power of the SuperTokens authentication mechanism with Next.js applications. We will focus on the <code>passwordless<\/code> authentication, but other recipes like using social logins or userId\/password will be similar.<\/p>\n<h2>\n  <a name=\"what-are-we-building-today\" href=\"#what-are-we-building-today\"><br \/>\n  <\/a><br \/>\n  What Are We Building Today?<br \/>\n<\/h2>\n<p>We will start with a simple but effective Next.js app and integrate the power of SuperTokens into it. The app is called <code>Retell<\/code>, which shows famous people&#8217;s famous quotes around the globe. Please open your favourite code editor and follow along with this article. Enjoy building it.<\/p>\n<p>At any point in time, if you want to refer to the source code, you can find it here:<\/p>\n<div class=\"ltag-github-readme-tag\">\n<div class=\"readme-overview\">\n<h3>\n      A project to demonstrate the integration of SuperTokens&#8217;s Passwrodless auth and Nextjs<br \/>\n    <\/h3>\n<\/p><\/div>\n<\/div>\n<p>\n<em>Please give a \u2b50 to the repo if you liked the work. It motivates me.<\/em><\/p>\n<h2>\n  <a name=\"setting-up-the-raw-retell-endraw-project-ui\" href=\"#setting-up-the-raw-retell-endraw-project-ui\"><br \/>\n  <\/a><br \/>\n  Setting Up the <code>Retell<\/code> Project UI<br \/>\n<\/h2>\n<p>This article assumes you have a basic understanding of React.js and can follow the Next.js source code. Please follow these steps to run the <code>Retell<\/code> project user interface locally,<\/p>\n<div class=\"highlight js-code-highlight\">\n<pre class=\"highlight shell\"><code>  npm <span class=\"nb\">install<\/span>\n  <span class=\"c\"># or<\/span>\n  yarn\n<\/code><\/pre>\n<div class=\"highlight__panel js-actions-panel\">\n<div class=\"highlight__panel-action js-fullscreen-code-action\">\n    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"><title>Enter fullscreen mode<\/title>\n    <path d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\/>\n<\/svg><\/p>\n<p>    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"><title>Exit fullscreen mode<\/title>\n    <path d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\/>\n<\/svg><\/p>\n<\/div>\n<\/div>\n<\/div>\n<ul>\n<li>Then, run the development server,\n<\/li>\n<\/ul>\n<div class=\"highlight js-code-highlight\">\n<pre class=\"highlight shell\"><code>  npm run dev\n  <span class=\"c\"># or<\/span>\n  yarn dev\n<\/code><\/pre>\n<div class=\"highlight__panel js-actions-panel\">\n<div class=\"highlight__panel-action js-fullscreen-code-action\">\n    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"><title>Enter fullscreen mode<\/title>\n    <path d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\/>\n<\/svg><\/p>\n<p>    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"><title>Exit fullscreen mode<\/title>\n    <path d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\/>\n<\/svg><\/p>\n<\/div>\n<\/div>\n<\/div>\n<p>Now access the application using the URL <a href=\"http:\/\/localhost:3000\">http:\/\/localhost:3000<\/a> to see the quotes rendered successfully.<\/p>\n<p><a href=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--iidPlJ5q--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/cdn.hashnode.com\/res\/hashnode\/image\/upload\/v1646541381893\/hM8wHXO8G.png\" class=\"article-body-image-wrapper\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--iidPlJ5q--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/cdn.hashnode.com\/res\/hashnode\/image\/upload\/v1646541381893\/hM8wHXO8G.png\" alt=\"Quotes UI\" loading=\"lazy\" width=\"880\" height=\"638\"\/><\/a><\/p>\n<p>You can also access the <code>quotes<\/code> API using the URL: <a href=\"http:\/\/localhost:3000\/api\/quotes\">http:\/\/localhost:3000\/api\/quotes<\/a><\/p>\n<p>Congratulations!!! You have got the UI running. Let us now integrate the SuperTokens Passwordless auth with it.<\/p>\n<h2>\n  <a name=\"setting-up-supertokens-auth\" href=\"#setting-up-supertokens-auth\"><br \/>\n  <\/a><br \/>\n  Setting Up SuperTokens Auth<br \/>\n<\/h2>\n<p><code>SuperTokens<\/code> Passwordless auth recipe helps you authenticate using OTPs(one-time passwords) and magic links. We will configure this auth type with our Next.js app with a few steps,<\/p>\n<ul>\n<li>Create the front-end and back-end configurations.<\/li>\n<li>Show the Login UI<\/li>\n<li>Add Auth APIs<\/li>\n<li>Protect website routes<\/li>\n<li>Perform session verification on API calls<\/li>\n<\/ul>\n<p>We need to install a few dependencies for all the above steps. Please install the dependencies using the following command,<\/p>\n<div class=\"highlight js-code-highlight\">\n<pre class=\"highlight shell\"><code>yarn add supertokens-auth-react supertokens-node dotenv  nodemailer\n<\/code><\/pre>\n<div class=\"highlight__panel js-actions-panel\">\n<div class=\"highlight__panel-action js-fullscreen-code-action\">\n    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"><title>Enter fullscreen mode<\/title>\n    <path d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\/>\n<\/svg><\/p>\n<p>    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"><title>Exit fullscreen mode<\/title>\n    <path d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\/>\n<\/svg><\/p>\n<\/div>\n<\/div>\n<\/div>\n<h3>\n  <a name=\"frontend-and-backend-configurations\" href=\"#frontend-and-backend-configurations\"><br \/>\n  <\/a><br \/>\n  Front-end and Back-end Configurations<br \/>\n<\/h3>\n<p>Create a <code>.env.local<\/code> file at the root of the project with the following content,<\/p>\n<div class=\"highlight js-code-highlight\">\n<pre class=\"highlight shell\"><code><span class=\"nv\">NEXT_PUBLIC_NODEMAILER_USER<\/span><span class=\"o\">=<\/span>&lt;YOUR_GMAIL_ID&gt;\n<span class=\"nv\">NEXT_PUBLIC_NODEMAILER_PASSWORD<\/span><span class=\"o\">=<\/span>&lt;YOUR_GMAIL_PASSWORD&gt;\n\n<span class=\"nv\">NEXT_PUBLIC_APP_URL<\/span><span class=\"o\">=<\/span>http:\/\/localhost:3000\n<\/code><\/pre>\n<div class=\"highlight__panel js-actions-panel\">\n<div class=\"highlight__panel-action js-fullscreen-code-action\">\n    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"><title>Enter fullscreen mode<\/title>\n    <path d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\/>\n<\/svg><\/p>\n<p>    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"><title>Exit fullscreen mode<\/title>\n    <path d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\/>\n<\/svg><\/p>\n<\/div>\n<\/div>\n<\/div>\n<blockquote>\n<p>Important Note: The Gmail id and password is required to send OTP and Magic Link over email. Please do not use your personal Gmail id for this purpose. You can <a href=\"https:\/\/accounts.google.com\/signup\/v2\/webcreateaccount?flowName=GlifWebSignIn&amp;flowEntry=SignUp\">create a fake Gmail id<\/a> and lower the security settings to use it for testing purposes.<\/p>\n<\/blockquote>\n<p>Create a <code>config<\/code> folder at the root of your project. Now create an <code>appInfo.js<\/code> inside the <code>config<\/code> folder with the following content,<\/p>\n<div class=\"highlight js-code-highlight\">\n<pre class=\"highlight javascript\"><code><span class=\"kd\">const<\/span> <span class=\"nx\">port<\/span> <span class=\"o\">=<\/span> <span class=\"nx\">process<\/span><span class=\"p\">.<\/span><span class=\"nx\">env<\/span><span class=\"p\">.<\/span><span class=\"nx\">APP_PORT<\/span> <span class=\"o\">||<\/span> <span class=\"mi\">3000<\/span>\n\n<span class=\"kd\">const<\/span> <span class=\"nx\">apiBasePath<\/span> <span class=\"o\">=<\/span> <span class=\"dl\">'<\/span><span class=\"s1\">\/api\/auth\/<\/span><span class=\"dl\">'<\/span>\n\n<span class=\"k\">export<\/span> <span class=\"kd\">const<\/span> <span class=\"nx\">websiteDomain<\/span> <span class=\"o\">=<\/span>\n  <span class=\"nx\">process<\/span><span class=\"p\">.<\/span><span class=\"nx\">env<\/span><span class=\"p\">.<\/span><span class=\"nx\">APP_URL<\/span> <span class=\"o\">||<\/span>\n  <span class=\"nx\">process<\/span><span class=\"p\">.<\/span><span class=\"nx\">env<\/span><span class=\"p\">.<\/span><span class=\"nx\">NEXT_PUBLIC_APP_URL<\/span> <span class=\"o\">||<\/span>\n  <span class=\"s2\">`http:\/\/localhost:<\/span><span class=\"p\">${<\/span><span class=\"nx\">port<\/span><span class=\"p\">}<\/span><span class=\"s2\">`<\/span>\n\n<span class=\"k\">export<\/span> <span class=\"kd\">const<\/span> <span class=\"nx\">appInfo<\/span> <span class=\"o\">=<\/span> <span class=\"p\">{<\/span>\n  <span class=\"na\">appName<\/span><span class=\"p\">:<\/span> <span class=\"dl\">'<\/span><span class=\"s1\">Retell<\/span><span class=\"dl\">'<\/span><span class=\"p\">,<\/span>\n  <span class=\"nx\">websiteDomain<\/span><span class=\"p\">,<\/span>\n  <span class=\"na\">apiDomain<\/span><span class=\"p\">:<\/span> <span class=\"nx\">websiteDomain<\/span><span class=\"p\">,<\/span>\n  <span class=\"nx\">apiBasePath<\/span><span class=\"p\">,<\/span>\n<span class=\"p\">}<\/span>\n<\/code><\/pre>\n<div class=\"highlight__panel js-actions-panel\">\n<div class=\"highlight__panel-action js-fullscreen-code-action\">\n    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"><title>Enter fullscreen mode<\/title>\n    <path d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\/>\n<\/svg><\/p>\n<p>    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"><title>Exit fullscreen mode<\/title>\n    <path d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\/>\n<\/svg><\/p>\n<\/div>\n<\/div>\n<\/div>\n<p>The <code>appInfo.js<\/code> file contains a special object that specifies the variables for the front-end and back-end configurations. Please read more about the <code>appInfo<\/code> object <a href=\"https:\/\/supertokens.com\/docs\/passwordless\/appinfo\">from here<\/a>.<\/p>\n<p>Next, create a <code>frontendConfig.js<\/code> file inside the <code>config<\/code> folder with the following content,<\/p>\n<div class=\"highlight js-code-highlight\">\n<pre class=\"highlight javascript\"><code><span class=\"k\">import<\/span> <span class=\"nx\">PasswordlessReact<\/span> <span class=\"k\">from<\/span> <span class=\"dl\">\"<\/span><span class=\"s2\">supertokens-auth-react\/recipe\/passwordless<\/span><span class=\"dl\">\"<\/span><span class=\"p\">;<\/span>\n<span class=\"k\">import<\/span> <span class=\"nx\">SessionReact<\/span> <span class=\"k\">from<\/span> <span class=\"dl\">\"<\/span><span class=\"s2\">supertokens-auth-react\/recipe\/session<\/span><span class=\"dl\">\"<\/span><span class=\"p\">;<\/span>\n<span class=\"k\">import<\/span> <span class=\"p\">{<\/span> <span class=\"nx\">appInfo<\/span> <span class=\"p\">}<\/span> <span class=\"k\">from<\/span> <span class=\"dl\">\"<\/span><span class=\"s2\">.\/appInfo<\/span><span class=\"dl\">\"<\/span><span class=\"p\">;<\/span>\n\n<span class=\"k\">export<\/span> <span class=\"kd\">const<\/span> <span class=\"nx\">frontendConfig<\/span> <span class=\"o\">=<\/span> <span class=\"p\">()<\/span> <span class=\"o\">=&gt;<\/span> <span class=\"p\">{<\/span>\n  <span class=\"k\">return<\/span> <span class=\"p\">{<\/span>\n    <span class=\"nx\">appInfo<\/span><span class=\"p\">,<\/span>\n    <span class=\"na\">recipeList<\/span><span class=\"p\">:<\/span> <span class=\"p\">[<\/span>\n      <span class=\"nx\">PasswordlessReact<\/span><span class=\"p\">.<\/span><span class=\"nx\">init<\/span><span class=\"p\">({<\/span>\n        <span class=\"na\">contactMethod<\/span><span class=\"p\">:<\/span> <span class=\"dl\">\"<\/span><span class=\"s2\">EMAIL_OR_PHONE<\/span><span class=\"dl\">\"<\/span><span class=\"p\">,<\/span>\n      <span class=\"p\">}),<\/span>\n      <span class=\"nx\">SessionReact<\/span><span class=\"p\">.<\/span><span class=\"nx\">init<\/span><span class=\"p\">(),<\/span>\n    <span class=\"p\">],<\/span>\n  <span class=\"p\">};<\/span>\n<span class=\"p\">};<\/span>\n<\/code><\/pre>\n<div class=\"highlight__panel js-actions-panel\">\n<div class=\"highlight__panel-action js-fullscreen-code-action\">\n    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"><title>Enter fullscreen mode<\/title>\n    <path d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\/>\n<\/svg><\/p>\n<p>    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"><title>Exit fullscreen mode<\/title>\n    <path d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\/>\n<\/svg><\/p>\n<\/div>\n<\/div>\n<\/div>\n<p>Here we create a function to provide the config for the SuperTokens&#8217; front-end SDK. Later on, we will see how to use this function. Please notice the contact method is <code>EMAIL_OR_PHONE<\/code>. It means passwordless authentication will occur by sending the OTP and Magic Link to the email or phone number the user will specify to log in.<\/p>\n<p>Now let&#8217;s create the back-end configurations. Please create a file called <code>backendConfig.js<\/code> inside the <code>config<\/code> folder with the following content,<\/p>\n<div class=\"highlight js-code-highlight\">\n<pre class=\"highlight javascript\"><code><span class=\"nx\">require<\/span><span class=\"p\">(<\/span><span class=\"dl\">\"<\/span><span class=\"s2\">dotenv<\/span><span class=\"dl\">\"<\/span><span class=\"p\">).<\/span><span class=\"nx\">config<\/span><span class=\"p\">();<\/span>\n\n<span class=\"k\">import<\/span> <span class=\"nx\">Session<\/span> <span class=\"k\">from<\/span> <span class=\"dl\">\"<\/span><span class=\"s2\">supertokens-auth-react\/recipe\/session<\/span><span class=\"dl\">\"<\/span><span class=\"p\">;<\/span>\n<span class=\"k\">import<\/span> <span class=\"nx\">PasswordlessNode<\/span> <span class=\"k\">from<\/span> <span class=\"dl\">\"<\/span><span class=\"s2\">supertokens-node\/recipe\/passwordless<\/span><span class=\"dl\">\"<\/span><span class=\"p\">;<\/span>\n<span class=\"k\">import<\/span> <span class=\"nx\">SessionNode<\/span> <span class=\"k\">from<\/span> <span class=\"dl\">\"<\/span><span class=\"s2\">supertokens-node\/recipe\/session<\/span><span class=\"dl\">\"<\/span><span class=\"p\">;<\/span>\n<span class=\"k\">import<\/span> <span class=\"p\">{<\/span> <span class=\"nx\">appInfo<\/span> <span class=\"p\">}<\/span> <span class=\"k\">from<\/span> <span class=\"dl\">\"<\/span><span class=\"s2\">.\/appInfo<\/span><span class=\"dl\">\"<\/span><span class=\"p\">;<\/span>\n<span class=\"kd\">let<\/span> <span class=\"p\">{<\/span> <span class=\"nx\">getEmailBody<\/span> <span class=\"p\">}<\/span> <span class=\"o\">=<\/span> <span class=\"nx\">require<\/span><span class=\"p\">(<\/span><span class=\"dl\">\"<\/span><span class=\"s2\">..\/util\/mailer<\/span><span class=\"dl\">\"<\/span><span class=\"p\">);<\/span>\n\n<span class=\"k\">export<\/span> <span class=\"kd\">const<\/span> <span class=\"nx\">backendConfig<\/span> <span class=\"o\">=<\/span> <span class=\"p\">()<\/span> <span class=\"o\">=&gt;<\/span> <span class=\"p\">{<\/span>\n  <span class=\"kd\">const<\/span> <span class=\"nx\">nodemailer<\/span> <span class=\"o\">=<\/span> <span class=\"nx\">require<\/span><span class=\"p\">(<\/span><span class=\"dl\">'<\/span><span class=\"s1\">nodemailer<\/span><span class=\"dl\">'<\/span><span class=\"p\">);<\/span>\n\n  <span class=\"kd\">const<\/span> <span class=\"nx\">mailTransporter<\/span> <span class=\"o\">=<\/span> <span class=\"nx\">nodemailer<\/span><span class=\"p\">.<\/span><span class=\"nx\">createTransport<\/span><span class=\"p\">({<\/span>\n    <span class=\"na\">host<\/span><span class=\"p\">:<\/span> <span class=\"dl\">\"<\/span><span class=\"s2\">smtp.gmail.com<\/span><span class=\"dl\">\"<\/span><span class=\"p\">,<\/span>\n    <span class=\"na\">port<\/span><span class=\"p\">:<\/span> <span class=\"mi\">465<\/span><span class=\"p\">,<\/span>\n    <span class=\"na\">secure<\/span><span class=\"p\">:<\/span> <span class=\"kc\">true<\/span><span class=\"p\">,<\/span>\n    <span class=\"na\">auth<\/span><span class=\"p\">:<\/span> <span class=\"p\">{<\/span>\n        <span class=\"na\">user<\/span><span class=\"p\">:<\/span> <span class=\"nx\">process<\/span><span class=\"p\">.<\/span><span class=\"nx\">env<\/span><span class=\"p\">.<\/span><span class=\"nx\">NEXT_PUBLIC_NODEMAILER_USER<\/span><span class=\"p\">,<\/span>\n        <span class=\"na\">pass<\/span><span class=\"p\">:<\/span> <span class=\"nx\">process<\/span><span class=\"p\">.<\/span><span class=\"nx\">env<\/span><span class=\"p\">.<\/span><span class=\"nx\">NEXT_PUBLIC_NODEMAILER_PASSWORD<\/span><span class=\"p\">,<\/span>\n    <span class=\"p\">},<\/span>\n  <span class=\"p\">});<\/span>\n\n  <span class=\"k\">return<\/span> <span class=\"p\">{<\/span>\n    <span class=\"na\">framework<\/span><span class=\"p\">:<\/span> <span class=\"dl\">\"<\/span><span class=\"s2\">express<\/span><span class=\"dl\">\"<\/span><span class=\"p\">,<\/span>\n    <span class=\"na\">supertokens<\/span><span class=\"p\">:<\/span> <span class=\"p\">{<\/span>\n      <span class=\"na\">connectionURI<\/span><span class=\"p\">:<\/span> <span class=\"dl\">\"<\/span><span class=\"s2\">https:\/\/try.supertokens.com<\/span><span class=\"dl\">\"<\/span><span class=\"p\">,<\/span>\n      <span class=\"c1\">\/\/ apiKey: \"IF YOU HAVE AN API KEY FOR THE CORE, ADD IT HERE\",<\/span>\n    <span class=\"p\">},<\/span>\n    <span class=\"nx\">appInfo<\/span><span class=\"p\">,<\/span>\n    <span class=\"na\">recipeList<\/span><span class=\"p\">:<\/span> <span class=\"p\">[<\/span>\n      <span class=\"nx\">PasswordlessNode<\/span><span class=\"p\">.<\/span><span class=\"nx\">init<\/span><span class=\"p\">({<\/span>\n        <span class=\"na\">flowType<\/span><span class=\"p\">:<\/span> <span class=\"dl\">\"<\/span><span class=\"s2\">USER_INPUT_CODE_AND_MAGIC_LINK<\/span><span class=\"dl\">\"<\/span><span class=\"p\">,<\/span>\n        <span class=\"na\">contactMethod<\/span><span class=\"p\">:<\/span> <span class=\"dl\">\"<\/span><span class=\"s2\">EMAIL_OR_PHONE<\/span><span class=\"dl\">\"<\/span><span class=\"p\">,<\/span>\n        <span class=\"na\">createAndSendCustomEmail<\/span><span class=\"p\">:<\/span> <span class=\"k\">async<\/span> <span class=\"p\">(<\/span><span class=\"nx\">input<\/span><span class=\"p\">,<\/span> <span class=\"nx\">context<\/span><span class=\"p\">)<\/span> <span class=\"o\">=&gt;<\/span> <span class=\"p\">{<\/span>\n          <span class=\"k\">try<\/span><span class=\"p\">{<\/span>\n            <span class=\"kd\">let<\/span> <span class=\"nx\">htmlBody<\/span> <span class=\"o\">=<\/span> <span class=\"nx\">getEmailBody<\/span><span class=\"p\">(<\/span>\n              <span class=\"nx\">appInfo<\/span><span class=\"p\">.<\/span><span class=\"nx\">appName<\/span><span class=\"p\">,<\/span>\n              <span class=\"nb\">Math<\/span><span class=\"p\">.<\/span><span class=\"nx\">ceil<\/span><span class=\"p\">(<\/span><span class=\"nx\">input<\/span><span class=\"p\">.<\/span><span class=\"nx\">codeLifetime<\/span> <span class=\"o\">\/<\/span> <span class=\"mi\">1000<\/span><span class=\"p\">),<\/span>\n              <span class=\"nx\">input<\/span><span class=\"p\">.<\/span><span class=\"nx\">urlWithLinkCode<\/span><span class=\"p\">,<\/span>\n              <span class=\"nx\">input<\/span><span class=\"p\">.<\/span><span class=\"nx\">userInputCode<\/span><span class=\"p\">,<\/span>\n              <span class=\"nx\">input<\/span><span class=\"p\">.<\/span><span class=\"nx\">email<\/span>\n            <span class=\"p\">);<\/span>\n            <span class=\"k\">await<\/span> <span class=\"nx\">mailTransporter<\/span><span class=\"p\">.<\/span><span class=\"nx\">sendMail<\/span><span class=\"p\">({<\/span>\n              <span class=\"na\">html<\/span><span class=\"p\">:<\/span> <span class=\"nx\">htmlBody<\/span><span class=\"p\">,<\/span>\n              <span class=\"na\">to<\/span><span class=\"p\">:<\/span> <span class=\"nx\">input<\/span><span class=\"p\">.<\/span><span class=\"nx\">email<\/span><span class=\"p\">,<\/span>\n              <span class=\"na\">from<\/span><span class=\"p\">:<\/span> <span class=\"s2\">`Team Supertokens &lt;<\/span><span class=\"p\">${<\/span><span class=\"nx\">appInfo<\/span><span class=\"p\">.<\/span><span class=\"nx\">appName<\/span><span class=\"p\">}<\/span><span class=\"s2\">&gt;`<\/span><span class=\"p\">,<\/span>\n              <span class=\"na\">sender<\/span><span class=\"p\">:<\/span> <span class=\"nx\">process<\/span><span class=\"p\">.<\/span><span class=\"nx\">env<\/span><span class=\"p\">.<\/span><span class=\"nx\">NEXT_PUBLIC_NODEMAILER_USER<\/span><span class=\"p\">,<\/span>\n              <span class=\"na\">subject<\/span><span class=\"p\">:<\/span> <span class=\"s2\">`Login to <\/span><span class=\"p\">${<\/span><span class=\"nx\">appInfo<\/span><span class=\"p\">.<\/span><span class=\"nx\">appName<\/span><span class=\"p\">}<\/span><span class=\"s2\">`<\/span><span class=\"p\">,<\/span>\n            <span class=\"p\">});<\/span>\n          <span class=\"p\">}<\/span> <span class=\"k\">catch<\/span> <span class=\"p\">(<\/span><span class=\"nx\">err<\/span><span class=\"p\">)<\/span> <span class=\"p\">{<\/span>\n            <span class=\"nx\">console<\/span><span class=\"p\">.<\/span><span class=\"nx\">log<\/span><span class=\"p\">(<\/span><span class=\"nx\">err<\/span><span class=\"p\">);<\/span>\n          <span class=\"p\">}<\/span>\n        <span class=\"p\">},<\/span>\n        <span class=\"na\">createAndSendCustomTextMessage<\/span><span class=\"p\">:<\/span> <span class=\"k\">async<\/span> <span class=\"p\">(<\/span><span class=\"nx\">input<\/span><span class=\"p\">,<\/span> <span class=\"nx\">context<\/span><span class=\"p\">)<\/span> <span class=\"o\">=&gt;<\/span> <span class=\"p\">{<\/span>\n          <span class=\"c1\">\/\/ Creating a Twilio account and set it up.<\/span>\n        <span class=\"p\">},<\/span>\n      <span class=\"p\">}),<\/span>\n      <span class=\"nx\">SessionNode<\/span><span class=\"p\">.<\/span><span class=\"nx\">init<\/span><span class=\"p\">(),<\/span>\n    <span class=\"p\">],<\/span>\n    <span class=\"na\">isInServerlessEnv<\/span><span class=\"p\">:<\/span> <span class=\"kc\">true<\/span><span class=\"p\">,<\/span>\n  <span class=\"p\">};<\/span>\n<span class=\"p\">};<\/span>\n<\/code><\/pre>\n<div class=\"highlight__panel js-actions-panel\">\n<div class=\"highlight__panel-action js-fullscreen-code-action\">\n    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"><title>Enter fullscreen mode<\/title>\n    <path d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\/>\n<\/svg><\/p>\n<p>    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"><title>Exit fullscreen mode<\/title>\n    <path d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\/>\n<\/svg><\/p>\n<\/div>\n<\/div>\n<\/div>\n<p>We have used the <code>try.supertokens.com<\/code> as the <code>connectionURI<\/code> value above. Please note the URI <em>try.supertokens.com<\/em> is for demo purposes. You need to set up your own core and replace the core address above. <\/p>\n<p>You can set up your own core in two ways,<\/p>\n<ul>\n<li>\n<code>By self-hosting SuperTokens<\/code>: You can self-host the SuperTokens core with your own database(<a href=\"https:\/\/supertokens.com\/docs\/passwordless\/quick-setup\/database-setup\/mysql\">MySQL<\/a> or <a href=\"https:\/\/supertokens.com\/docs\/passwordless\/quick-setup\/database-setup\/postgresql\">PostgreSQL<\/a>). You can sel-host either <a href=\"https:\/\/supertokens.com\/docs\/passwordless\/quick-setup\/core\/without-docker\">manually installing SuperTokens<\/a> or via <a href=\"https:\/\/supertokens.com\/docs\/passwordless\/quick-setup\/core\/with-docker\">docker<\/a>.<\/li>\n<li>\n<code>By using the managed service option<\/code>: To set up SuperTokens core on managed service, please <a href=\"https:\/\/supertokens.com\/auth\">create a free account<\/a> and log in. Next, create a new app from the dashboard. Once done, you will find the connectionURI and the API key from the app details page.<\/li>\n<\/ul>\n<p>Alright, now let&#8217;s talk about the two delivery methods we specified in the code above:<\/p>\n<ul>\n<li>\n<code>createAndSendCustomEmail<\/code>: It is the email-based delivery method that uses the Gmail credentials from the environment variables. Please note we use the <code>getEmailBody()<\/code> method to format the email message. <\/li>\n<\/ul>\n<p>Please create a folder called <code>util<\/code> at the root of the project folder. Now create a file named <code>mailer.js<\/code> that exports the <code>getEmailBody()<\/code> method. <a href=\"https:\/\/github.com\/atapas\/quotes\/blob\/main\/util\/mailer.js#L60\">Here is a sample implementation<\/a> of the mailer.js file. You can copy-paste the entire content.<\/p>\n<ul>\n<li>\n<code>createAndSendCustomTextMessage<\/code>:  It is the SMS-based deliver method. You can create a <a href=\"https:\/\/www.twilio.com\">Twilio<\/a> account and set it up with a few simple steps. You can find an example of it <a href=\"https:\/\/github.com\/supertokens\/supertokens-auth-react\/blob\/2e50d0c5d98dffe45396a7ac7d0a002613a54ffc\/examples\/with-passwordless\/api-server\/index.js#L53\">from here<\/a>. <\/li>\n<\/ul>\n<p>Please find more on the delivery method attributes <a href=\"https:\/\/supertokens.com\/docs\/passwordless\/nextjs\/init#6-set-up-your-delivery-method\">from here<\/a>.<\/p>\n<p>Now we will call the front-end init functions from the <code>_app.js<\/code> file. Please open the <code>_app.js<\/code> file under the <code>pages<\/code> folder and replace the content with the following,<\/p>\n<div class=\"highlight js-code-highlight\">\n<pre class=\"highlight javascript\"><code><span class=\"k\">import<\/span> <span class=\"nx\">React<\/span> <span class=\"k\">from<\/span> <span class=\"dl\">'<\/span><span class=\"s1\">react<\/span><span class=\"dl\">'<\/span>\n<span class=\"k\">import<\/span> <span class=\"nx\">SuperTokensReact<\/span> <span class=\"k\">from<\/span> <span class=\"dl\">'<\/span><span class=\"s1\">supertokens-auth-react<\/span><span class=\"dl\">'<\/span>\n<span class=\"k\">import<\/span> <span class=\"p\">{<\/span> <span class=\"nx\">frontendConfig<\/span> <span class=\"p\">}<\/span> <span class=\"k\">from<\/span> <span class=\"dl\">'<\/span><span class=\"s1\">..\/config\/frontendConfig<\/span><span class=\"dl\">'<\/span>\n<span class=\"k\">import<\/span> <span class=\"dl\">'<\/span><span class=\"s1\">..\/styles\/globals.css<\/span><span class=\"dl\">'<\/span>\n\n\n<span class=\"k\">if<\/span> <span class=\"p\">(<\/span><span class=\"k\">typeof<\/span> <span class=\"nb\">window<\/span> <span class=\"o\">!==<\/span> <span class=\"dl\">'<\/span><span class=\"s1\">undefined<\/span><span class=\"dl\">'<\/span><span class=\"p\">)<\/span> <span class=\"p\">{<\/span>\n  <span class=\"c1\">\/\/ we only want to call this init function on the frontend, so <\/span>\n  <span class=\"c1\">\/\/ we check typeof window !== 'undefined'<\/span>\n  <span class=\"nx\">SuperTokensReact<\/span><span class=\"p\">.<\/span><span class=\"nx\">init<\/span><span class=\"p\">(<\/span><span class=\"nx\">frontendConfig<\/span><span class=\"p\">())<\/span>\n<span class=\"p\">}<\/span>\n\n<span class=\"kd\">function<\/span> <span class=\"nx\">MyApp<\/span><span class=\"p\">({<\/span> <span class=\"nx\">Component<\/span><span class=\"p\">,<\/span> <span class=\"nx\">pageProps<\/span> <span class=\"p\">})<\/span> <span class=\"p\">{<\/span>\n  <span class=\"k\">return<\/span> <span class=\"o\">&lt;<\/span><span class=\"nx\">Component<\/span> <span class=\"p\">{...<\/span><span class=\"nx\">pageProps<\/span><span class=\"p\">}<\/span> <span class=\"sr\">\/<\/span><span class=\"err\">&gt;\n<\/span><span class=\"p\">}<\/span>\n\n<span class=\"k\">export<\/span> <span class=\"k\">default<\/span> <span class=\"nx\">MyApp<\/span>\n<\/code><\/pre>\n<div class=\"highlight__panel js-actions-panel\">\n<div class=\"highlight__panel-action js-fullscreen-code-action\">\n    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"><title>Enter fullscreen mode<\/title>\n    <path d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\/>\n<\/svg><\/p>\n<p>    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"><title>Exit fullscreen mode<\/title>\n    <path d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\/>\n<\/svg><\/p>\n<\/div>\n<\/div>\n<\/div>\n<p>So, now we are done with all the configurations. Let us now show the Login user interface.<\/p>\n<h3>\n  <a name=\"show-the-login-ui\" href=\"#show-the-login-ui\"><br \/>\n  <\/a><br \/>\n  Show the Login UI<br \/>\n<\/h3>\n<p>Please create an <code>auth<\/code> folder inside the <code>pages<\/code> folder. Now create a <code>[[...path]].js<\/code> file inside the <code>auth\/pages<\/code> folder with the following content,<\/p>\n<div class=\"highlight js-code-highlight\">\n<pre class=\"highlight javascript\"><code><span class=\"k\">import<\/span> <span class=\"nx\">dynamic<\/span> <span class=\"k\">from<\/span> <span class=\"dl\">'<\/span><span class=\"s1\">next\/dynamic<\/span><span class=\"dl\">'<\/span>\n<span class=\"k\">import<\/span> <span class=\"nx\">React<\/span><span class=\"p\">,<\/span> <span class=\"p\">{<\/span> <span class=\"nx\">useEffect<\/span> <span class=\"p\">}<\/span> <span class=\"k\">from<\/span> <span class=\"dl\">'<\/span><span class=\"s1\">react<\/span><span class=\"dl\">'<\/span>\n<span class=\"k\">import<\/span> <span class=\"nx\">SuperTokens<\/span> <span class=\"k\">from<\/span> <span class=\"dl\">'<\/span><span class=\"s1\">supertokens-auth-react<\/span><span class=\"dl\">'<\/span>\n<span class=\"k\">import<\/span> <span class=\"p\">{<\/span> <span class=\"nx\">redirectToAuth<\/span> <span class=\"p\">}<\/span> <span class=\"k\">from<\/span> <span class=\"dl\">'<\/span><span class=\"s1\">supertokens-auth-react\/recipe\/passwordless<\/span><span class=\"dl\">'<\/span>\n\n<span class=\"kd\">const<\/span> <span class=\"nx\">SuperTokensComponentNoSSR<\/span> <span class=\"o\">=<\/span> <span class=\"nx\">dynamic<\/span><span class=\"p\">(<\/span>\n  <span class=\"k\">new<\/span> <span class=\"nb\">Promise<\/span><span class=\"p\">((<\/span><span class=\"nx\">res<\/span><span class=\"p\">)<\/span> <span class=\"o\">=&gt;<\/span> <span class=\"nx\">res<\/span><span class=\"p\">(<\/span><span class=\"nx\">SuperTokens<\/span><span class=\"p\">.<\/span><span class=\"nx\">getRoutingComponent<\/span><span class=\"p\">)),<\/span>\n  <span class=\"p\">{<\/span> <span class=\"na\">ssr<\/span><span class=\"p\">:<\/span> <span class=\"kc\">false<\/span> <span class=\"p\">}<\/span>\n<span class=\"p\">)<\/span>\n\n<span class=\"k\">export<\/span> <span class=\"k\">default<\/span> <span class=\"kd\">function<\/span> <span class=\"nx\">Auth<\/span><span class=\"p\">()<\/span> <span class=\"p\">{<\/span>\n\n  <span class=\"c1\">\/\/ if the user visits a page that is not handled by us (like \/auth\/random), <\/span>\n  <span class=\"c1\">\/\/ then we redirect them back to the auth page.<\/span>\n  <span class=\"nx\">useEffect<\/span><span class=\"p\">(()<\/span> <span class=\"o\">=&gt;<\/span> <span class=\"p\">{<\/span>\n    <span class=\"k\">if<\/span> <span class=\"p\">(<\/span><span class=\"nx\">SuperTokens<\/span><span class=\"p\">.<\/span><span class=\"nx\">canHandleRoute<\/span><span class=\"p\">()<\/span> <span class=\"o\">===<\/span> <span class=\"kc\">false<\/span><span class=\"p\">)<\/span> <span class=\"p\">{<\/span>\n      <span class=\"nx\">redirectToAuth<\/span><span class=\"p\">()<\/span>\n    <span class=\"p\">}<\/span>\n  <span class=\"p\">},<\/span> <span class=\"p\">[])<\/span>\n\n  <span class=\"k\">return<\/span> <span class=\"p\">(<\/span>\n      <span class=\"o\">&lt;<\/span><span class=\"nx\">SuperTokensComponentNoSSR<\/span> <span class=\"o\">\/&gt;<\/span>\n  <span class=\"p\">)<\/span>\n<span class=\"p\">}<\/span>\n<\/code><\/pre>\n<div class=\"highlight__panel js-actions-panel\">\n<div class=\"highlight__panel-action js-fullscreen-code-action\">\n    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"><title>Enter fullscreen mode<\/title>\n    <path d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\/>\n<\/svg><\/p>\n<p>    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"><title>Exit fullscreen mode<\/title>\n    <path d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\/>\n<\/svg><\/p>\n<\/div>\n<\/div>\n<\/div>\n<p>It is our Auth component. Alright, let us test it out. Open a browser tab and access the app&#8217;s <code>\/auth<\/code> URL, <a href=\"http:\/\/localhost:3000\/auth\">http:\/\/localhost:3000\/auth<\/a>. At this stage, you should see the Login user interface.<\/p>\n<p><a href=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--uWFcA-ly--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/cdn.hashnode.com\/res\/hashnode\/image\/upload\/v1646725997760\/J5J3Zt6Fv.png%3Fborder%3D1%2CCCCCCC\" class=\"article-body-image-wrapper\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--uWFcA-ly--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/cdn.hashnode.com\/res\/hashnode\/image\/upload\/v1646725997760\/J5J3Zt6Fv.png%3Fborder%3D1%2CCCCCCC\" alt=\"Auth Login\" loading=\"lazy\" width=\"658\" height=\"502\"\/><\/a><\/p>\n<p>The main app page(localhost:3000) and the quotes API(localhost:3000\/api\/quotes) are still not protected with the Auth. Let&#8217;s do them one by one.<\/p>\n<h3>\n  <a name=\"add-auth-apis\" href=\"#add-auth-apis\"><br \/>\n  <\/a><br \/>\n  Add Auth APIs<br \/>\n<\/h3>\n<p>Now we will add all the backend APIs for auth on <code>\/api\/auth<\/code>. Please create the <code>auth<\/code> folder in the <code>pages\/api\/<\/code> folder. Now create a file <code>[[...path]].js<\/code> with the following content,<\/p>\n<div class=\"highlight js-code-highlight\">\n<pre class=\"highlight javascript\"><code><span class=\"nx\">require<\/span><span class=\"p\">(<\/span><span class=\"dl\">\"<\/span><span class=\"s2\">dotenv<\/span><span class=\"dl\">\"<\/span><span class=\"p\">).<\/span><span class=\"nx\">config<\/span><span class=\"p\">();<\/span>\n<span class=\"k\">import<\/span> <span class=\"nx\">supertokens<\/span> <span class=\"k\">from<\/span> <span class=\"dl\">'<\/span><span class=\"s1\">supertokens-node<\/span><span class=\"dl\">'<\/span><span class=\"p\">;<\/span>\n<span class=\"k\">import<\/span> <span class=\"p\">{<\/span> <span class=\"nx\">middleware<\/span> <span class=\"p\">}<\/span> <span class=\"k\">from<\/span> <span class=\"dl\">'<\/span><span class=\"s1\">supertokens-node\/framework\/express<\/span><span class=\"dl\">'<\/span><span class=\"p\">;<\/span>\n<span class=\"k\">import<\/span> <span class=\"p\">{<\/span> <span class=\"nx\">superTokensNextWrapper<\/span> <span class=\"p\">}<\/span> <span class=\"k\">from<\/span> <span class=\"dl\">'<\/span><span class=\"s1\">supertokens-node\/nextjs<\/span><span class=\"dl\">'<\/span><span class=\"p\">;<\/span>\n<span class=\"k\">import<\/span> <span class=\"p\">{<\/span> <span class=\"nx\">backendConfig<\/span> <span class=\"p\">}<\/span> <span class=\"k\">from<\/span> <span class=\"dl\">'<\/span><span class=\"s1\">..\/..\/..\/config\/backendConfig<\/span><span class=\"dl\">'<\/span><span class=\"p\">;<\/span>\n\n<span class=\"nx\">supertokens<\/span><span class=\"p\">.<\/span><span class=\"nx\">init<\/span><span class=\"p\">(<\/span><span class=\"nx\">backendConfig<\/span><span class=\"p\">())<\/span>\n\n<span class=\"k\">export<\/span> <span class=\"k\">default<\/span> <span class=\"k\">async<\/span> <span class=\"kd\">function<\/span> <span class=\"nx\">superTokens<\/span><span class=\"p\">(<\/span><span class=\"nx\">req<\/span><span class=\"p\">,<\/span> <span class=\"nx\">res<\/span><span class=\"p\">)<\/span> <span class=\"p\">{<\/span>\n\n  <span class=\"k\">await<\/span> <span class=\"nx\">superTokensNextWrapper<\/span><span class=\"p\">(<\/span>\n    <span class=\"k\">async<\/span> <span class=\"p\">(<\/span><span class=\"nx\">next<\/span><span class=\"p\">)<\/span> <span class=\"o\">=&gt;<\/span> <span class=\"p\">{<\/span>\n      <span class=\"k\">await<\/span> <span class=\"nx\">middleware<\/span><span class=\"p\">()(<\/span><span class=\"nx\">req<\/span><span class=\"p\">,<\/span> <span class=\"nx\">res<\/span><span class=\"p\">,<\/span> <span class=\"nx\">next<\/span><span class=\"p\">)<\/span>\n    <span class=\"p\">},<\/span>\n    <span class=\"nx\">req<\/span><span class=\"p\">,<\/span>\n    <span class=\"nx\">res<\/span>\n  <span class=\"p\">)<\/span>\n  <span class=\"k\">if<\/span> <span class=\"p\">(<\/span><span class=\"o\">!<\/span><span class=\"nx\">res<\/span><span class=\"p\">.<\/span><span class=\"nx\">writableEnded<\/span><span class=\"p\">)<\/span> <span class=\"p\">{<\/span>\n    <span class=\"nx\">res<\/span><span class=\"p\">.<\/span><span class=\"nx\">status<\/span><span class=\"p\">(<\/span><span class=\"mi\">404<\/span><span class=\"p\">).<\/span><span class=\"nx\">send<\/span><span class=\"p\">(<\/span><span class=\"dl\">'<\/span><span class=\"s1\">Not found<\/span><span class=\"dl\">'<\/span><span class=\"p\">)<\/span>\n  <span class=\"p\">}<\/span>\n<span class=\"p\">}<\/span>\n<\/code><\/pre>\n<div class=\"highlight__panel js-actions-panel\">\n<div class=\"highlight__panel-action js-fullscreen-code-action\">\n    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"><title>Enter fullscreen mode<\/title>\n    <path d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\/>\n<\/svg><\/p>\n<p>    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"><title>Exit fullscreen mode<\/title>\n    <path d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\/>\n<\/svg><\/p>\n<\/div>\n<\/div>\n<\/div>\n<p>The <code>[[...path]].js<\/code> file uses the middleware exposed by <code>supertokens-node<\/code>, which exposes all the APIs like sign in, sign up etc.<\/p>\n<p>Now update the <code>quotes<\/code> API to have only authorized access. Please update the content of the <code>quotes.js<\/code> file with the following content,<\/p>\n<div class=\"highlight js-code-highlight\">\n<pre class=\"highlight javascript\"><code><span class=\"k\">import<\/span> <span class=\"nx\">supertokens<\/span> <span class=\"k\">from<\/span> <span class=\"dl\">'<\/span><span class=\"s1\">supertokens-node<\/span><span class=\"dl\">'<\/span><span class=\"p\">;<\/span>\n<span class=\"k\">import<\/span> <span class=\"p\">{<\/span> <span class=\"nx\">superTokensNextWrapper<\/span> <span class=\"p\">}<\/span> <span class=\"k\">from<\/span> <span class=\"dl\">'<\/span><span class=\"s1\">supertokens-node\/nextjs<\/span><span class=\"dl\">'<\/span><span class=\"p\">;<\/span>\n<span class=\"k\">import<\/span> <span class=\"p\">{<\/span> <span class=\"nx\">verifySession<\/span> <span class=\"p\">}<\/span> <span class=\"k\">from<\/span> <span class=\"dl\">'<\/span><span class=\"s1\">supertokens-node\/recipe\/session\/framework\/express<\/span><span class=\"dl\">'<\/span><span class=\"p\">;<\/span>\n<span class=\"k\">import<\/span> <span class=\"p\">{<\/span> <span class=\"nx\">backendConfig<\/span> <span class=\"p\">}<\/span> <span class=\"k\">from<\/span> <span class=\"dl\">'<\/span><span class=\"s1\">..\/..\/config\/backendConfig<\/span><span class=\"dl\">'<\/span><span class=\"p\">;<\/span>\n<span class=\"k\">import<\/span> <span class=\"nx\">quoteList<\/span> <span class=\"k\">from<\/span> <span class=\"dl\">'<\/span><span class=\"s1\">..\/..\/data\/quotes.json<\/span><span class=\"dl\">'<\/span><span class=\"p\">;<\/span>\n\n<span class=\"nx\">supertokens<\/span><span class=\"p\">.<\/span><span class=\"nx\">init<\/span><span class=\"p\">(<\/span><span class=\"nx\">backendConfig<\/span><span class=\"p\">())<\/span>\n\n<span class=\"k\">export<\/span> <span class=\"k\">default<\/span> <span class=\"k\">async<\/span> <span class=\"kd\">function<\/span> <span class=\"nx\">quotes<\/span><span class=\"p\">(<\/span><span class=\"nx\">req<\/span><span class=\"p\">,<\/span> <span class=\"nx\">res<\/span><span class=\"p\">)<\/span> <span class=\"p\">{<\/span>\n  <span class=\"k\">await<\/span> <span class=\"nx\">superTokensNextWrapper<\/span><span class=\"p\">(<\/span>\n    <span class=\"k\">async<\/span> <span class=\"p\">(<\/span><span class=\"nx\">next<\/span><span class=\"p\">)<\/span> <span class=\"o\">=&gt;<\/span> <span class=\"p\">{<\/span>\n      <span class=\"k\">return<\/span> <span class=\"k\">await<\/span> <span class=\"nx\">verifySession<\/span><span class=\"p\">()(<\/span><span class=\"nx\">req<\/span><span class=\"p\">,<\/span> <span class=\"nx\">res<\/span><span class=\"p\">,<\/span> <span class=\"nx\">next<\/span><span class=\"p\">)<\/span>\n    <span class=\"p\">},<\/span>\n    <span class=\"nx\">req<\/span><span class=\"p\">,<\/span>\n    <span class=\"nx\">res<\/span>\n  <span class=\"p\">)<\/span>\n\n  <span class=\"k\">return<\/span> <span class=\"nx\">res<\/span><span class=\"p\">.<\/span><span class=\"nx\">json<\/span><span class=\"p\">(<\/span><span class=\"nx\">quoteList<\/span><span class=\"p\">.<\/span><span class=\"nx\">quotes<\/span><span class=\"p\">)<\/span>\n<span class=\"p\">}<\/span>\n<\/code><\/pre>\n<div class=\"highlight__panel js-actions-panel\">\n<div class=\"highlight__panel-action js-fullscreen-code-action\">\n    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"><title>Enter fullscreen mode<\/title>\n    <path d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\/>\n<\/svg><\/p>\n<p>    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"><title>Exit fullscreen mode<\/title>\n    <path d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\/>\n<\/svg><\/p>\n<\/div>\n<\/div>\n<\/div>\n<p>Now access the quotes API, <a href=\"http:\/\/localhost:3000\/api\/quotes\">http:\/\/localhost:3000\/api\/quotes<\/a>. You will see the unauthorized error.<\/p>\n<p><a href=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--TV72inOE--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/cdn.hashnode.com\/res\/hashnode\/image\/upload\/v1645950919794\/XBMkE3ID2.png%3Fborder%3D1%2CCCCCCC%26auto%3Dcompress\" class=\"article-body-image-wrapper\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--TV72inOE--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/cdn.hashnode.com\/res\/hashnode\/image\/upload\/v1645950919794\/XBMkE3ID2.png%3Fborder%3D1%2CCCCCCC%26auto%3Dcompress\" alt=\"Unauthorized Error\" loading=\"lazy\" width=\"437\" height=\"211\"\/><\/a><\/p>\n<p>Don&#8217;t worry. We will fix the entire workflow now.<\/p>\n<h3>\n  <a name=\"protect-routes\" href=\"#protect-routes\"><br \/>\n  <\/a><br \/>\n  Protect Routes<br \/>\n<\/h3>\n<p>So to make everything work, let us protect the routes. Please open the <code>index.js<\/code> file under the <code>pages<\/code> folder and replace the content with the following content,<\/p>\n<div class=\"highlight js-code-highlight\">\n<pre class=\"highlight javascript\"><code><span class=\"k\">import<\/span> <span class=\"nx\">dynamic<\/span> <span class=\"k\">from<\/span> <span class=\"dl\">'<\/span><span class=\"s1\">next\/dynamic<\/span><span class=\"dl\">'<\/span><span class=\"p\">;<\/span>\n<span class=\"k\">import<\/span> <span class=\"nx\">Head<\/span> <span class=\"k\">from<\/span> <span class=\"dl\">'<\/span><span class=\"s1\">next\/head<\/span><span class=\"dl\">'<\/span><span class=\"p\">;<\/span>\n<span class=\"k\">import<\/span> <span class=\"nx\">React<\/span> <span class=\"k\">from<\/span> <span class=\"dl\">'<\/span><span class=\"s1\">react<\/span><span class=\"dl\">'<\/span><span class=\"p\">;<\/span>\n<span class=\"k\">import<\/span> <span class=\"nx\">Passwordless<\/span> <span class=\"k\">from<\/span> <span class=\"dl\">\"<\/span><span class=\"s2\">supertokens-auth-react\/recipe\/passwordless<\/span><span class=\"dl\">\"<\/span><span class=\"p\">;<\/span>\n<span class=\"k\">import<\/span> <span class=\"nx\">supertokensNode<\/span> <span class=\"k\">from<\/span> <span class=\"dl\">'<\/span><span class=\"s1\">supertokens-node<\/span><span class=\"dl\">'<\/span><span class=\"p\">;<\/span>\n<span class=\"k\">import<\/span> <span class=\"nx\">Session<\/span> <span class=\"k\">from<\/span> <span class=\"dl\">'<\/span><span class=\"s1\">supertokens-node\/recipe\/session<\/span><span class=\"dl\">'<\/span><span class=\"p\">;<\/span>\n<span class=\"k\">import<\/span> <span class=\"nx\">Footer<\/span> <span class=\"k\">from<\/span> <span class=\"dl\">'<\/span><span class=\"s1\">..\/components\/Footer<\/span><span class=\"dl\">'<\/span><span class=\"p\">;<\/span>\n<span class=\"k\">import<\/span> <span class=\"nx\">Header<\/span> <span class=\"k\">from<\/span> <span class=\"dl\">'<\/span><span class=\"s1\">..\/components\/Header<\/span><span class=\"dl\">'<\/span><span class=\"p\">;<\/span>\n<span class=\"k\">import<\/span> <span class=\"nx\">QuoteList<\/span> <span class=\"k\">from<\/span> <span class=\"dl\">'<\/span><span class=\"s1\">..\/components\/QuoteList<\/span><span class=\"dl\">'<\/span><span class=\"p\">;<\/span>\n<span class=\"k\">import<\/span> <span class=\"nx\">styles<\/span> <span class=\"k\">from<\/span> <span class=\"dl\">'<\/span><span class=\"s1\">..\/styles\/Home.module.css<\/span><span class=\"dl\">'<\/span><span class=\"p\">;<\/span>\n\n<span class=\"kd\">const<\/span> <span class=\"nx\">PasswordlessAuthNoSSR<\/span> <span class=\"o\">=<\/span> <span class=\"nx\">dynamic<\/span><span class=\"p\">(<\/span>\n  <span class=\"k\">new<\/span> <span class=\"nb\">Promise<\/span><span class=\"p\">((<\/span><span class=\"nx\">res<\/span><span class=\"p\">)<\/span> <span class=\"o\">=&gt;<\/span>\n    <span class=\"nx\">res<\/span><span class=\"p\">(<\/span><span class=\"nx\">Passwordless<\/span><span class=\"p\">.<\/span><span class=\"nx\">PasswordlessAuth<\/span><span class=\"p\">)<\/span>\n  <span class=\"p\">),<\/span>\n  <span class=\"p\">{<\/span> <span class=\"na\">ssr<\/span><span class=\"p\">:<\/span> <span class=\"kc\">false<\/span> <span class=\"p\">}<\/span>\n<span class=\"p\">)<\/span>\n\n<span class=\"k\">export<\/span> <span class=\"k\">default<\/span> <span class=\"kd\">function<\/span> <span class=\"nx\">Home<\/span><span class=\"p\">(<\/span><span class=\"nx\">props<\/span><span class=\"p\">)<\/span> <span class=\"p\">{<\/span>\n  <span class=\"k\">return<\/span> <span class=\"p\">(<\/span>\n    <span class=\"o\">&lt;<\/span><span class=\"nx\">PasswordlessAuthNoSSR<\/span><span class=\"o\">&gt;<\/span>\n      <span class=\"o\">&lt;<\/span><span class=\"nx\">ProtectedPage<\/span> <span class=\"o\">\/&gt;<\/span>\n    <span class=\"o\">&lt;<\/span><span class=\"sr\">\/PasswordlessAuthNoSSR<\/span><span class=\"err\">&gt;\n<\/span>  <span class=\"p\">)<\/span>\n<span class=\"p\">}<\/span>\n\n<span class=\"kd\">function<\/span> <span class=\"nx\">ProtectedPage<\/span><span class=\"p\">({<\/span> <span class=\"nx\">userId<\/span> <span class=\"p\">})<\/span> <span class=\"p\">{<\/span>\n  <span class=\"k\">async<\/span> <span class=\"kd\">function<\/span> <span class=\"nx\">logoutClicked<\/span><span class=\"p\">()<\/span> <span class=\"p\">{<\/span>\n    <span class=\"k\">await<\/span> <span class=\"nx\">Passwordless<\/span><span class=\"p\">.<\/span><span class=\"nx\">signOut<\/span><span class=\"p\">()<\/span>\n    <span class=\"nx\">Passwordless<\/span><span class=\"p\">.<\/span><span class=\"nx\">redirectToAuth<\/span><span class=\"p\">()<\/span>\n  <span class=\"p\">}<\/span>\n\n  <span class=\"k\">return<\/span> <span class=\"p\">(<\/span>\n    <span class=\"o\">&lt;<\/span><span class=\"nx\">div<\/span> <span class=\"nx\">className<\/span><span class=\"o\">=<\/span><span class=\"p\">{<\/span><span class=\"nx\">styles<\/span><span class=\"p\">.<\/span><span class=\"nx\">container<\/span><span class=\"p\">}<\/span><span class=\"o\">&gt;<\/span>\n      <span class=\"o\">&lt;<\/span><span class=\"nx\">Head<\/span><span class=\"o\">&gt;<\/span>\n        <span class=\"o\">&lt;<\/span><span class=\"nx\">title<\/span><span class=\"o\">&gt;<\/span><span class=\"nx\">Retell<\/span><span class=\"o\">&lt;<\/span><span class=\"sr\">\/title<\/span><span class=\"err\">&gt;\n<\/span>        <span class=\"o\">&lt;<\/span><span class=\"nx\">link<\/span> <span class=\"nx\">rel<\/span><span class=\"o\">=<\/span><span class=\"dl\">\"<\/span><span class=\"s2\">icon<\/span><span class=\"dl\">\"<\/span> <span class=\"nx\">href<\/span><span class=\"o\">=<\/span><span class=\"dl\">\"<\/span><span class=\"s2\">\/favicon.ico<\/span><span class=\"dl\">\"<\/span> <span class=\"o\">\/&gt;<\/span>\n      <span class=\"o\">&lt;<\/span><span class=\"sr\">\/Head<\/span><span class=\"err\">&gt;\n<\/span>      <span class=\"o\">&lt;<\/span><span class=\"nx\">Header<\/span> <span class=\"o\">\/&gt;<\/span>\n      <span class=\"o\">&lt;<\/span><span class=\"nx\">main<\/span> <span class=\"nx\">className<\/span><span class=\"o\">=<\/span><span class=\"p\">{<\/span><span class=\"nx\">styles<\/span><span class=\"p\">.<\/span><span class=\"nx\">main<\/span><span class=\"p\">}<\/span><span class=\"o\">&gt;<\/span>\n        <span class=\"o\">&lt;<\/span><span class=\"nx\">QuoteList<\/span> <span class=\"o\">\/&gt;<\/span>\n      <span class=\"o\">&lt;<\/span><span class=\"sr\">\/main<\/span><span class=\"err\">&gt;\n<\/span>      <span class=\"o\">&lt;<\/span><span class=\"nx\">Footer<\/span> <span class=\"o\">\/&gt;<\/span>\n    <span class=\"o\">&lt;<\/span><span class=\"sr\">\/div<\/span><span class=\"err\">&gt;\n<\/span>  <span class=\"p\">)<\/span>\n<span class=\"p\">}<\/span>\n<\/code><\/pre>\n<div class=\"highlight__panel js-actions-panel\">\n<div class=\"highlight__panel-action js-fullscreen-code-action\">\n    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"><title>Enter fullscreen mode<\/title>\n    <path d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\/>\n<\/svg><\/p>\n<p>    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"><title>Exit fullscreen mode<\/title>\n    <path d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\/>\n<\/svg><\/p>\n<\/div>\n<\/div>\n<\/div>\n<p>That&#8217;s it. You access the app or the quotes API, and the login page protects both. You must provide your phone number or email id to get the OTP and authorize yourself before accessing the quotes.<\/p>\n<h2>\n  <a name=\"a-task-for-you\" href=\"#a-task-for-you\"><br \/>\n  <\/a><br \/>\n  A Task For You<br \/>\n<\/h2>\n<p>Alright, a small task for you. Can you implement the logout functionality? In the <code>index.js<\/code> page, you have a function called <code>logoutClicked()<\/code>. How about invoking the method when someone clicks on the <code>Sign Out<\/code> link in the header? Please give it a try!<\/p>\n<p>Once again, the entire source code is available here on my GitHub: <a href=\"https:\/\/github.com\/atapas\/quotes\">https:\/\/github.com\/atapas\/quotes<\/a>. If you face any issues following this article or errors in implementing the workflow, please reach out to SuperTokens on <a href=\"https:\/\/supertokens.com\/discord\">Discord<\/a>.<\/p>\n<h2>\n  <a name=\"before-we-end\" href=\"#before-we-end\"><br \/>\n  <\/a><br \/>\n  Before We End&#8230;<br \/>\n<\/h2>\n<p>That&#8217;s all for now. I hope you found this article insightful. <\/p>\n<p>I share my knowledge on,<\/p>\n<ul>\n<li>\ud83c\udf10 Web Development(JavaScript, ReactJS, Next.js, Node.js, so on&#8230;)<\/li>\n<li>\ud83d\udee1\ufe0f  Web Security<\/li>\n<li>\ud83d\udcbc Career Development<\/li>\n<li>\ud83c\udf31 Opensource<\/li>\n<li>\u270d\ufe0f Content Creation <\/li>\n<\/ul>\n<p>Let&#8217;s connect,<\/p>\n<\/p><\/div>\n\n","protected":false},"excerpt":{"rendered":"<p>A Quick Introduction Authentication is the mechanism to validate a user&#8217;s identity for an application. Authenticating a user with userId and password is the most common mechanism we use in many applications. However, there are other famous approaches to it. We can authenticate users using social logins, one-time passwords (OTP), or a magic link that &hellip;<\/p>\n<p class=\"read-more\"> <a class=\"\" href=\"http:\/\/localhost\/wordpress\/integrate-supertokens-passwordless-authentication-with-next-js\/\"> <span class=\"screen-reader-text\">Integrate SuperTokens Passwordless Authentication with Next.js<\/span> Read More &raquo;<\/a><\/p>\n","protected":false},"author":1,"featured_media":1040,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"site-sidebar-layout":"default","site-content-layout":"default","ast-main-header-display":"","ast-hfb-above-header-display":"","ast-hfb-below-header-display":"","ast-hfb-mobile-header-display":"","site-post-title":"","ast-breadcrumbs-content":"","ast-featured-img":"","footer-sml-layout":"","theme-transparent-header-meta":"","adv-header-id-meta":"","stick-header-meta":"","header-above-stick-meta":"","header-main-stick-meta":"","header-below-stick-meta":""},"categories":[1],"tags":[],"_links":{"self":[{"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/posts\/1039"}],"collection":[{"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/comments?post=1039"}],"version-history":[{"count":0,"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/posts\/1039\/revisions"}],"wp:featuredmedia":[{"embeddable":true,"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/media\/1040"}],"wp:attachment":[{"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/media?parent=1039"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/categories?post=1039"},{"taxonomy":"post_tag","embeddable":true,"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/tags?post=1039"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}