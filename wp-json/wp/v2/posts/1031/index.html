{"id":1031,"date":"2022-03-09T13:43:40","date_gmt":"2022-03-09T13:43:40","guid":{"rendered":"http:\/\/localhost\/wordpress\/building-node-js-video-streaming-in-5-minutes\/"},"modified":"2022-03-09T13:43:40","modified_gmt":"2022-03-09T13:43:40","slug":"building-node-js-video-streaming-in-5-minutes","status":"publish","type":"post","link":"http:\/\/localhost\/wordpress\/building-node-js-video-streaming-in-5-minutes\/","title":{"rendered":"building Node.js video streaming in 5 minutes"},"content":{"rendered":"<p> <br \/>\n<\/p>\n<div data-article-id=\"1006714\" id=\"article-body\">\n<p>hi folks, in this blog we will build a Node.js video streaming application in like 10 minutes.<\/p>\n<p><a href=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--atEQ2LBc--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/y5q6x7div0uqhpxnblqz.gif\" class=\"article-body-image-wrapper\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--atEQ2LBc--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/uploads\/articles\/y5q6x7div0uqhpxnblqz.gif\" alt=\"Image description\" loading=\"lazy\" width=\"748\" height=\"417\" data-animated=\"true\"\/><\/a><\/p>\n<h3>\n  <a name=\"prerequisite\" href=\"#prerequisite\"><br \/>\n  <\/a><br \/>\n  prerequisite<br \/>\n<\/h3>\n<ul>\n<li>install Node.js in your computer<\/li>\n<\/ul>\n<h2>\n  <a name=\"what-is-streaming\" href=\"#what-is-streaming\"><br \/>\n  <\/a><br \/>\n  what is streaming<br \/>\n<\/h2>\n<p>Streams are collections of data \u2014 just like arrays or strings. The difference is that streams might not be available all at once, and they don\u2019t have to fit in memory. This makes streams really powerful when working with large amounts of data, or data that\u2019s coming from an external source one chunk at a time.<\/p>\n<h2>\n  <a name=\"setup-1-geting-started\" href=\"#setup-1-geting-started\"><br \/>\n  <\/a><br \/>\n  setup [ 1 ] &#8211; Geting started<br \/>\n<\/h2>\n<p>1 &#8211; create folder and name it <code>vido-streaming<\/code><br \/>2 &#8211; initialize npm in your project <code>npm init -y<\/code><br \/>3 &#8211; install this packages<\/p>\n<p>dependencies.<\/p>\n<div class=\"highlight js-code-highlight\">\n<pre class=\"highlight plaintext\"><code>#### npm install express\n<\/code><\/pre>\n<div class=\"highlight__panel js-actions-panel\">\n<div class=\"highlight__panel-action js-fullscreen-code-action\">\n    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"><title>Enter fullscreen mode<\/title>\n    <path d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\/>\n<\/svg><\/p>\n<p>    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"><title>Exit fullscreen mode<\/title>\n    <path d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\/>\n<\/svg><\/p>\n<\/div>\n<\/div>\n<\/div>\n<h4>\n  <a name=\"development-dependencies\" href=\"#development-dependencies\"><br \/>\n  <\/a><br \/>\n  development dependencies.<br \/>\n<\/h4>\n<div class=\"highlight js-code-highlight\">\n<pre class=\"highlight plaintext\"><code>npm install -D nodemon\n<\/code><\/pre>\n<div class=\"highlight__panel js-actions-panel\">\n<div class=\"highlight__panel-action js-fullscreen-code-action\">\n    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"><title>Enter fullscreen mode<\/title>\n    <path d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\/>\n<\/svg><\/p>\n<p>    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"><title>Exit fullscreen mode<\/title>\n    <path d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\/>\n<\/svg><\/p>\n<\/div>\n<\/div>\n<\/div>\n<h4>\n  <a name=\"add-this-script-to-your-raw-packagejson-endraw-file\" href=\"#add-this-script-to-your-raw-packagejson-endraw-file\"><br \/>\n  <\/a><br \/>\n  add this script to your <code>package.json<\/code> file.<br \/>\n<\/h4>\n<div class=\"highlight js-code-highlight\">\n<pre class=\"highlight json\"><code><span class=\"nl\">\"start\"<\/span><span class=\"p\">:<\/span><span class=\"w\"> <\/span><span class=\"s2\">\"nodemon index.js\"<\/span><span class=\"w\">\n<\/span><\/code><\/pre>\n<div class=\"highlight__panel js-actions-panel\">\n<div class=\"highlight__panel-action js-fullscreen-code-action\">\n    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"><title>Enter fullscreen mode<\/title>\n    <path d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\/>\n<\/svg><\/p>\n<p>    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"><title>Exit fullscreen mode<\/title>\n    <path d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\/>\n<\/svg><\/p>\n<\/div>\n<\/div>\n<\/div>\n<h2>\n  <a name=\"setup-2-setup-nodejs-server\" href=\"#setup-2-setup-nodejs-server\"><br \/>\n  <\/a><br \/>\n  setup [2]  &#8211; setup Node.js server<br \/>\n<\/h2>\n<p>1 &#8211; create <code>index.js<\/code> file in your project root.<br \/>2 &#8211; add this code below<\/p>\n<div class=\"highlight js-code-highlight\">\n<pre class=\"highlight javascript\"><code><span class=\"kd\">const<\/span> <span class=\"nx\">express<\/span> <span class=\"o\">=<\/span> <span class=\"nx\">require<\/span><span class=\"p\">(<\/span><span class=\"dl\">\"<\/span><span class=\"s2\">express<\/span><span class=\"dl\">\"<\/span><span class=\"p\">);<\/span>\n\n<span class=\"kd\">const<\/span> <span class=\"nx\">app<\/span> <span class=\"o\">=<\/span> <span class=\"nx\">express<\/span><span class=\"p\">();<\/span> <span class=\"c1\">\/\/ setup express application<\/span>\n<span class=\"kd\">const<\/span> <span class=\"nx\">PORT<\/span> <span class=\"o\">=<\/span> <span class=\"nx\">process<\/span><span class=\"p\">.<\/span><span class=\"nx\">env<\/span><span class=\"p\">.<\/span><span class=\"nx\">PORT<\/span> <span class=\"o\">||<\/span> <span class=\"mi\">3000<\/span><span class=\"p\">;<\/span>\n\n<span class=\"nx\">app<\/span><span class=\"p\">.<\/span><span class=\"nx\">listen<\/span><span class=\"p\">(<\/span><span class=\"nx\">PORT<\/span><span class=\"p\">,<\/span> <span class=\"p\">()<\/span> <span class=\"o\">=&gt;<\/span> <span class=\"p\">{<\/span>\n  <span class=\"nx\">console<\/span><span class=\"p\">.<\/span><span class=\"nx\">log<\/span><span class=\"p\">(<\/span><span class=\"dl\">\"<\/span><span class=\"s2\">SERVER STARTED AT PORT: <\/span><span class=\"dl\">\"<\/span> <span class=\"o\">+<\/span> <span class=\"nx\">PORT<\/span><span class=\"p\">);<\/span>\n<span class=\"p\">});<\/span>\n<\/code><\/pre>\n<div class=\"highlight__panel js-actions-panel\">\n<div class=\"highlight__panel-action js-fullscreen-code-action\">\n    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"><title>Enter fullscreen mode<\/title>\n    <path d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\/>\n<\/svg><\/p>\n<p>    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"><title>Exit fullscreen mode<\/title>\n    <path d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\/>\n<\/svg><\/p>\n<\/div>\n<\/div>\n<\/div>\n<p>this code starting web server using <code>express<\/code> framework and listening to port: <code>3000<\/code>.<\/p>\n<h2>\n  <a name=\"setup-3-serving-html-page\" href=\"#setup-3-serving-html-page\"><br \/>\n  <\/a><br \/>\n  setup [3] &#8211; serving html page<br \/>\n<\/h2>\n<p>now we want to serve an html page with video element to the Frontend.<\/p>\n<p>1 &#8211; create <code>public<\/code> folder in your project root.<br \/>2 &#8211; create <code>index.html<\/code> file in created folder (<code>public<\/code>) and add this html code.<\/p>\n<div class=\"highlight js-code-highlight\">\n<pre class=\"highlight html\"><code>\n<span class=\"nt\">&lt;html<\/span> <span class=\"na\">lang=<\/span><span class=\"s\">\"en\"<\/span><span class=\"nt\">&gt;<\/span>\n  <span class=\"nt\">&lt;head&gt;<\/span>\n    <span class=\"nt\">&lt;meta<\/span> <span class=\"na\">charset=<\/span><span class=\"s\">\"UTF-8\"<\/span> <span class=\"nt\">\/&gt;<\/span>\n    <span class=\"nt\">&lt;meta<\/span> <span class=\"na\">http-equiv=<\/span><span class=\"s\">\"X-UA-Compatible\"<\/span> <span class=\"na\">content=<\/span><span class=\"s\">\"IE=edge\"<\/span> <span class=\"nt\">\/&gt;<\/span>\n    <span class=\"nt\">&lt;meta<\/span> <span class=\"na\">name=<\/span><span class=\"s\">\"viewport\"<\/span> <span class=\"na\">content=<\/span><span class=\"s\">\"width=device-width, initial-scale=1.0\"<\/span> <span class=\"nt\">\/&gt;<\/span>\n    <span class=\"nt\">&lt;title&gt;<\/span>Home | Video Streaming<span class=\"nt\">&lt;\/title&gt;<\/span>\n  <span class=\"nt\">&lt;\/head&gt;<\/span>\n  <span class=\"nt\">&lt;body&gt;<\/span>\n    <span class=\"nt\">&lt;video<\/span> \n    <span class=\"na\">controls<\/span> \n    <span class=\"na\">src=<\/span><span class=\"s\">\"\/video\"<\/span> \n    <span class=\"na\">id=<\/span><span class=\"s\">\"video-stream\"<\/span> \n    <span class=\"na\">poster=<\/span><span class=\"s\">\"\/poster.jpeg\"<\/span> \n    <span class=\"na\">width=<\/span><span class=\"s\">\"700\"<\/span>\n    <span class=\"nt\">&gt;<\/span>\n    <span class=\"nt\">&lt;\/video&gt;<\/span>\n  <span class=\"nt\">&lt;\/body&gt;<\/span>\n<span class=\"nt\">&lt;\/html&gt;<\/span>\n<\/code><\/pre>\n<div class=\"highlight__panel js-actions-panel\">\n<div class=\"highlight__panel-action js-fullscreen-code-action\">\n    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"><title>Enter fullscreen mode<\/title>\n    <path d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\/>\n<\/svg><\/p>\n<p>    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"><title>Exit fullscreen mode<\/title>\n    <path d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\/>\n<\/svg><\/p>\n<\/div>\n<\/div>\n<\/div>\n<ul>\n<li>\n<p><code>controls<\/code> :  Specifies that video controls should be displayed (such as a play\/pause button etc).<\/p>\n<\/li>\n<li>\n<p><code>src<\/code> : Specifies the URL of the video file.<\/p>\n<\/li>\n<li>\n<p><code>poster<\/code>: Specifies an image to be shown while the video is downloading, or until the user hits the play button.<\/p>\n<\/li>\n<\/ul>\n<h3>\n  <a name=\"serving-html-file\" href=\"#serving-html-file\"><br \/>\n  <\/a><br \/>\n  serving html file<br \/>\n<\/h3>\n<p>we need to send the html page to the users. add this code below in <code>index.js<\/code> file.<\/p>\n<div class=\"highlight js-code-highlight\">\n<pre class=\"highlight javascript\"><code><span class=\"nx\">app<\/span><span class=\"p\">.<\/span><span class=\"kd\">get<\/span><span class=\"p\">(<\/span><span class=\"dl\">\"<\/span><span class=\"s2\">\/<\/span><span class=\"dl\">\"<\/span><span class=\"p\">,<\/span> <span class=\"p\">(<\/span><span class=\"nx\">req<\/span><span class=\"p\">,<\/span> <span class=\"nx\">res<\/span><span class=\"p\">)<\/span> <span class=\"o\">=&gt;<\/span> <span class=\"p\">{<\/span>\n<span class=\"k\">try<\/span> <span class=\"p\">{<\/span>\n    <span class=\"nx\">res<\/span><span class=\"p\">.<\/span><span class=\"nx\">sendFile<\/span><span class=\"p\">(<\/span><span class=\"nx\">__dirname<\/span> <span class=\"o\">+<\/span> <span class=\"dl\">\"<\/span><span class=\"s2\">\/public\/index.html<\/span><span class=\"dl\">\"<\/span><span class=\"p\">);<\/span>\n<span class=\"p\">}<\/span> <span class=\"k\">catch<\/span> <span class=\"p\">(<\/span><span class=\"nx\">err<\/span><span class=\"p\">)<\/span> <span class=\"p\">{<\/span>\n    <span class=\"nx\">res<\/span><span class=\"p\">.<\/span><span class=\"nx\">status<\/span><span class=\"p\">(<\/span><span class=\"mi\">500<\/span><span class=\"p\">).<\/span><span class=\"nx\">send<\/span><span class=\"p\">(<\/span><span class=\"dl\">\"<\/span><span class=\"s2\">internal server error occurred<\/span><span class=\"dl\">\"<\/span><span class=\"p\">)<\/span>\n<span class=\"p\">}<\/span>\n<span class=\"p\">});<\/span>\n<\/code><\/pre>\n<div class=\"highlight__panel js-actions-panel\">\n<div class=\"highlight__panel-action js-fullscreen-code-action\">\n    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"><title>Enter fullscreen mode<\/title>\n    <path d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\/>\n<\/svg><\/p>\n<p>    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"><title>Exit fullscreen mode<\/title>\n    <path d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\/>\n<\/svg><\/p>\n<\/div>\n<\/div>\n<\/div>\n<p>what that code does, is listening to get request in base URL of the application, when it get the response will be send file by using <code>sendFile<\/code> and first parameter is  html file path.<\/p>\n<p>note:  <code>__dirname<\/code> is the root path of the current directory. <\/p>\n<h2>\n  <a name=\"serving-poster-image-setup-4\" href=\"#serving-poster-image-setup-4\"><br \/>\n  <\/a><br \/>\n  Serving Poster Image &#8211; setup [4]<br \/>\n<\/h2>\n<p>poster is image will be shown until the video is downloading or user click the video.<br \/>note : you need to any image you want in public directory that you make.<br \/>see the code below<\/p>\n<div class=\"highlight js-code-highlight\">\n<pre class=\"highlight javascript\"><code><span class=\"nx\">app<\/span><span class=\"p\">.<\/span><span class=\"kd\">get<\/span><span class=\"p\">(<\/span><span class=\"dl\">\"<\/span><span class=\"s2\">\/:file_name<\/span><span class=\"dl\">\"<\/span><span class=\"p\">,<\/span> <span class=\"p\">(<\/span><span class=\"nx\">req<\/span><span class=\"p\">,<\/span> <span class=\"nx\">res<\/span><span class=\"p\">)<\/span> <span class=\"o\">=&gt;<\/span> <span class=\"p\">{<\/span>\n    <span class=\"k\">try<\/span> <span class=\"p\">{<\/span>\n        <span class=\"nx\">res<\/span><span class=\"p\">.<\/span><span class=\"nx\">sendFile<\/span><span class=\"p\">(<\/span><span class=\"nx\">__dirname<\/span> <span class=\"o\">+<\/span> <span class=\"nx\">req<\/span><span class=\"p\">.<\/span><span class=\"nx\">params<\/span><span class=\"p\">.<\/span><span class=\"nx\">file_name<\/span><span class=\"p\">);<\/span>\n    <span class=\"p\">}<\/span> <span class=\"k\">catch<\/span> <span class=\"p\">(<\/span><span class=\"nx\">err<\/span><span class=\"p\">)<\/span> <span class=\"p\">{<\/span>\n        <span class=\"nx\">res<\/span><span class=\"p\">.<\/span><span class=\"nx\">status<\/span><span class=\"p\">(<\/span><span class=\"mi\">500<\/span><span class=\"p\">).<\/span><span class=\"nx\">send<\/span><span class=\"p\">(<\/span><span class=\"dl\">\"<\/span><span class=\"s2\">internal server error occurred<\/span><span class=\"dl\">\"<\/span><span class=\"p\">);<\/span>\n    <span class=\"p\">}<\/span>\n<span class=\"p\">});<\/span>\n<\/code><\/pre>\n<div class=\"highlight__panel js-actions-panel\">\n<div class=\"highlight__panel-action js-fullscreen-code-action\">\n    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"><title>Enter fullscreen mode<\/title>\n    <path d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\/>\n<\/svg><\/p>\n<p>    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"><title>Exit fullscreen mode<\/title>\n    <path d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\/>\n<\/svg><\/p>\n<\/div>\n<\/div>\n<\/div>\n<h2>\n  <a name=\"streaming-video-setup5-and-final\" href=\"#streaming-video-setup5-and-final\"><br \/>\n  <\/a><br \/>\n  Streaming video &#8211; setup[5] and Final<br \/>\n<\/h2>\n<h3>\n  <a name=\"import-required-nodejs-modules\" href=\"#import-required-nodejs-modules\"><br \/>\n  <\/a><br \/>\n  import required node.js modules<br \/>\n<\/h3>\n<p>when streaming the video we need to import two Node.js build-in library in the top of file.<\/p>\n<div class=\"highlight js-code-highlight\">\n<pre class=\"highlight javascript\"><code><span class=\"kd\">const<\/span>  <span class=\"nx\">fs<\/span> <span class=\"o\">=<\/span> <span class=\"nx\">require<\/span><span class=\"p\">(<\/span><span class=\"dl\">\"<\/span><span class=\"s2\">fs<\/span><span class=\"dl\">\"<\/span><span class=\"p\">);<\/span>\n<span class=\"kd\">const<\/span>  <span class=\"nx\">path<\/span> <span class=\"o\">=<\/span> <span class=\"nx\">require<\/span><span class=\"p\">(<\/span><span class=\"dl\">\"<\/span><span class=\"s2\">path<\/span><span class=\"dl\">\"<\/span><span class=\"p\">);<\/span>\n<\/code><\/pre>\n<div class=\"highlight__panel js-actions-panel\">\n<div class=\"highlight__panel-action js-fullscreen-code-action\">\n    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"><title>Enter fullscreen mode<\/title>\n    <path d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\/>\n<\/svg><\/p>\n<p>    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"><title>Exit fullscreen mode<\/title>\n    <path d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\/>\n<\/svg><\/p>\n<\/div>\n<\/div>\n<\/div>\n<p><code>fs<\/code> : <strong>file system module<\/strong> allows you to work with the file system on your computer. To include the File System module.<\/p>\n<p><code>path<\/code>: <strong>allows you to interact with file paths easily<\/strong>. The path module has many useful properties and methods to access and manipulate paths in the file system.<\/p>\n<h3>\n  <a name=\"setup-video-api-function\" href=\"#setup-video-api-function\"><br \/>\n  <\/a><br \/>\n  setup video API function<br \/>\n<\/h3>\n<p>add this code before Serving Poster Image function, because nodejs will go throw the express middlewares and if the requested url is <code>\/video<\/code>  it will be match the  Serving Poster Image middlewaree not the video middleware.<br \/>note : you need to add random video in public file.<\/p>\n<div class=\"highlight js-code-highlight\">\n<pre class=\"highlight javascript\"><code><span class=\"nx\">app<\/span><span class=\"p\">.<\/span><span class=\"kd\">get<\/span><span class=\"p\">(<\/span><span class=\"dl\">\"<\/span><span class=\"s2\">\/video<\/span><span class=\"dl\">\"<\/span><span class=\"p\">,<\/span> <span class=\"p\">(<\/span><span class=\"nx\">req<\/span><span class=\"p\">,<\/span> <span class=\"nx\">res<\/span><span class=\"p\">)<\/span> <span class=\"o\">=&gt;<\/span> <span class=\"p\">{<\/span>\n<span class=\"c1\">\/\/ indicates the part of a document that the server should return<\/span>\n<span class=\"c1\">\/\/ on this measure in bytes for example: range = 0-6 bytes.<\/span>\n<span class=\"kd\">const<\/span>  <span class=\"nx\">range<\/span> <span class=\"o\">=<\/span> <span class=\"nx\">req<\/span><span class=\"p\">.<\/span><span class=\"nx\">headers<\/span><span class=\"p\">.<\/span><span class=\"nx\">range<\/span><span class=\"p\">;<\/span>\n<span class=\"k\">if<\/span> <span class=\"p\">(<\/span><span class=\"o\">!<\/span><span class=\"nx\">range<\/span><span class=\"p\">)<\/span> <span class=\"nx\">res<\/span><span class=\"p\">.<\/span><span class=\"nx\">status<\/span><span class=\"p\">(<\/span><span class=\"mi\">400<\/span><span class=\"p\">).<\/span><span class=\"nx\">send<\/span><span class=\"p\">(<\/span><span class=\"dl\">\"<\/span><span class=\"s2\">Range must be provided<\/span><span class=\"dl\">\"<\/span><span class=\"p\">);<\/span>\n\n<span class=\"kd\">const<\/span>  <span class=\"nx\">videoPath<\/span> <span class=\"o\">=<\/span> <span class=\"nx\">path<\/span><span class=\"p\">.<\/span><span class=\"nx\">join<\/span><span class=\"p\">(<\/span><span class=\"nx\">__dirname<\/span><span class=\"p\">,<\/span> <span class=\"dl\">\"<\/span><span class=\"s2\">public<\/span><span class=\"dl\">\"<\/span><span class=\"p\">,<\/span> <span class=\"dl\">\"<\/span><span class=\"s2\">video.mp4<\/span><span class=\"dl\">\"<\/span><span class=\"p\">);<\/span>\n<span class=\"c1\">\/\/ extract video size by using statSyn()<\/span>\n<span class=\"kd\">const<\/span>  <span class=\"nx\">videoSize<\/span> <span class=\"o\">=<\/span> <span class=\"nx\">fs<\/span><span class=\"p\">.<\/span><span class=\"nx\">statSync<\/span><span class=\"p\">(<\/span><span class=\"nx\">videoPath<\/span><span class=\"p\">).<\/span><span class=\"nx\">size<\/span><span class=\"p\">;<\/span>\n<span class=\"c1\">\/\/ 10 powered by 6 equal 1000000bytes = 1mb<\/span>\n<span class=\"kd\">const<\/span>  <span class=\"nx\">chunkSize<\/span> <span class=\"o\">=<\/span> <span class=\"mi\">10<\/span> <span class=\"o\">**<\/span> <span class=\"mi\">6<\/span><span class=\"p\">;<\/span> \n\n<span class=\"c1\">\/\/ calculating video where to start and where to end.<\/span>\n<span class=\"kd\">const<\/span>  <span class=\"nx\">start<\/span> <span class=\"o\">=<\/span> <span class=\"nb\">Number<\/span><span class=\"p\">(<\/span><span class=\"nx\">range<\/span><span class=\"p\">.<\/span><span class=\"nx\">replace<\/span><span class=\"p\">(<\/span><span class=\"sr\">\/<\/span><span class=\"se\">\\D<\/span><span class=\"sr\">\/g<\/span><span class=\"p\">,<\/span> <span class=\"dl\">\"\"<\/span><span class=\"p\">));<\/span>\n<span class=\"kd\">const<\/span>  <span class=\"nx\">end<\/span> <span class=\"o\">=<\/span> <span class=\"nb\">Math<\/span><span class=\"p\">.<\/span><span class=\"nx\">min<\/span><span class=\"p\">(<\/span><span class=\"nx\">start<\/span> <span class=\"o\">+<\/span> <span class=\"nx\">chunkSize<\/span><span class=\"p\">,<\/span> <span class=\"nx\">videoSize<\/span> <span class=\"o\">-<\/span> <span class=\"mi\">1<\/span><span class=\"p\">);<\/span>\n<span class=\"kd\">const<\/span>  <span class=\"nx\">contentLength<\/span> <span class=\"o\">=<\/span> <span class=\"nx\">end<\/span> <span class=\"o\">-<\/span> <span class=\"nx\">start<\/span> <span class=\"o\">+<\/span> <span class=\"mi\">1<\/span><span class=\"p\">;<\/span>\n\n<span class=\"c1\">\/\/ setup video headers<\/span>\n<span class=\"kd\">const<\/span>  <span class=\"nx\">headers<\/span> <span class=\"o\">=<\/span> <span class=\"p\">{<\/span>\n<span class=\"dl\">\"<\/span><span class=\"s2\">Content-Range<\/span><span class=\"dl\">\"<\/span><span class=\"p\">:<\/span>  <span class=\"s2\">`bytes <\/span><span class=\"p\">${<\/span><span class=\"nx\">start<\/span><span class=\"p\">}<\/span><span class=\"s2\">-<\/span><span class=\"p\">${<\/span><span class=\"nx\">end<\/span><span class=\"p\">}<\/span><span class=\"s2\">\/<\/span><span class=\"p\">${<\/span><span class=\"nx\">videoSize<\/span><span class=\"p\">}<\/span><span class=\"s2\">`<\/span><span class=\"p\">,<\/span>\n<span class=\"dl\">\"<\/span><span class=\"s2\">Accept-Ranges<\/span><span class=\"dl\">\"<\/span><span class=\"p\">:<\/span>  <span class=\"dl\">\"<\/span><span class=\"s2\">bytes<\/span><span class=\"dl\">\"<\/span><span class=\"p\">,<\/span>\n<span class=\"dl\">\"<\/span><span class=\"s2\">Content-Length<\/span><span class=\"dl\">\"<\/span><span class=\"p\">:<\/span>  <span class=\"nx\">contentLength<\/span><span class=\"p\">,<\/span>\n<span class=\"dl\">\"<\/span><span class=\"s2\">Content-Type<\/span><span class=\"dl\">\"<\/span><span class=\"p\">:<\/span>  <span class=\"dl\">\"<\/span><span class=\"s2\">video\/mp4<\/span><span class=\"dl\">\"<\/span><span class=\"p\">,<\/span>\n<span class=\"p\">};<\/span>\n\n<span class=\"nx\">res<\/span><span class=\"p\">.<\/span><span class=\"nx\">writeHead<\/span><span class=\"p\">(<\/span><span class=\"mi\">206<\/span><span class=\"p\">,<\/span> <span class=\"nx\">headers<\/span><span class=\"p\">);<\/span>\n<span class=\"c1\">\/\/ creating readStream (stdin).<\/span>\n<span class=\"kd\">const<\/span>  <span class=\"nx\">videoStream<\/span> <span class=\"o\">=<\/span> <span class=\"nx\">fs<\/span><span class=\"p\">.<\/span><span class=\"nx\">createReadStream<\/span><span class=\"p\">(<\/span><span class=\"nx\">videoPath<\/span><span class=\"p\">,<\/span> <span class=\"p\">{<\/span> <span class=\"nx\">start<\/span><span class=\"p\">,<\/span> <span class=\"nx\">end<\/span> <span class=\"p\">});<\/span>\n\n<span class=\"c1\">\/\/ create live stream pipe line<\/span>\n<span class=\"nx\">videoStream<\/span><span class=\"p\">.<\/span><span class=\"nx\">pipe<\/span><span class=\"p\">(<\/span><span class=\"nx\">res<\/span><span class=\"p\">);<\/span>\n<span class=\"p\">});<\/span>\n<\/code><\/pre>\n<div class=\"highlight__panel js-actions-panel\">\n<div class=\"highlight__panel-action js-fullscreen-code-action\">\n    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"><title>Enter fullscreen mode<\/title>\n    <path d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\/>\n<\/svg><\/p>\n<p>    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"><title>Exit fullscreen mode<\/title>\n    <path d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\/>\n<\/svg><\/p>\n<\/div>\n<\/div>\n<\/div>\n<h3>\n  <a name=\"and-then-run-raw-npm-run-start-endraw-to-see-your-work\" href=\"#and-then-run-raw-npm-run-start-endraw-to-see-your-work\"><br \/>\n  <\/a><br \/>\n  and then run <code>npm run start<\/code>. to see your work.<br \/>\n<\/h3>\n<h3>\n  <a name=\"what-is-pipe-in-streaming\" href=\"#what-is-pipe-in-streaming\"><br \/>\n  <\/a><br \/>\n  what is pipe() in streaming<br \/>\n<\/h3>\n<p>Streams make for quite a handy abstraction, and there&#8217;s a lot you can do with them &#8211; as an example,  <code>stream.pipe()<\/code>, the method used to take a readable stream and connect it to a writeable stream. the writable stream is user we request him the data buffers.<\/p>\n<p>project source code: <a href=\"https:\/\/github.com\/alguerocode\/video-streaming\">https:\/\/github.com\/alguerocode\/video-streaming<\/a><br \/>follow me in github: <a href=\"https:\/\/github.com\/alguerocode\">alguerocode<\/a><\/p>\n<p>thank you for reading.<\/p>\n<\/p><\/div>\n\n","protected":false},"excerpt":{"rendered":"<p>hi folks, in this blog we will build a Node.js video streaming application in like 10 minutes. prerequisite install Node.js in your computer what is streaming Streams are collections of data \u2014 just like arrays or strings. The difference is that streams might not be available all at once, and they don\u2019t have to fit &hellip;<\/p>\n<p class=\"read-more\"> <a class=\"\" href=\"http:\/\/localhost\/wordpress\/building-node-js-video-streaming-in-5-minutes\/\"> <span class=\"screen-reader-text\">building Node.js video streaming in 5 minutes<\/span> Read More &raquo;<\/a><\/p>\n","protected":false},"author":1,"featured_media":1032,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"site-sidebar-layout":"default","site-content-layout":"default","ast-main-header-display":"","ast-hfb-above-header-display":"","ast-hfb-below-header-display":"","ast-hfb-mobile-header-display":"","site-post-title":"","ast-breadcrumbs-content":"","ast-featured-img":"","footer-sml-layout":"","theme-transparent-header-meta":"","adv-header-id-meta":"","stick-header-meta":"","header-above-stick-meta":"","header-main-stick-meta":"","header-below-stick-meta":""},"categories":[1],"tags":[],"_links":{"self":[{"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/posts\/1031"}],"collection":[{"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/comments?post=1031"}],"version-history":[{"count":0,"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/posts\/1031\/revisions"}],"wp:featuredmedia":[{"embeddable":true,"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/media\/1032"}],"wp:attachment":[{"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/media?parent=1031"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/categories?post=1031"},{"taxonomy":"post_tag","embeddable":true,"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/tags?post=1031"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}