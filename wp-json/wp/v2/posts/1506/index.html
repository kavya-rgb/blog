{"id":1506,"date":"2022-03-10T07:00:06","date_gmt":"2022-03-10T07:00:06","guid":{"rendered":"http:\/\/localhost\/wordpress\/lets-have-a-blast-of-fun-how-to-build-a-minesweeper-clone-for-the-cli-with-nodejs-%f0%9f%92%a3%f0%9f%94%8d\/"},"modified":"2022-03-10T07:00:06","modified_gmt":"2022-03-10T07:00:06","slug":"lets-have-a-blast-of-fun-how-to-build-a-minesweeper-clone-for-the-cli-with-nodejs-%f0%9f%92%a3%f0%9f%94%8d","status":"publish","type":"post","link":"http:\/\/localhost\/wordpress\/lets-have-a-blast-of-fun-how-to-build-a-minesweeper-clone-for-the-cli-with-nodejs-%f0%9f%92%a3%f0%9f%94%8d\/","title":{"rendered":"Let&#8217;s have a blast of fun! How to build a Minesweeper clone for the CLI with NodeJS \ud83d\udca3\ud83d\udd0d"},"content":{"rendered":"<p> <br \/>\n<\/p>\n<div data-article-id=\"1014424\" id=\"article-body\">\n<p><em>(Cover photo by Flickr user <a href=\"https:\/\/www.flickr.com\/photos\/87249144@N08\/\">FolsomNatural<\/a>)<\/em><\/p>\n<p>Hands up &#8211; who has played this absolute classic for hours on end? \ud83d\ude4b I remember playing it as a kid. There&#8217;s a myriad of different implementations, even 3D versions of it. Heck, I even play it today from time to time. So why not build our own version on the CLI using Node? <\/p>\n<blockquote>\n<p>I also want to give a shoutout to @krystofex who supported me via buymeacoffee! \u2615 Thank you very much for your support, it is highly appreciated and I already enjoyed a delicious coffee on my way home the other day! \u263a\ufe0f<\/p>\n<\/blockquote>\n<h2>\n  <a name=\"setting-the-stage\" href=\"#setting-the-stage\"><br \/>\n  <\/a><br \/>\n  Setting the stage<br \/>\n<\/h2>\n<p>This will be a CLI app, as lean as possible, no external dependencies. That should work reasonably well, given that most things, like argument parsing and displaying things in a structured manner in the CLI, work out of the box pretty nicely.<\/p>\n<p>Let&#8217;s first have a look at the game rules, though.<\/p>\n<p>Minesweeper is usually played on a square field. 10&#215;10, 60&#215;60, you get the drill. A certain number of so called &#8220;mines&#8221; is placed randomly onto the field. The player now has to flag all these mines and <em>only<\/em> these mines. For this, they can place flags onto the field where they think a mine is located. To figure out where the mines are, the player can uncover fields. By doing so, they can see how many adjacent fields have mines. Uncovering a field with no adjacent mine uncovers all neighbours with no adjacent mines, too. What does that mean exactly, though?<\/p>\n<p>Let&#8217;s have a look at a 5 by 5 field with 3 mines:<\/p>\n<div class=\"highlight js-code-highlight\">\n<pre class=\"highlight plaintext\"><code>+----------+\n|0 0 0 0 0 |\n|2 2 1 1 1 |\n|m m 1 1 m |\n|2 2 1 1 1 |\n|0 0 0 0 0 |\n+----------+\n<\/code><\/pre>\n<div class=\"highlight__panel js-actions-panel\">\n<div class=\"highlight__panel-action js-fullscreen-code-action\">\n    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"><title>Enter fullscreen mode<\/title>\n    <path d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\/>\n<\/svg><\/p>\n<p>    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"><title>Exit fullscreen mode<\/title>\n    <path d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\/>\n<\/svg><\/p>\n<\/div>\n<\/div>\n<\/div>\n<p>The mines are marked with <code>m<\/code>, the numbers show how many neighbours have a mine. All 8 surrounding cells count as neighbours. When the game starts out, none of these are visible. The player then choses to uncover the top left cell. What they&#8217;ll see is this:<\/p>\n<div class=\"highlight js-code-highlight\">\n<pre class=\"highlight plaintext\"><code>+----------+\n|0 0 0 0 0 |\n|2 2 1 1 1 |\n|          |\n|          |\n|          |\n+----------+\n<\/code><\/pre>\n<div class=\"highlight__panel js-actions-panel\">\n<div class=\"highlight__panel-action js-fullscreen-code-action\">\n    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"><title>Enter fullscreen mode<\/title>\n    <path d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\/>\n<\/svg><\/p>\n<p>    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"><title>Exit fullscreen mode<\/title>\n    <path d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\/>\n<\/svg><\/p>\n<\/div>\n<\/div>\n<\/div>\n<p>By uncovering a field with no adjacent mines, all neighbours that are not mines are uncovered, until a cell has a neighbouring mine.<\/p>\n<p>If the player accidentally uncovers a mine, they lose the game. If they manage to flag all mines correctly, they win the game. The simplicity of this is what&#8217;s really making it addictive. &#8220;I <em>almost<\/em> managed to win last time, this time I&#8217;ll make it!&#8221; &#8211; right? Also, the game feels kind of unfair from time to time. The chances of the player randomly hitting a mine are <code>width * height \/ number of mines<\/code>. In a standard small 10 by 10 setup with 8 mines, that&#8217;s an 8% chance of hitting a mine. Pretty slim, huh? Well, until you manage to hit a mine on the first move <em>for the third loving time in a row, <strong>for goodness sake, why is it doing this to me??<\/strong><\/em><\/p>\n<p>Ok, I might have played it a bit too often. I need to calm down, we&#8217;re here to <em>build<\/em> it, not necessarily to <em>win<\/em> it.<\/p>\n<h2>\n  <a name=\"parsing-arguments\" href=\"#parsing-arguments\"><br \/>\n  <\/a><br \/>\n  Parsing arguments<br \/>\n<\/h2>\n<p>Ok, the heart rate has gone down.<\/p>\n<p>To figure out how large the field should be and how many mines we should place, we&#8217;re going to use console arguments.<\/p>\n<p>The app should be callable like so:<\/p>\n<div class=\"highlight js-code-highlight\">\n<pre class=\"highlight shell\"><code>node minesweeper.js <span class=\"nt\">--width<\/span><span class=\"o\">=<\/span>10 <span class=\"nt\">--height<\/span><span class=\"o\">=<\/span>10 <span class=\"nt\">--mines<\/span><span class=\"o\">=<\/span>20\n<\/code><\/pre>\n<div class=\"highlight__panel js-actions-panel\">\n<div class=\"highlight__panel-action js-fullscreen-code-action\">\n    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"><title>Enter fullscreen mode<\/title>\n    <path d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\/>\n<\/svg><\/p>\n<p>    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"><title>Exit fullscreen mode<\/title>\n    <path d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\/>\n<\/svg><\/p>\n<\/div>\n<\/div>\n<\/div>\n<p>This should result in a 10&#215;10 playing field with 10 randomly placed mines.<\/p>\n<p>We&#8217;ll use some regular expressions to parse out these arguments:<\/p>\n<div class=\"highlight js-code-highlight\">\n<pre class=\"highlight javascript\"><code><span class=\"kd\">const<\/span> <span class=\"nx\">getArg<\/span> <span class=\"o\">=<\/span> <span class=\"p\">(<\/span><span class=\"nx\">args<\/span><span class=\"p\">,<\/span> <span class=\"nx\">name<\/span><span class=\"p\">)<\/span> <span class=\"o\">=&gt;<\/span> <span class=\"p\">{<\/span>\n  <span class=\"kd\">const<\/span> <span class=\"nx\">match<\/span> <span class=\"o\">=<\/span> <span class=\"nx\">args<\/span><span class=\"p\">.<\/span><span class=\"nx\">match<\/span><span class=\"p\">(<\/span><span class=\"k\">new<\/span> <span class=\"nb\">RegExp<\/span><span class=\"p\">(<\/span><span class=\"dl\">'<\/span><span class=\"s1\">--<\/span><span class=\"dl\">'<\/span> <span class=\"o\">+<\/span> <span class=\"nx\">name<\/span> <span class=\"o\">+<\/span> <span class=\"dl\">'<\/span><span class=\"s1\">=(<\/span><span class=\"se\">\\\\<\/span><span class=\"s1\">d+)<\/span><span class=\"dl\">'<\/span><span class=\"p\">))<\/span>\n\n  <span class=\"k\">if<\/span> <span class=\"p\">(<\/span><span class=\"nx\">match<\/span> <span class=\"o\">===<\/span> <span class=\"kc\">null<\/span><span class=\"p\">)<\/span> <span class=\"p\">{<\/span>\n    <span class=\"k\">throw<\/span> <span class=\"k\">new<\/span> <span class=\"nb\">Error<\/span><span class=\"p\">(<\/span><span class=\"dl\">'<\/span><span class=\"s1\">Missing argument <\/span><span class=\"dl\">'<\/span> <span class=\"o\">+<\/span> <span class=\"nx\">name<\/span><span class=\"p\">)<\/span>\n  <span class=\"p\">}<\/span>\n\n  <span class=\"k\">return<\/span> <span class=\"nb\">parseInt<\/span><span class=\"p\">(<\/span><span class=\"nx\">match<\/span><span class=\"p\">[<\/span><span class=\"mi\">1<\/span><span class=\"p\">])<\/span>\n<span class=\"p\">}<\/span>\n\n<span class=\"kd\">let<\/span> <span class=\"nx\">width<\/span> <span class=\"o\">=<\/span> <span class=\"mi\">0<\/span>\n<span class=\"kd\">let<\/span> <span class=\"nx\">height<\/span> <span class=\"o\">=<\/span> <span class=\"mi\">0<\/span>\n<span class=\"kd\">let<\/span> <span class=\"nx\">mines<\/span> <span class=\"o\">=<\/span> <span class=\"mi\">0<\/span>\n\n<span class=\"k\">try<\/span> <span class=\"p\">{<\/span>\n  <span class=\"kd\">const<\/span> <span class=\"nx\">args<\/span> <span class=\"o\">=<\/span> <span class=\"nx\">process<\/span><span class=\"p\">.<\/span><span class=\"nx\">argv<\/span><span class=\"p\">.<\/span><span class=\"nx\">slice<\/span><span class=\"p\">(<\/span><span class=\"mi\">2<\/span><span class=\"p\">).<\/span><span class=\"nx\">join<\/span><span class=\"p\">(<\/span><span class=\"dl\">'<\/span><span class=\"s1\"> <\/span><span class=\"dl\">'<\/span><span class=\"p\">)<\/span>\n  <span class=\"nx\">width<\/span> <span class=\"o\">=<\/span> <span class=\"nx\">getArg<\/span><span class=\"p\">(<\/span><span class=\"nx\">args<\/span><span class=\"p\">,<\/span> <span class=\"dl\">'<\/span><span class=\"s1\">width<\/span><span class=\"dl\">'<\/span><span class=\"p\">)<\/span>\n  <span class=\"nx\">height<\/span> <span class=\"o\">=<\/span> <span class=\"nx\">getArg<\/span><span class=\"p\">(<\/span><span class=\"nx\">args<\/span><span class=\"p\">,<\/span> <span class=\"dl\">'<\/span><span class=\"s1\">height<\/span><span class=\"dl\">'<\/span><span class=\"p\">)<\/span>\n  <span class=\"nx\">mines<\/span> <span class=\"o\">=<\/span> <span class=\"nx\">getArg<\/span><span class=\"p\">(<\/span><span class=\"nx\">args<\/span><span class=\"p\">,<\/span> <span class=\"dl\">'<\/span><span class=\"s1\">mines<\/span><span class=\"dl\">'<\/span><span class=\"p\">)<\/span>\n\n  <span class=\"k\">if<\/span> <span class=\"p\">(<\/span><span class=\"nx\">width<\/span> <span class=\"o\">&lt;<\/span> <span class=\"mi\">1<\/span> <span class=\"o\">||<\/span> <span class=\"nx\">height<\/span> <span class=\"o\">&lt;<\/span> <span class=\"mi\">1<\/span><span class=\"p\">)<\/span> <span class=\"p\">{<\/span>\n    <span class=\"k\">throw<\/span> <span class=\"k\">new<\/span> <span class=\"nb\">Error<\/span><span class=\"p\">(<\/span><span class=\"dl\">'<\/span><span class=\"s1\">Field size must be positive<\/span><span class=\"dl\">'<\/span><span class=\"p\">)<\/span>\n  <span class=\"p\">}<\/span>\n<span class=\"p\">}<\/span> <span class=\"k\">catch<\/span> <span class=\"p\">(<\/span><span class=\"nx\">e<\/span><span class=\"p\">)<\/span> <span class=\"p\">{<\/span>\n  <span class=\"nx\">console<\/span><span class=\"p\">.<\/span><span class=\"nx\">error<\/span><span class=\"p\">(<\/span><span class=\"nx\">e<\/span><span class=\"p\">)<\/span>\n  <span class=\"nx\">process<\/span><span class=\"p\">.<\/span><span class=\"nx\">exit<\/span><span class=\"p\">(<\/span><span class=\"mi\">1<\/span><span class=\"p\">)<\/span>\n<span class=\"p\">}<\/span>\n<\/code><\/pre>\n<div class=\"highlight__panel js-actions-panel\">\n<div class=\"highlight__panel-action js-fullscreen-code-action\">\n    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"><title>Enter fullscreen mode<\/title>\n    <path d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\/>\n<\/svg><\/p>\n<p>    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"><title>Exit fullscreen mode<\/title>\n    <path d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\/>\n<\/svg><\/p>\n<\/div>\n<\/div>\n<\/div>\n<p>Since all our arguments are numeric, we can perfectly use <code>\\d+<\/code> and the arguments name as a regular expression, parse out the number and use that. The only thing we need to care about is that we don&#8217;t want 0 for either the width or the height &#8211; that wouldn&#8217;t make much sense anyways, would it?. We do allow for 0 mines, though. Easy mode. Juuust to calm the nerves. For. A. Little. Bit.<\/p>\n<h2>\n  <a name=\"building-the-field\" href=\"#building-the-field\"><br \/>\n  <\/a><br \/>\n  Building the field<br \/>\n<\/h2>\n<p>Where were we? Right.<\/p>\n<p>Now we create a little utility function:<\/p>\n<div class=\"highlight js-code-highlight\">\n<pre class=\"highlight javascript\"><code><span class=\"kd\">const<\/span> <span class=\"nx\">getNeighbouringCoords<\/span> <span class=\"o\">=<\/span> <span class=\"p\">(<\/span><span class=\"nx\">x<\/span><span class=\"p\">,<\/span> <span class=\"nx\">y<\/span><span class=\"p\">)<\/span> <span class=\"o\">=&gt;<\/span> <span class=\"p\">[<\/span>\n  <span class=\"p\">[<\/span><span class=\"nx\">y<\/span> <span class=\"o\">-<\/span> <span class=\"mi\">1<\/span><span class=\"p\">,<\/span> <span class=\"nx\">x<\/span> <span class=\"o\">-<\/span> <span class=\"mi\">1<\/span><span class=\"p\">],<\/span>\n  <span class=\"p\">[<\/span><span class=\"nx\">y<\/span> <span class=\"o\">-<\/span> <span class=\"mi\">1<\/span><span class=\"p\">,<\/span> <span class=\"nx\">x<\/span><span class=\"p\">],<\/span>\n  <span class=\"p\">[<\/span><span class=\"nx\">y<\/span> <span class=\"o\">-<\/span> <span class=\"mi\">1<\/span><span class=\"p\">,<\/span> <span class=\"nx\">x<\/span> <span class=\"o\">+<\/span> <span class=\"mi\">1<\/span><span class=\"p\">],<\/span>\n  <span class=\"p\">[<\/span><span class=\"nx\">y<\/span><span class=\"p\">,<\/span> <span class=\"nx\">x<\/span> <span class=\"o\">+<\/span> <span class=\"mi\">1<\/span><span class=\"p\">],<\/span>\n  <span class=\"p\">[<\/span><span class=\"nx\">y<\/span><span class=\"p\">,<\/span> <span class=\"nx\">x<\/span> <span class=\"o\">-<\/span> <span class=\"mi\">1<\/span><span class=\"p\">],<\/span>\n  <span class=\"p\">[<\/span><span class=\"nx\">y<\/span> <span class=\"o\">+<\/span> <span class=\"mi\">1<\/span><span class=\"p\">,<\/span> <span class=\"nx\">x<\/span> <span class=\"o\">-<\/span> <span class=\"mi\">1<\/span><span class=\"p\">],<\/span>\n  <span class=\"p\">[<\/span><span class=\"nx\">y<\/span> <span class=\"o\">+<\/span> <span class=\"mi\">1<\/span><span class=\"p\">,<\/span> <span class=\"nx\">x<\/span><span class=\"p\">],<\/span>\n  <span class=\"p\">[<\/span><span class=\"nx\">y<\/span> <span class=\"o\">+<\/span> <span class=\"mi\">1<\/span><span class=\"p\">,<\/span> <span class=\"nx\">x<\/span> <span class=\"o\">+<\/span> <span class=\"mi\">1<\/span><span class=\"p\">],<\/span>\n<span class=\"p\">].<\/span><span class=\"nx\">filter<\/span><span class=\"p\">(([<\/span><span class=\"nx\">y<\/span><span class=\"p\">,<\/span> <span class=\"nx\">x<\/span><span class=\"p\">])<\/span> <span class=\"o\">=&gt;<\/span> <span class=\"p\">(<\/span>\n  <span class=\"nx\">y<\/span> <span class=\"o\">&gt;=<\/span> <span class=\"mi\">0<\/span> <span class=\"o\">&amp;&amp;<\/span> <span class=\"nx\">x<\/span> <span class=\"o\">&gt;=<\/span> <span class=\"mi\">0<\/span> <span class=\"o\">&amp;&amp;<\/span> <span class=\"nx\">x<\/span> <span class=\"o\">&lt;<\/span> <span class=\"nx\">width<\/span> <span class=\"o\">&amp;&amp;<\/span> <span class=\"nx\">y<\/span> <span class=\"o\">&lt;<\/span> <span class=\"nx\">height<\/span>\n<span class=\"p\">))<\/span>\n<\/code><\/pre>\n<div class=\"highlight__panel js-actions-panel\">\n<div class=\"highlight__panel-action js-fullscreen-code-action\">\n    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"><title>Enter fullscreen mode<\/title>\n    <path d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\/>\n<\/svg><\/p>\n<p>    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"><title>Exit fullscreen mode<\/title>\n    <path d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\/>\n<\/svg><\/p>\n<\/div>\n<\/div>\n<\/div>\n<p>This will give us an array of up to 8 coordinate pairs for given X and Y coordinates. This will be useful later on. We can use it to determine which fields to uncover and where to set those numbers we&#8217;ve seen before.<\/p>\n<p>Then we need some way to keep the data. There&#8217;s essentially three kinds of matrices we&#8217;re going to need:<\/p>\n<ul>\n<li>One to keep track where those pesky mines are (and the numbers around them)<\/li>\n<li>One to keep track which fields the player has uncovered so far<\/li>\n<li>And lastly, one to keep track which fields the player has flagged as &#8220;contains a mine&#8221;\n<\/li>\n<\/ul>\n<div class=\"highlight js-code-highlight\">\n<pre class=\"highlight javascript\"><code><span class=\"kd\">const<\/span> <span class=\"nx\">createMatrix<\/span> <span class=\"o\">=<\/span> <span class=\"nx\">v<\/span> <span class=\"o\">=&gt;<\/span> <span class=\"nb\">Array<\/span><span class=\"p\">(<\/span><span class=\"nx\">width<\/span><span class=\"p\">).<\/span><span class=\"nx\">fill<\/span><span class=\"p\">([]).<\/span><span class=\"nx\">map<\/span><span class=\"p\">(<\/span>\n  <span class=\"p\">()<\/span> <span class=\"o\">=&gt;<\/span> <span class=\"nb\">Array<\/span><span class=\"p\">(<\/span><span class=\"nx\">height<\/span><span class=\"p\">).<\/span><span class=\"nx\">fill<\/span><span class=\"p\">(<\/span><span class=\"nx\">v<\/span><span class=\"p\">)<\/span>\n<span class=\"p\">)<\/span>\n\n<span class=\"kd\">const<\/span> <span class=\"nx\">field<\/span> <span class=\"o\">=<\/span> <span class=\"nx\">createMatrix<\/span><span class=\"p\">(<\/span><span class=\"mi\">0<\/span><span class=\"p\">)<\/span>\n<span class=\"c1\">\/\/ We'll overwrite this matrix later, hence `let`<\/span>\n<span class=\"kd\">let<\/span> <span class=\"nx\">uncoveredField<\/span> <span class=\"o\">=<\/span> <span class=\"nx\">createMatrix<\/span><span class=\"p\">(<\/span><span class=\"kc\">false<\/span><span class=\"p\">)<\/span>\n<span class=\"kd\">const<\/span> <span class=\"nx\">flaggedField<\/span> <span class=\"o\">=<\/span> <span class=\"nx\">createMatrix<\/span><span class=\"p\">(<\/span><span class=\"kc\">false<\/span><span class=\"p\">)<\/span>\n<\/code><\/pre>\n<div class=\"highlight__panel js-actions-panel\">\n<div class=\"highlight__panel-action js-fullscreen-code-action\">\n    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"><title>Enter fullscreen mode<\/title>\n    <path d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\/>\n<\/svg><\/p>\n<p>    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"><title>Exit fullscreen mode<\/title>\n    <path d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\/>\n<\/svg><\/p>\n<\/div>\n<\/div>\n<\/div>\n<p>Next, we&#8217;ll place the mines. For this we generate some random X\/Y coordinates. We skip if there&#8217;s already a mine there to make sure that the player gets the full amount of fun.<\/p>\n<p>Once a mine is set, we increase all the neighbouring cells by <code>1<\/code>. This will generate the characteristic number patterns:<\/p>\n<div class=\"highlight js-code-highlight\">\n<pre class=\"highlight javascript\"><code><span class=\"k\">while<\/span> <span class=\"p\">(<\/span><span class=\"nx\">mines<\/span> <span class=\"o\">&gt;<\/span> <span class=\"mi\">0<\/span><span class=\"p\">)<\/span> <span class=\"p\">{<\/span>\n  <span class=\"kd\">const<\/span> <span class=\"nx\">mineX<\/span> <span class=\"o\">=<\/span> <span class=\"nb\">Math<\/span><span class=\"p\">.<\/span><span class=\"nx\">round<\/span><span class=\"p\">(<\/span><span class=\"nb\">Math<\/span><span class=\"p\">.<\/span><span class=\"nx\">random<\/span><span class=\"p\">()<\/span> <span class=\"o\">*<\/span> <span class=\"p\">(<\/span><span class=\"nx\">width<\/span> <span class=\"o\">-<\/span> <span class=\"mi\">1<\/span><span class=\"p\">))<\/span>\n  <span class=\"kd\">const<\/span> <span class=\"nx\">mineY<\/span> <span class=\"o\">=<\/span> <span class=\"nb\">Math<\/span><span class=\"p\">.<\/span><span class=\"nx\">round<\/span><span class=\"p\">(<\/span><span class=\"nb\">Math<\/span><span class=\"p\">.<\/span><span class=\"nx\">random<\/span><span class=\"p\">()<\/span> <span class=\"o\">*<\/span> <span class=\"p\">(<\/span><span class=\"nx\">height<\/span> <span class=\"o\">-<\/span> <span class=\"mi\">1<\/span><span class=\"p\">))<\/span>\n\n  <span class=\"k\">if<\/span> <span class=\"p\">(<\/span><span class=\"nx\">field<\/span><span class=\"p\">[<\/span><span class=\"nx\">mineY<\/span><span class=\"p\">][<\/span><span class=\"nx\">mineX<\/span><span class=\"p\">]<\/span> <span class=\"o\">!==<\/span> <span class=\"dl\">'<\/span><span class=\"s1\">m<\/span><span class=\"dl\">'<\/span><span class=\"p\">)<\/span> <span class=\"p\">{<\/span>\n    <span class=\"nx\">field<\/span><span class=\"p\">[<\/span><span class=\"nx\">mineY<\/span><span class=\"p\">][<\/span><span class=\"nx\">mineX<\/span><span class=\"p\">]<\/span> <span class=\"o\">=<\/span> <span class=\"dl\">'<\/span><span class=\"s1\">m<\/span><span class=\"dl\">'<\/span>\n\n    <span class=\"nx\">getNeighbouringCoords<\/span><span class=\"p\">(<\/span><span class=\"nx\">mineX<\/span><span class=\"p\">,<\/span> <span class=\"nx\">mineY<\/span><span class=\"p\">)<\/span>\n      <span class=\"p\">.<\/span><span class=\"nx\">filter<\/span><span class=\"p\">(([<\/span><span class=\"nx\">y<\/span><span class=\"p\">,<\/span> <span class=\"nx\">x<\/span><span class=\"p\">])<\/span> <span class=\"o\">=&gt;<\/span> <span class=\"nx\">field<\/span><span class=\"p\">[<\/span><span class=\"nx\">y<\/span><span class=\"p\">][<\/span><span class=\"nx\">x<\/span><span class=\"p\">]<\/span> <span class=\"o\">!==<\/span> <span class=\"dl\">'<\/span><span class=\"s1\">m<\/span><span class=\"dl\">'<\/span><span class=\"p\">)<\/span>\n      <span class=\"p\">.<\/span><span class=\"nx\">forEach<\/span><span class=\"p\">(([<\/span><span class=\"nx\">y<\/span><span class=\"p\">,<\/span> <span class=\"nx\">x<\/span><span class=\"p\">])<\/span> <span class=\"o\">=&gt;<\/span> <span class=\"p\">{<\/span>\n        <span class=\"nx\">field<\/span><span class=\"p\">[<\/span><span class=\"nx\">y<\/span><span class=\"p\">][<\/span><span class=\"nx\">x<\/span><span class=\"p\">]<\/span><span class=\"o\">++<\/span>\n      <span class=\"p\">})<\/span>\n\n    <span class=\"nx\">mines<\/span><span class=\"o\">--<\/span>\n  <span class=\"p\">}<\/span>\n<span class=\"p\">}<\/span>\n<\/code><\/pre>\n<div class=\"highlight__panel js-actions-panel\">\n<div class=\"highlight__panel-action js-fullscreen-code-action\">\n    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"><title>Enter fullscreen mode<\/title>\n    <path d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\/>\n<\/svg><\/p>\n<p>    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"><title>Exit fullscreen mode<\/title>\n    <path d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\/>\n<\/svg><\/p>\n<\/div>\n<\/div>\n<\/div>\n<p>Let&#8217;s test that:<\/p>\n<div class=\"highlight js-code-highlight\">\n<pre class=\"highlight plaintext\"><code>+----------+\n|0 1 2 2 1 |\n|0 1 m m 1 |\n|0 1 2 3 2 |\n|0 0 0 1 m |\n|0 0 0 1 1 |\n+----------+\n<\/code><\/pre>\n<div class=\"highlight__panel js-actions-panel\">\n<div class=\"highlight__panel-action js-fullscreen-code-action\">\n    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"><title>Enter fullscreen mode<\/title>\n    <path d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\/>\n<\/svg><\/p>\n<p>    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"><title>Exit fullscreen mode<\/title>\n    <path d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\/>\n<\/svg><\/p>\n<\/div>\n<\/div>\n<\/div>\n<p>Works like a charm!<\/p>\n<h2>\n  <a name=\"check-if-the-player-has-won\" href=\"#check-if-the-player-has-won\"><br \/>\n  <\/a><br \/>\n  Check if the player has won<br \/>\n<\/h2>\n<p>To figure out if the player has won, we need to compare the flags set by the player with the positions of the mines. This means, that if there&#8217;s a flag at a position where there&#8217;s no mine, the player hasn&#8217;t won. We can use <code>every<\/code> for this:<\/p>\n<div class=\"highlight js-code-highlight\">\n<pre class=\"highlight javascript\"><code><span class=\"kd\">const<\/span> <span class=\"nx\">checkIfWon<\/span> <span class=\"o\">=<\/span> <span class=\"p\">()<\/span> <span class=\"o\">=&gt;<\/span> <span class=\"p\">{<\/span>\n  <span class=\"k\">return<\/span> <span class=\"nx\">flaggedField<\/span><span class=\"p\">.<\/span><span class=\"nx\">every<\/span><span class=\"p\">(<\/span>\n    <span class=\"p\">(<\/span><span class=\"nx\">row<\/span><span class=\"p\">,<\/span> <span class=\"nx\">y<\/span><span class=\"p\">)<\/span> <span class=\"o\">=&gt;<\/span> <span class=\"nx\">row<\/span><span class=\"p\">.<\/span><span class=\"nx\">every<\/span><span class=\"p\">(<\/span>\n      <span class=\"p\">(<\/span><span class=\"nx\">cell<\/span><span class=\"p\">,<\/span> <span class=\"nx\">x<\/span><span class=\"p\">)<\/span> <span class=\"o\">=&gt;<\/span> <span class=\"p\">{<\/span>\n        <span class=\"k\">return<\/span> <span class=\"p\">(<\/span><span class=\"nx\">cell<\/span> <span class=\"o\">&amp;&amp;<\/span> <span class=\"nx\">field<\/span><span class=\"p\">[<\/span><span class=\"nx\">y<\/span><span class=\"p\">][<\/span><span class=\"nx\">x<\/span><span class=\"p\">]<\/span> <span class=\"o\">===<\/span> <span class=\"dl\">'<\/span><span class=\"s1\">m<\/span><span class=\"dl\">'<\/span><span class=\"p\">)<\/span>\n          <span class=\"o\">||<\/span> <span class=\"p\">(<\/span><span class=\"o\">!<\/span><span class=\"nx\">cell<\/span> <span class=\"o\">&amp;&amp;<\/span> <span class=\"nx\">field<\/span><span class=\"p\">[<\/span><span class=\"nx\">y<\/span><span class=\"p\">][<\/span><span class=\"nx\">x<\/span><span class=\"p\">]<\/span> <span class=\"o\">!==<\/span> <span class=\"dl\">'<\/span><span class=\"s1\">m<\/span><span class=\"dl\">'<\/span><span class=\"p\">)<\/span>\n      <span class=\"p\">})<\/span>\n  <span class=\"p\">)<\/span>\n<span class=\"p\">}<\/span>\n<\/code><\/pre>\n<div class=\"highlight__panel js-actions-panel\">\n<div class=\"highlight__panel-action js-fullscreen-code-action\">\n    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"><title>Enter fullscreen mode<\/title>\n    <path d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\/>\n<\/svg><\/p>\n<p>    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"><title>Exit fullscreen mode<\/title>\n    <path d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\/>\n<\/svg><\/p>\n<\/div>\n<\/div>\n<\/div>\n<p>What this does is that it reduces every row to either <code>true<\/code> or <code>false<\/code> depending if every field matches the condition or not. All the rows are then reduced to a single boolean by simply asking &#8220;are all rows true&#8221;.<\/p>\n<h2>\n  <a name=\"rendering-the-field\" href=\"#rendering-the-field\"><br \/>\n  <\/a><br \/>\n  Rendering the field<br \/>\n<\/h2>\n<p>This will be a bit tricky. A cell can have one of three possible states: Covered, uncovered and flagged. An uncovered cell can either be 0, any number from 1 to 8, or a mine. A cell can also be where the cursor currently is.<\/p>\n<p>We&#8217;re going to use emoji to display the field. First, let&#8217;s define which emojis we&#8217;re going to use for the uncovered cells:<\/p>\n<div class=\"highlight js-code-highlight\">\n<pre class=\"highlight javascript\"><code><span class=\"kd\">const<\/span> <span class=\"nx\">characterMap<\/span> <span class=\"o\">=<\/span> <span class=\"p\">{<\/span>\n  <span class=\"na\">m<\/span><span class=\"p\">:<\/span> <span class=\"dl\">'<\/span><span class=\"s1\">\ud83d\udca3<\/span><span class=\"dl\">'<\/span><span class=\"p\">,<\/span> <span class=\"c1\">\/\/ I kinda developed an aversion to that emoji.<\/span>\n  <span class=\"mi\">0<\/span><span class=\"p\">:<\/span> <span class=\"dl\">'<\/span><span class=\"s1\">\u2b1c<\/span><span class=\"dl\">'<\/span><span class=\"p\">,<\/span>\n  <span class=\"mi\">1<\/span><span class=\"p\">:<\/span> <span class=\"dl\">'<\/span><span class=\"s1\">1\ufe0f\u20e3 <\/span><span class=\"dl\">'<\/span><span class=\"p\">,<\/span>\n  <span class=\"mi\">2<\/span><span class=\"p\">:<\/span> <span class=\"dl\">'<\/span><span class=\"s1\">2\ufe0f\u20e3 <\/span><span class=\"dl\">'<\/span><span class=\"p\">,<\/span>\n  <span class=\"mi\">3<\/span><span class=\"p\">:<\/span> <span class=\"dl\">'<\/span><span class=\"s1\">3\ufe0f\u20e3 <\/span><span class=\"dl\">'<\/span><span class=\"p\">,<\/span>\n  <span class=\"mi\">4<\/span><span class=\"p\">:<\/span> <span class=\"dl\">'<\/span><span class=\"s1\">4\ufe0f\u20e3 <\/span><span class=\"dl\">'<\/span><span class=\"p\">,<\/span>\n  <span class=\"mi\">5<\/span><span class=\"p\">:<\/span> <span class=\"dl\">'<\/span><span class=\"s1\">5\ufe0f\u20e3 <\/span><span class=\"dl\">'<\/span><span class=\"p\">,<\/span>\n  <span class=\"mi\">6<\/span><span class=\"p\">:<\/span> <span class=\"dl\">'<\/span><span class=\"s1\">6\ufe0f\u20e3 <\/span><span class=\"dl\">'<\/span><span class=\"p\">,<\/span>\n  <span class=\"mi\">7<\/span><span class=\"p\">:<\/span> <span class=\"dl\">'<\/span><span class=\"s1\">7\ufe0f\u20e3 <\/span><span class=\"dl\">'<\/span><span class=\"p\">,<\/span>\n  <span class=\"mi\">8<\/span><span class=\"p\">:<\/span> <span class=\"dl\">'<\/span><span class=\"s1\">8\ufe0f\u20e3 <\/span><span class=\"dl\">'<\/span><span class=\"p\">,<\/span>\n<span class=\"p\">}<\/span>\n<\/code><\/pre>\n<div class=\"highlight__panel js-actions-panel\">\n<div class=\"highlight__panel-action js-fullscreen-code-action\">\n    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"><title>Enter fullscreen mode<\/title>\n    <path d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\/>\n<\/svg><\/p>\n<p>    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"><title>Exit fullscreen mode<\/title>\n    <path d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\/>\n<\/svg><\/p>\n<\/div>\n<\/div>\n<\/div>\n<p>Next, we define a function to render the field. It should clear the CLI output first and already render the top and bottom walls:<\/p>\n<div class=\"highlight js-code-highlight\">\n<pre class=\"highlight javascript\"><code><span class=\"kd\">const<\/span> <span class=\"nx\">renderField<\/span> <span class=\"o\">=<\/span> <span class=\"p\">(<\/span><span class=\"nx\">playerX<\/span><span class=\"p\">,<\/span> <span class=\"nx\">playerY<\/span><span class=\"p\">)<\/span> <span class=\"o\">=&gt;<\/span> <span class=\"p\">{<\/span>\n  <span class=\"nx\">console<\/span><span class=\"p\">.<\/span><span class=\"nx\">clear<\/span><span class=\"p\">()<\/span>\n  <span class=\"nx\">console<\/span><span class=\"p\">.<\/span><span class=\"nx\">log<\/span><span class=\"p\">(<\/span><span class=\"dl\">'<\/span><span class=\"s1\">\ud83e\uddf1<\/span><span class=\"dl\">'<\/span><span class=\"p\">.<\/span><span class=\"nx\">repeat<\/span><span class=\"p\">(<\/span><span class=\"nx\">width<\/span> <span class=\"o\">+<\/span> <span class=\"mi\">2<\/span><span class=\"p\">))<\/span>\n\n  <span class=\"c1\">\/\/ ...<\/span>\n\n  <span class=\"nx\">console<\/span><span class=\"p\">.<\/span><span class=\"nx\">log<\/span><span class=\"p\">(<\/span><span class=\"dl\">'<\/span><span class=\"s1\">\ud83e\uddf1<\/span><span class=\"dl\">'<\/span><span class=\"p\">.<\/span><span class=\"nx\">repeat<\/span><span class=\"p\">(<\/span><span class=\"nx\">width<\/span> <span class=\"o\">+<\/span> <span class=\"mi\">2<\/span><span class=\"p\">))<\/span>\n  <span class=\"nx\">console<\/span><span class=\"p\">.<\/span><span class=\"nx\">log<\/span><span class=\"p\">(<\/span><span class=\"dl\">'<\/span><span class=\"s1\">Press ENTER to uncover a field, SPACE to place a flag<\/span><span class=\"dl\">'<\/span><span class=\"p\">)<\/span>\n<span class=\"p\">}<\/span>\n<\/code><\/pre>\n<div class=\"highlight__panel js-actions-panel\">\n<div class=\"highlight__panel-action js-fullscreen-code-action\">\n    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"><title>Enter fullscreen mode<\/title>\n    <path d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\/>\n<\/svg><\/p>\n<p>    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"><title>Exit fullscreen mode<\/title>\n    <path d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\/>\n<\/svg><\/p>\n<\/div>\n<\/div>\n<\/div>\n<p>Then we need to loop over the playing field. We can already add the left and right wall to every row.<\/p>\n<div class=\"highlight js-code-highlight\">\n<pre class=\"highlight javascript\"><code><span class=\"c1\">\/\/ ...<\/span>\n<span class=\"k\">for<\/span> <span class=\"p\">(<\/span><span class=\"kd\">let<\/span> <span class=\"nx\">y<\/span> <span class=\"o\">=<\/span> <span class=\"mi\">0<\/span><span class=\"p\">;<\/span> <span class=\"nx\">y<\/span> <span class=\"o\">&lt;<\/span> <span class=\"nx\">height<\/span><span class=\"p\">;<\/span> <span class=\"nx\">y<\/span><span class=\"o\">++<\/span><span class=\"p\">)<\/span> <span class=\"p\">{<\/span>\n  <span class=\"kd\">let<\/span> <span class=\"nx\">row<\/span> <span class=\"o\">=<\/span> <span class=\"dl\">'<\/span><span class=\"s1\">\ud83e\uddf1<\/span><span class=\"dl\">'<\/span>\n  <span class=\"k\">for<\/span> <span class=\"p\">(<\/span><span class=\"kd\">let<\/span> <span class=\"nx\">x<\/span> <span class=\"o\">=<\/span> <span class=\"mi\">0<\/span><span class=\"p\">;<\/span> <span class=\"nx\">x<\/span> <span class=\"o\">&lt;<\/span> <span class=\"nx\">width<\/span><span class=\"p\">;<\/span> <span class=\"nx\">x<\/span><span class=\"o\">++<\/span><span class=\"p\">)<\/span> <span class=\"p\">{<\/span>\n    <span class=\"c1\">\/\/ ...<\/span>\n  <span class=\"p\">}<\/span>\n  <span class=\"nx\">row<\/span> <span class=\"o\">+=<\/span> <span class=\"dl\">'<\/span><span class=\"s1\">\ud83e\uddf1<\/span><span class=\"dl\">'<\/span>\n  <span class=\"nx\">console<\/span><span class=\"p\">.<\/span><span class=\"nx\">log<\/span><span class=\"p\">(<\/span><span class=\"nx\">row<\/span><span class=\"p\">)<\/span>\n<span class=\"p\">}<\/span>\n<span class=\"c1\">\/\/ ...<\/span>\n<\/code><\/pre>\n<div class=\"highlight__panel js-actions-panel\">\n<div class=\"highlight__panel-action js-fullscreen-code-action\">\n    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"><title>Enter fullscreen mode<\/title>\n    <path d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\/>\n<\/svg><\/p>\n<p>    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"><title>Exit fullscreen mode<\/title>\n    <path d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\/>\n<\/svg><\/p>\n<\/div>\n<\/div>\n<\/div>\n<p>To finish the rendering, we now only need to add the different states for every x and y coordinates:<\/p>\n<div class=\"highlight js-code-highlight\">\n<pre class=\"highlight javascript\"><code><span class=\"k\">for<\/span> <span class=\"p\">(<\/span><span class=\"kd\">let<\/span> <span class=\"nx\">y<\/span> <span class=\"o\">=<\/span> <span class=\"mi\">0<\/span><span class=\"p\">;<\/span> <span class=\"nx\">y<\/span> <span class=\"o\">&lt;<\/span> <span class=\"nx\">height<\/span><span class=\"p\">;<\/span> <span class=\"nx\">y<\/span><span class=\"o\">++<\/span><span class=\"p\">)<\/span> <span class=\"p\">{<\/span>\n  <span class=\"kd\">let<\/span> <span class=\"nx\">row<\/span> <span class=\"o\">=<\/span> <span class=\"dl\">'<\/span><span class=\"s1\">\ud83e\uddf1<\/span><span class=\"dl\">'<\/span>\n  <span class=\"k\">for<\/span> <span class=\"p\">(<\/span><span class=\"kd\">let<\/span> <span class=\"nx\">x<\/span> <span class=\"o\">=<\/span> <span class=\"mi\">0<\/span><span class=\"p\">;<\/span> <span class=\"nx\">x<\/span> <span class=\"o\">&lt;<\/span> <span class=\"nx\">width<\/span><span class=\"p\">;<\/span> <span class=\"nx\">x<\/span><span class=\"o\">++<\/span><span class=\"p\">)<\/span> <span class=\"p\">{<\/span>\n    <span class=\"k\">if<\/span> <span class=\"p\">(<\/span><span class=\"nx\">x<\/span> <span class=\"o\">===<\/span> <span class=\"nx\">playerX<\/span> <span class=\"o\">&amp;&amp;<\/span> <span class=\"nx\">y<\/span> <span class=\"o\">===<\/span> <span class=\"nx\">playerY<\/span><span class=\"p\">)<\/span> <span class=\"p\">{<\/span>\n      <span class=\"nx\">row<\/span> <span class=\"o\">+=<\/span> <span class=\"dl\">'<\/span><span class=\"se\">\\<\/span><span class=\"s1\">x1b[47m<\/span><span class=\"se\">\\<\/span><span class=\"s1\">x1b[30m<\/span><span class=\"dl\">'<\/span>\n    <span class=\"p\">}<\/span>\n\n    <span class=\"k\">if<\/span> <span class=\"p\">(<\/span><span class=\"nx\">flaggedField<\/span><span class=\"p\">[<\/span><span class=\"nx\">y<\/span><span class=\"p\">][<\/span><span class=\"nx\">x<\/span><span class=\"p\">])<\/span> <span class=\"p\">{<\/span>\n      <span class=\"nx\">row<\/span> <span class=\"o\">+=<\/span> <span class=\"dl\">'<\/span><span class=\"s1\">\ud83d\udea9<\/span><span class=\"dl\">'<\/span>\n    <span class=\"p\">}<\/span> <span class=\"k\">else<\/span> <span class=\"k\">if<\/span> <span class=\"p\">(<\/span><span class=\"nx\">uncoveredField<\/span><span class=\"p\">[<\/span><span class=\"nx\">y<\/span><span class=\"p\">][<\/span><span class=\"nx\">x<\/span><span class=\"p\">])<\/span> <span class=\"p\">{<\/span>\n      <span class=\"nx\">row<\/span> <span class=\"o\">+=<\/span> <span class=\"nx\">characterMap<\/span><span class=\"p\">[<\/span><span class=\"nx\">field<\/span><span class=\"p\">[<\/span><span class=\"nx\">y<\/span><span class=\"p\">][<\/span><span class=\"nx\">x<\/span><span class=\"p\">]]<\/span>\n    <span class=\"p\">}<\/span> <span class=\"k\">else<\/span> <span class=\"p\">{<\/span>\n      <span class=\"nx\">row<\/span> <span class=\"o\">+=<\/span> <span class=\"dl\">'<\/span><span class=\"s1\">  <\/span><span class=\"dl\">'<\/span>\n    <span class=\"p\">}<\/span>\n\n    <span class=\"k\">if<\/span> <span class=\"p\">(<\/span><span class=\"nx\">x<\/span> <span class=\"o\">===<\/span> <span class=\"nx\">playerX<\/span> <span class=\"o\">&amp;&amp;<\/span> <span class=\"nx\">y<\/span> <span class=\"o\">===<\/span> <span class=\"nx\">playerY<\/span><span class=\"p\">)<\/span> <span class=\"p\">{<\/span>\n      <span class=\"nx\">row<\/span> <span class=\"o\">+=<\/span> <span class=\"dl\">'<\/span><span class=\"se\">\\<\/span><span class=\"s1\">x1b[0m<\/span><span class=\"dl\">'<\/span>\n    <span class=\"p\">}<\/span>\n  <span class=\"p\">}<\/span>\n\n  <span class=\"nx\">row<\/span> <span class=\"o\">+=<\/span> <span class=\"dl\">'<\/span><span class=\"s1\">\ud83e\uddf1<\/span><span class=\"dl\">'<\/span>\n  <span class=\"nx\">console<\/span><span class=\"p\">.<\/span><span class=\"nx\">log<\/span><span class=\"p\">(<\/span><span class=\"nx\">row<\/span><span class=\"p\">)<\/span>\n<span class=\"p\">}<\/span>\n<\/code><\/pre>\n<div class=\"highlight__panel js-actions-panel\">\n<div class=\"highlight__panel-action js-fullscreen-code-action\">\n    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"><title>Enter fullscreen mode<\/title>\n    <path d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\/>\n<\/svg><\/p>\n<p>    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"><title>Exit fullscreen mode<\/title>\n    <path d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\/>\n<\/svg><\/p>\n<\/div>\n<\/div>\n<\/div>\n<p>You might&#8217;ve noticed the two <code>if<\/code> statements with the weird characters. <code>\\x1b[47m<\/code> gives the CLI a white background for the following text, <code>\\x1b[30m<\/code> makes the following text black. For most CLIs out there, that essentially means inverting the standard color. This is used as an indicator to where the player&#8217;s cursor currently is. <code>\\x1b[0m<\/code> is used to reset these settings, making sure that only the current cell is colored differently.<\/p>\n<h2>\n  <a name=\"uncovering-the-field\" href=\"#uncovering-the-field\"><br \/>\n  <\/a><br \/>\n  Uncovering the field<br \/>\n<\/h2>\n<p>This one will be even trickier. The game rule says that every empty field with no adjacent mines should be uncovered. This can result in any possible shape, really. Such as circles, for example. We would therefore need to find a way around those.<\/p>\n<p>Ideally, the uncovering would kind of &#8220;spread&#8221; around. And a field would first uncover itself and then ask its neighbour to uncover if it could. Sounds like recursion, right?<\/p>\n<p>It absolutely does! This little function does exactly what we want it to do by recursively asking its neighbours to uncover:<\/p>\n<div class=\"highlight js-code-highlight\">\n<pre class=\"highlight javascript\"><code><span class=\"kd\">const<\/span> <span class=\"nx\">uncoverCoords<\/span> <span class=\"o\">=<\/span> <span class=\"p\">(<\/span><span class=\"nx\">x<\/span><span class=\"p\">,<\/span> <span class=\"nx\">y<\/span><span class=\"p\">)<\/span> <span class=\"o\">=&gt;<\/span> <span class=\"p\">{<\/span>\n  <span class=\"c1\">\/\/ Uncover the field by default<\/span>\n  <span class=\"nx\">uncoveredField<\/span><span class=\"p\">[<\/span><span class=\"nx\">y<\/span><span class=\"p\">][<\/span><span class=\"nx\">x<\/span><span class=\"p\">]<\/span> <span class=\"o\">=<\/span> <span class=\"kc\">true<\/span>\n\n  <span class=\"kd\">const<\/span> <span class=\"nx\">neighbours<\/span> <span class=\"o\">=<\/span> <span class=\"nx\">getNeighbouringCoords<\/span><span class=\"p\">(<\/span><span class=\"nx\">x<\/span><span class=\"p\">,<\/span> <span class=\"nx\">y<\/span><span class=\"p\">)<\/span>\n\n  <span class=\"c1\">\/\/ Only if the field is a 0, so if it has no adjacent mines,<\/span>\n  <span class=\"c1\">\/\/ ask its neighbours to uncover.<\/span>\n  <span class=\"k\">if<\/span> <span class=\"p\">(<\/span><span class=\"nx\">field<\/span><span class=\"p\">[<\/span><span class=\"nx\">y<\/span><span class=\"p\">][<\/span><span class=\"nx\">x<\/span><span class=\"p\">]<\/span> <span class=\"o\">===<\/span> <span class=\"mi\">0<\/span><span class=\"p\">)<\/span> <span class=\"p\">{<\/span>\n    <span class=\"nx\">neighbours<\/span><span class=\"p\">.<\/span><span class=\"nx\">forEach<\/span><span class=\"p\">(([<\/span><span class=\"nx\">y<\/span><span class=\"p\">,<\/span> <span class=\"nx\">x<\/span><span class=\"p\">])<\/span> <span class=\"o\">=&gt;<\/span> <span class=\"p\">{<\/span>\n      <span class=\"c1\">\/\/ Only uncover fields that have not yet been uncovered.<\/span>\n      <span class=\"c1\">\/\/ Otherwise we would end up with an infinite loop.<\/span>\n      <span class=\"k\">if<\/span> <span class=\"p\">(<\/span><span class=\"nx\">uncoveredField<\/span><span class=\"p\">[<\/span><span class=\"nx\">y<\/span><span class=\"p\">][<\/span><span class=\"nx\">x<\/span><span class=\"p\">]<\/span> <span class=\"o\">!==<\/span> <span class=\"kc\">true<\/span><span class=\"p\">)<\/span> <span class=\"p\">{<\/span>\n        <span class=\"c1\">\/\/ Recursive call.<\/span>\n        <span class=\"nx\">uncoverCoords<\/span><span class=\"p\">(<\/span><span class=\"nx\">x<\/span><span class=\"p\">,<\/span> <span class=\"nx\">y<\/span><span class=\"p\">)<\/span>\n      <span class=\"p\">}<\/span>\n    <span class=\"p\">})<\/span>\n  <span class=\"p\">}<\/span>\n<span class=\"p\">}<\/span>\n<\/code><\/pre>\n<div class=\"highlight__panel js-actions-panel\">\n<div class=\"highlight__panel-action js-fullscreen-code-action\">\n    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"><title>Enter fullscreen mode<\/title>\n    <path d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\/>\n<\/svg><\/p>\n<p>    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"><title>Exit fullscreen mode<\/title>\n    <path d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\/>\n<\/svg><\/p>\n<\/div>\n<\/div>\n<\/div>\n<p>Now, for the last part, we need&#8230;<\/p>\n<h2>\n  <a name=\"user-input\" href=\"#user-input\"><br \/>\n  <\/a><br \/>\n  User input<br \/>\n<\/h2>\n<p>Home stretch! Almost there. We can soon enjoy the little bomb emoji telling us that we&#8217;re unlucky for the <em><strong>thirteenth time in a row, why am I so goshdarn unlucky??<\/strong><\/em> <\/p>\n<p>Let&#8217;s define the controls first: Navigating the cursor can be done via keyboard. A press on <code>enter<\/code> would trigger the uncovering, a press on <code>space<\/code> would place and remove a flag.<\/p>\n<p>In order to know if we still accept keyboard input, we need to keep track if the user has won or lost the game. Also, we need to keep track of the cursor coordinates:<\/p>\n<div class=\"highlight js-code-highlight\">\n<pre class=\"highlight javascript\"><code><span class=\"kd\">let<\/span> <span class=\"nx\">playerX<\/span> <span class=\"o\">=<\/span> <span class=\"mi\">0<\/span>\n<span class=\"kd\">let<\/span> <span class=\"nx\">playerY<\/span> <span class=\"o\">=<\/span> <span class=\"mi\">0<\/span>\n<span class=\"kd\">let<\/span> <span class=\"nx\">hasLost<\/span> <span class=\"o\">=<\/span> <span class=\"kc\">false<\/span>\n<span class=\"kd\">let<\/span> <span class=\"nx\">hasWon<\/span> <span class=\"o\">=<\/span> <span class=\"kc\">false<\/span>\n<\/code><\/pre>\n<div class=\"highlight__panel js-actions-panel\">\n<div class=\"highlight__panel-action js-fullscreen-code-action\">\n    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"><title>Enter fullscreen mode<\/title>\n    <path d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\/>\n<\/svg><\/p>\n<p>    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"><title>Exit fullscreen mode<\/title>\n    <path d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\/>\n<\/svg><\/p>\n<\/div>\n<\/div>\n<\/div>\n<p>Then we render the field initially:<\/p>\n<div class=\"highlight js-code-highlight\">\n<pre class=\"highlight javascript\"><code><span class=\"nx\">renderField<\/span><span class=\"p\">(<\/span><span class=\"nx\">playerX<\/span><span class=\"p\">,<\/span> <span class=\"nx\">playerY<\/span><span class=\"p\">)<\/span>\n<\/code><\/pre>\n<div class=\"highlight__panel js-actions-panel\">\n<div class=\"highlight__panel-action js-fullscreen-code-action\">\n    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"><title>Enter fullscreen mode<\/title>\n    <path d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\/>\n<\/svg><\/p>\n<p>    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"><title>Exit fullscreen mode<\/title>\n    <path d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\/>\n<\/svg><\/p>\n<\/div>\n<\/div>\n<\/div>\n<p>To get the users keyboard input, we can use Node&#8217;s built-in <code>readline<\/code> module. <code>readline<\/code> allows us to &#8220;convert&#8221; key stroke events to events on <code>process.stdin<\/code>. We then listen to the standard input&#8217;s key stroke events (that&#8217;s usually done when using &#8220;raw mode&#8221;) and react to those:<\/p>\n<div class=\"highlight js-code-highlight\">\n<pre class=\"highlight javascript\"><code><span class=\"kd\">const<\/span> <span class=\"nx\">readlineModule<\/span> <span class=\"o\">=<\/span> <span class=\"nx\">require<\/span><span class=\"p\">(<\/span><span class=\"dl\">'<\/span><span class=\"s1\">readline<\/span><span class=\"dl\">'<\/span><span class=\"p\">)<\/span>\n<span class=\"nx\">readlineModule<\/span><span class=\"p\">.<\/span><span class=\"nx\">emitKeypressEvents<\/span><span class=\"p\">(<\/span><span class=\"nx\">process<\/span><span class=\"p\">.<\/span><span class=\"nx\">stdin<\/span><span class=\"p\">)<\/span>\n<span class=\"nx\">process<\/span><span class=\"p\">.<\/span><span class=\"nx\">stdin<\/span><span class=\"p\">.<\/span><span class=\"nx\">setRawMode<\/span><span class=\"p\">(<\/span><span class=\"kc\">true<\/span><span class=\"p\">)<\/span>\n\n<span class=\"nx\">process<\/span><span class=\"p\">.<\/span><span class=\"nx\">stdin<\/span><span class=\"p\">.<\/span><span class=\"nx\">on<\/span><span class=\"p\">(<\/span><span class=\"dl\">'<\/span><span class=\"s1\">keypress<\/span><span class=\"dl\">'<\/span><span class=\"p\">,<\/span> <span class=\"p\">(<\/span><span class=\"nx\">character<\/span><span class=\"p\">,<\/span> <span class=\"nx\">key<\/span><span class=\"p\">)<\/span> <span class=\"o\">=&gt;<\/span> <span class=\"p\">{<\/span>\n  <span class=\"c1\">\/\/ Do stuff<\/span>\n<span class=\"p\">})<\/span>\n<\/code><\/pre>\n<div class=\"highlight__panel js-actions-panel\">\n<div class=\"highlight__panel-action js-fullscreen-code-action\">\n    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"><title>Enter fullscreen mode<\/title>\n    <path d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\/>\n<\/svg><\/p>\n<p>    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"><title>Exit fullscreen mode<\/title>\n    <path d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\/>\n<\/svg><\/p>\n<\/div>\n<\/div>\n<\/div>\n<p><em>However<\/em>, since the standard input is in raw mode, Ctrl+C to terminate the current script doesn&#8217;t work. Holding Ctrl and pressing C is also considered a key stroke. We therefore need our own implementation of that:<\/p>\n<div class=\"highlight js-code-highlight\">\n<pre class=\"highlight javascript\"><code><span class=\"c1\">\/\/ ...<\/span>\n<span class=\"nx\">process<\/span><span class=\"p\">.<\/span><span class=\"nx\">stdin<\/span><span class=\"p\">.<\/span><span class=\"nx\">on<\/span><span class=\"p\">(<\/span><span class=\"dl\">'<\/span><span class=\"s1\">keypress<\/span><span class=\"dl\">'<\/span><span class=\"p\">,<\/span> <span class=\"p\">(<\/span><span class=\"nx\">character<\/span><span class=\"p\">,<\/span> <span class=\"nx\">key<\/span><span class=\"p\">)<\/span> <span class=\"o\">=&gt;<\/span> <span class=\"p\">{<\/span>\n  <span class=\"c1\">\/\/ More stuff<\/span>\n\n  <span class=\"k\">if<\/span> <span class=\"p\">(<\/span><span class=\"nx\">key<\/span><span class=\"p\">.<\/span><span class=\"nx\">name<\/span> <span class=\"o\">===<\/span> <span class=\"dl\">'<\/span><span class=\"s1\">c<\/span><span class=\"dl\">'<\/span> <span class=\"o\">&amp;&amp;<\/span> <span class=\"nx\">key<\/span><span class=\"p\">.<\/span><span class=\"nx\">ctrl<\/span><span class=\"p\">)<\/span> <span class=\"p\">{<\/span>\n    <span class=\"nx\">process<\/span><span class=\"p\">.<\/span><span class=\"nx\">exit<\/span><span class=\"p\">(<\/span><span class=\"mi\">0<\/span><span class=\"p\">)<\/span>\n  <span class=\"p\">}<\/span>\n<span class=\"p\">})<\/span>\n<\/code><\/pre>\n<div class=\"highlight__panel js-actions-panel\">\n<div class=\"highlight__panel-action js-fullscreen-code-action\">\n    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"><title>Enter fullscreen mode<\/title>\n    <path d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\/>\n<\/svg><\/p>\n<p>    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"><title>Exit fullscreen mode<\/title>\n    <path d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\/>\n<\/svg><\/p>\n<\/div>\n<\/div>\n<\/div>\n<p>The <code>key<\/code> object tells us the name of the key pressed in lower case and has flags for if Ctrl or Shift have been pressed.<\/p>\n<p>Now, let&#8217;s add all of the arrow keys, space bar and enter inputs:<\/p>\n<div class=\"highlight js-code-highlight\">\n<pre class=\"highlight javascript\"><code><span class=\"nx\">process<\/span><span class=\"p\">.<\/span><span class=\"nx\">stdin<\/span><span class=\"p\">.<\/span><span class=\"nx\">on<\/span><span class=\"p\">(<\/span><span class=\"dl\">'<\/span><span class=\"s1\">keypress<\/span><span class=\"dl\">'<\/span><span class=\"p\">,<\/span> <span class=\"p\">(<\/span><span class=\"nx\">character<\/span><span class=\"p\">,<\/span> <span class=\"nx\">key<\/span><span class=\"p\">)<\/span> <span class=\"o\">=&gt;<\/span> <span class=\"p\">{<\/span>\n  <span class=\"k\">if<\/span> <span class=\"p\">(<\/span><span class=\"o\">!<\/span><span class=\"nx\">hasLost<\/span> <span class=\"o\">&amp;&amp;<\/span> <span class=\"o\">!<\/span><span class=\"nx\">hasWon<\/span><span class=\"p\">)<\/span> <span class=\"p\">{<\/span>\n    <span class=\"c1\">\/\/ Do not move past right wall<\/span>\n    <span class=\"k\">if<\/span> <span class=\"p\">(<\/span><span class=\"nx\">key<\/span><span class=\"p\">.<\/span><span class=\"nx\">name<\/span> <span class=\"o\">===<\/span> <span class=\"dl\">'<\/span><span class=\"s1\">right<\/span><span class=\"dl\">'<\/span> <span class=\"o\">&amp;&amp;<\/span> <span class=\"nx\">playerX<\/span> <span class=\"o\">&lt;<\/span> <span class=\"nx\">width<\/span> <span class=\"o\">-<\/span> <span class=\"mi\">1<\/span><span class=\"p\">)<\/span> <span class=\"p\">{<\/span>\n      <span class=\"nx\">playerX<\/span><span class=\"o\">++<\/span>\n    <span class=\"p\">}<\/span>\n\n    <span class=\"c1\">\/\/ Do not move past left wall<\/span>\n    <span class=\"k\">if<\/span> <span class=\"p\">(<\/span><span class=\"nx\">key<\/span><span class=\"p\">.<\/span><span class=\"nx\">name<\/span> <span class=\"o\">===<\/span> <span class=\"dl\">'<\/span><span class=\"s1\">left<\/span><span class=\"dl\">'<\/span> <span class=\"o\">&amp;&amp;<\/span> <span class=\"nx\">playerX<\/span> <span class=\"o\">&gt;<\/span> <span class=\"mi\">0<\/span><span class=\"p\">)<\/span> <span class=\"p\">{<\/span>\n      <span class=\"nx\">playerX<\/span><span class=\"o\">--<\/span>\n    <span class=\"p\">}<\/span>\n\n    <span class=\"c1\">\/\/ Do not move past down wall<\/span>\n    <span class=\"k\">if<\/span> <span class=\"p\">(<\/span><span class=\"nx\">key<\/span><span class=\"p\">.<\/span><span class=\"nx\">name<\/span> <span class=\"o\">===<\/span> <span class=\"dl\">'<\/span><span class=\"s1\">down<\/span><span class=\"dl\">'<\/span> <span class=\"o\">&amp;&amp;<\/span> <span class=\"nx\">playerY<\/span> <span class=\"o\">&lt;<\/span> <span class=\"nx\">height<\/span> <span class=\"o\">-<\/span> <span class=\"mi\">1<\/span><span class=\"p\">)<\/span> <span class=\"p\">{<\/span>\n      <span class=\"nx\">playerY<\/span><span class=\"o\">++<\/span>\n    <span class=\"p\">}<\/span>\n\n    <span class=\"c1\">\/\/ Do not move past up wall<\/span>\n    <span class=\"k\">if<\/span> <span class=\"p\">(<\/span><span class=\"nx\">key<\/span><span class=\"p\">.<\/span><span class=\"nx\">name<\/span> <span class=\"o\">===<\/span> <span class=\"dl\">'<\/span><span class=\"s1\">up<\/span><span class=\"dl\">'<\/span> <span class=\"o\">&amp;&amp;<\/span> <span class=\"nx\">playerY<\/span> <span class=\"o\">&gt;<\/span> <span class=\"mi\">0<\/span><span class=\"p\">)<\/span> <span class=\"p\">{<\/span>\n      <span class=\"nx\">playerY<\/span><span class=\"o\">--<\/span>\n    <span class=\"p\">}<\/span>\n\n    <span class=\"c1\">\/\/ Uncovering fields<\/span>\n    <span class=\"k\">if<\/span> <span class=\"p\">(<\/span><span class=\"nx\">key<\/span><span class=\"p\">.<\/span><span class=\"nx\">name<\/span> <span class=\"o\">===<\/span> <span class=\"dl\">'<\/span><span class=\"s1\">return<\/span><span class=\"dl\">'<\/span><span class=\"p\">)<\/span> <span class=\"p\">{<\/span>\n      <span class=\"nx\">uncoverCoords<\/span><span class=\"p\">(<\/span><span class=\"nx\">playerX<\/span><span class=\"p\">,<\/span> <span class=\"nx\">playerY<\/span><span class=\"p\">)<\/span>\n\n      <span class=\"c1\">\/\/ The player seems to have found a mine<\/span>\n      <span class=\"k\">if<\/span> <span class=\"p\">(<\/span><span class=\"nx\">field<\/span><span class=\"p\">[<\/span><span class=\"nx\">playerY<\/span><span class=\"p\">][<\/span><span class=\"nx\">playerX<\/span><span class=\"p\">]<\/span> <span class=\"o\">===<\/span> <span class=\"dl\">'<\/span><span class=\"s1\">m<\/span><span class=\"dl\">'<\/span><span class=\"p\">)<\/span> <span class=\"p\">{<\/span>\n        <span class=\"nx\">hasLost<\/span> <span class=\"o\">=<\/span> <span class=\"kc\">true<\/span>\n\n        <span class=\"c1\">\/\/ Uncover all fields in case the player has lost<\/span>\n        <span class=\"nx\">uncoveredField<\/span> <span class=\"o\">=<\/span> <span class=\"nb\">Array<\/span><span class=\"p\">(<\/span><span class=\"nx\">height<\/span><span class=\"p\">).<\/span><span class=\"nx\">fill<\/span><span class=\"p\">([]).<\/span><span class=\"nx\">map<\/span><span class=\"p\">(()<\/span> <span class=\"o\">=&gt;<\/span> <span class=\"nb\">Array<\/span><span class=\"p\">(<\/span><span class=\"nx\">width<\/span><span class=\"p\">).<\/span><span class=\"nx\">fill<\/span><span class=\"p\">(<\/span><span class=\"kc\">true<\/span><span class=\"p\">))<\/span>\n      <span class=\"p\">}<\/span>\n    <span class=\"p\">}<\/span>\n\n    <span class=\"c1\">\/\/ Placing a flag<\/span>\n    <span class=\"k\">if<\/span> <span class=\"p\">(<\/span><span class=\"nx\">key<\/span><span class=\"p\">.<\/span><span class=\"nx\">name<\/span> <span class=\"o\">===<\/span> <span class=\"dl\">'<\/span><span class=\"s1\">space<\/span><span class=\"dl\">'<\/span><span class=\"p\">)<\/span> <span class=\"p\">{<\/span>\n      <span class=\"nx\">flaggedField<\/span><span class=\"p\">[<\/span><span class=\"nx\">playerY<\/span><span class=\"p\">][<\/span><span class=\"nx\">playerX<\/span><span class=\"p\">]<\/span> <span class=\"o\">=<\/span> <span class=\"o\">!<\/span><span class=\"nx\">flaggedField<\/span><span class=\"p\">[<\/span><span class=\"nx\">playerY<\/span><span class=\"p\">][<\/span><span class=\"nx\">playerX<\/span><span class=\"p\">]<\/span>\n\n      <span class=\"nx\">hasWon<\/span> <span class=\"o\">=<\/span> <span class=\"nx\">checkIfWon<\/span><span class=\"p\">()<\/span>\n    <span class=\"p\">}<\/span>\n  <span class=\"p\">}<\/span>\n\n  <span class=\"c1\">\/\/ Show the player what just happened on the field<\/span>\n  <span class=\"nx\">renderField<\/span><span class=\"p\">(<\/span><span class=\"nx\">playerX<\/span><span class=\"p\">,<\/span> <span class=\"nx\">playerY<\/span><span class=\"p\">)<\/span>\n\n  <span class=\"k\">if<\/span> <span class=\"p\">(<\/span><span class=\"nx\">hasLost<\/span><span class=\"p\">)<\/span> <span class=\"p\">{<\/span>\n    <span class=\"nx\">console<\/span><span class=\"p\">.<\/span><span class=\"nx\">log<\/span><span class=\"p\">(<\/span><span class=\"dl\">'<\/span><span class=\"s1\">Lost :(<\/span><span class=\"dl\">'<\/span><span class=\"p\">)<\/span>\n  <span class=\"p\">}<\/span>\n\n  <span class=\"k\">if<\/span> <span class=\"p\">(<\/span><span class=\"nx\">hasWon<\/span><span class=\"p\">)<\/span> <span class=\"p\">{<\/span>\n    <span class=\"nx\">console<\/span><span class=\"p\">.<\/span><span class=\"nx\">log<\/span><span class=\"p\">(<\/span><span class=\"dl\">'<\/span><span class=\"s1\">Won :)<\/span><span class=\"dl\">'<\/span><span class=\"p\">)<\/span>\n  <span class=\"p\">}<\/span>\n\n  <span class=\"k\">if<\/span> <span class=\"p\">(<\/span><span class=\"nx\">key<\/span><span class=\"p\">.<\/span><span class=\"nx\">name<\/span> <span class=\"o\">===<\/span> <span class=\"dl\">'<\/span><span class=\"s1\">c<\/span><span class=\"dl\">'<\/span> <span class=\"o\">&amp;&amp;<\/span> <span class=\"nx\">key<\/span><span class=\"p\">.<\/span><span class=\"nx\">ctrl<\/span><span class=\"p\">)<\/span> <span class=\"p\">{<\/span>\n    <span class=\"nx\">process<\/span><span class=\"p\">.<\/span><span class=\"nx\">exit<\/span><span class=\"p\">(<\/span><span class=\"mi\">0<\/span><span class=\"p\">)<\/span>\n  <span class=\"p\">}<\/span>\n<span class=\"p\">})<\/span>\n<\/code><\/pre>\n<div class=\"highlight__panel js-actions-panel\">\n<div class=\"highlight__panel-action js-fullscreen-code-action\">\n    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"><title>Enter fullscreen mode<\/title>\n    <path d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\/>\n<\/svg><\/p>\n<p>    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"><title>Exit fullscreen mode<\/title>\n    <path d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\/>\n<\/svg><\/p>\n<\/div>\n<\/div>\n<\/div>\n<p>Aaaand we&#8217;re done!<\/p>\n<h2>\n  <a name=\"i-wanna-play-too\" href=\"#i-wanna-play-too\"><br \/>\n  <\/a><br \/>\n  I wanna play, too!<br \/>\n<\/h2>\n<p>You can, actually! I made it open source:<\/p>\n<div class=\"ltag-github-readme-tag\">\n<div class=\"readme-overview\">\n<h3>\n      Minesweeper, but on the CLI!<br \/>\n    <\/h3>\n<\/p><\/div>\n<div class=\"ltag-github-body\">\n<div id=\"readme\" class=\"md\" data-path=\"README.md\">\n<article class=\"markdown-body entry-content container-lg\" itemprop=\"text\">\n<p dir=\"auto\">A simple emoji based Minesweeper clone, playable on the CLI!<\/p>\n<p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https:\/\/raw.githubusercontent.com\/thormeier\/minesweeper.js\/main\/minesweeper.png\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--6_w36Njb--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/raw.githubusercontent.com\/thormeier\/minesweeper.js\/main\/minesweeper.png\" alt=\"A screenshot of the Minesweeper.js CLI\" style=\"max-width: 100%;\" loading=\"lazy\"\/><\/a><\/p>\n<h2 dir=\"auto\">\nUsage<\/h2>\n<p dir=\"auto\">Download by cloning this repository, start it by running <code>node minesweeper.js<\/code> or executing <code>npx minesweeper-cli.js<\/code><\/p>\n<h2 dir=\"auto\">\nArguments<\/h2>\n<ul dir=\"auto\">\n<li>\n<code>--width=number<\/code> &#8211; Width of the field, defaults to <code>8<\/code>\n<\/li>\n<li>\n<code>--height=number<\/code> &#8211; Height of the field, defaults to <code>8<\/code>\n<\/li>\n<li>\n<code>--mines=number<\/code> &#8211; Number of mines to place on the board, defaults to <code>10<\/code>\n<\/li>\n<\/ul>\n<h2 dir=\"auto\">\nDetailed explanation<\/h2>\n<p dir=\"auto\">See my post over on <code>dev.to\/thormeier<\/code>!<\/p>\n<h2 dir=\"auto\">\nLicense<\/h2>\n<p dir=\"auto\">MIT<\/p>\n<\/article>\n<\/div><\/div>\n<\/div>\n<p>You can also play by executing <code>npx minesweeper-cli.js<\/code><\/p>\n<p>Enjoy!<\/p>\n<hr\/>\n<p><em>I hope you enjoyed reading this article as much as I enjoyed writing it! If so, leave a<\/em> \u2764\ufe0f <em>or a<\/em> \ud83e\udd84<em>! I write tech articles in my free time and like to drink coffee every once in a while.<\/em><\/p>\n<p><em>If you want to support my efforts,<\/em> <a href=\"http:\/\/buymeacoffee.com\/pthormeier\"><em>you can offer me a coffee<\/em> \u2615<\/a> <em>or<\/em> <a href=\"https:\/\/twitter.com\/pthormeier\"><em>follow me on Twitter<\/em> \ud83d\udc26<\/a><em>!<\/em> <em>You can also support me directly via <a href=\"https:\/\/www.paypal.me\/pthormeier\">Paypal<\/a>!<\/em><\/p>\n<p><a href=\"http:\/\/buymeacoffee.com\/pthormeier\"><img src=\"https:\/\/res.cloudinary.com\/practicaldev\/image\/fetch\/s--kc4mYYLu--\/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880\/https:\/\/dev-to-uploads.s3.amazonaws.com\/i\/x55hp6jopwyy161d8e2u.png\" alt=\"Buy me a coffee button\" loading=\"lazy\" width=\"262\" height=\"60\"\/><\/a><\/p>\n<\/p><\/div>\n<p><script async src=\"\/\/platform.twitter.com\/widgets.js\" charset=\"utf-8\"><\/script><br \/>\n<br \/><\/p>\n","protected":false},"excerpt":{"rendered":"<p>(Cover photo by Flickr user FolsomNatural) Hands up &#8211; who has played this absolute classic for hours on end? \ud83d\ude4b I remember playing it as a kid. There&#8217;s a myriad of different implementations, even 3D versions of it. Heck, I even play it today from time to time. So why not build our own version &hellip;<\/p>\n<p class=\"read-more\"> <a class=\"\" href=\"http:\/\/localhost\/wordpress\/lets-have-a-blast-of-fun-how-to-build-a-minesweeper-clone-for-the-cli-with-nodejs-%f0%9f%92%a3%f0%9f%94%8d\/\"> <span class=\"screen-reader-text\">Let&#8217;s have a blast of fun! How to build a Minesweeper clone for the CLI with NodeJS \ud83d\udca3\ud83d\udd0d<\/span> Read More &raquo;<\/a><\/p>\n","protected":false},"author":1,"featured_media":1507,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"site-sidebar-layout":"default","site-content-layout":"default","ast-main-header-display":"","ast-hfb-above-header-display":"","ast-hfb-below-header-display":"","ast-hfb-mobile-header-display":"","site-post-title":"","ast-breadcrumbs-content":"","ast-featured-img":"","footer-sml-layout":"","theme-transparent-header-meta":"","adv-header-id-meta":"","stick-header-meta":"","header-above-stick-meta":"","header-main-stick-meta":"","header-below-stick-meta":""},"categories":[1],"tags":[],"_links":{"self":[{"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/posts\/1506"}],"collection":[{"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/comments?post=1506"}],"version-history":[{"count":0,"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/posts\/1506\/revisions"}],"wp:featuredmedia":[{"embeddable":true,"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/media\/1507"}],"wp:attachment":[{"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/media?parent=1506"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/categories?post=1506"},{"taxonomy":"post_tag","embeddable":true,"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/tags?post=1506"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}