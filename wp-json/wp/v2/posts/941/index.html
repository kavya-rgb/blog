{"id":941,"date":"2022-03-09T10:29:14","date_gmt":"2022-03-09T10:29:14","guid":{"rendered":"http:\/\/localhost\/wordpress\/how-i-built-and-rewrote-the-css-auditors-website\/"},"modified":"2022-03-09T10:29:14","modified_gmt":"2022-03-09T10:29:14","slug":"how-i-built-and-rewrote-the-css-auditors-website","status":"publish","type":"post","link":"http:\/\/localhost\/wordpress\/how-i-built-and-rewrote-the-css-auditors-website\/","title":{"rendered":"How I built and rewrote the CSS Auditors website"},"content":{"rendered":"<p> <br \/>\n<\/p>\n<div data-article-id=\"1017172\" id=\"article-body\">\n<p>Last year I started this website. It was supposed to be my favorite side project, but instead, it became my nightmare. Let me tell you why and how I got to the right track.<\/p>\n<h2>\n  <a name=\"background\" href=\"#background\"><br \/>\n  <\/a><br \/>\n  Background<br \/>\n<\/h2>\n<p>The idea about this site didn\u2019t come over the night. I remember how excited I was when I saw <a href=\"https:\/\/www.projectwallace.com\/\">The Project Wallace<\/a> for the first time. I thought it was so cool, and I should somehow use it in my favor. The problem was I couldn\u2019t figure out how.<\/p>\n<p>Nothing really happened until I completed <a href=\"https:\/\/boagworld.com\/products\/finding-clients\/\">Paul Boag&#8217;s masterclass \u201cFinding clients\u201d<\/a>. Paul Boag advises combining favorite hobbies, interests, passions, and professional skills to get the perfect client. Or something like that. That made me think about my strongest programming skill, CSS, and my interest in sports, to be more precise, in football. So it didn\u2019t take too long when I came up with the project: I will audit all football clubs\u2019 websites CSS and write about my findings.<\/p>\n<h2>\n  <a name=\"early-days\" href=\"#early-days\"><br \/>\n  <\/a><br \/>\n  Early days<br \/>\n<\/h2>\n<p>Being the world-class talent I am, I didn\u2019t want to audit these websites manually, meaning I didn\u2019t want to enter each site in The Project Wallace. Instead, I wanted to do it programmatically. So, I started to write these scripts that will scrape all the data about CSS that I could think of: from file sizes to code coverage to warnings and errors. Once I had all the data, I needed to analyze the data, add some graphs, and write the reports.<\/p>\n<p>Since I decided to use 11ty as my static site generator, I used Node.js scripts to generate tables and graphs and then load them inside 11ty. I created new Liquid filters, and then all I needed to do was use this new shortcode to display graphs and tables. Here\u2019s the graph example:<\/p>\n<div class=\"highlight js-code-highlight\">\n<pre class=\"highlight javascript\"><code><span class=\"kd\">const<\/span> <span class=\"nx\">charts<\/span> <span class=\"o\">=<\/span> <span class=\"p\">(<\/span><span class=\"nx\">str<\/span><span class=\"p\">,<\/span> <span class=\"nx\">object<\/span><span class=\"p\">,<\/span> <span class=\"nx\">type<\/span><span class=\"p\">)<\/span> <span class=\"o\">=&gt;<\/span> <span class=\"p\">{<\/span>\n  <span class=\"kd\">const<\/span> <span class=\"nx\">key<\/span> <span class=\"o\">=<\/span> <span class=\"s2\">`<\/span><span class=\"p\">${<\/span><span class=\"nx\">object<\/span><span class=\"p\">}<\/span><span class=\"s2\">-chart`<\/span>\n\n  <span class=\"k\">if<\/span><span class=\"p\">(<\/span><span class=\"o\">!<\/span><span class=\"nx\">globalVars<\/span><span class=\"p\">.<\/span><span class=\"nx\">hasOwnProperty<\/span><span class=\"p\">(<\/span><span class=\"nx\">key<\/span><span class=\"p\">))<\/span> <span class=\"p\">{<\/span>\n    <span class=\"nx\">globalVars<\/span><span class=\"p\">[<\/span><span class=\"nx\">key<\/span><span class=\"p\">]<\/span> <span class=\"o\">=<\/span> <span class=\"s2\">`window.Highcharts.chart('<\/span><span class=\"p\">${<\/span><span class=\"nx\">str<\/span><span class=\"p\">}<\/span><span class=\"s2\">', <\/span><span class=\"p\">${<\/span><span class=\"nx\">variable<\/span><span class=\"p\">(<\/span><span class=\"dl\">'<\/span><span class=\"s1\">$html<\/span><span class=\"dl\">'<\/span> <span class=\"o\">+<\/span> <span class=\"nx\">str<\/span><span class=\"p\">,<\/span> <span class=\"nx\">object<\/span><span class=\"p\">,<\/span> <span class=\"nx\">type<\/span><span class=\"p\">)}<\/span><span class=\"s2\">);`<\/span>\n  <span class=\"p\">}<\/span> <span class=\"k\">else<\/span> <span class=\"p\">{<\/span>\n    <span class=\"nx\">globalVars<\/span><span class=\"p\">[<\/span><span class=\"nx\">key<\/span><span class=\"p\">]<\/span> <span class=\"o\">+=<\/span> <span class=\"s2\">`\\nwindow.Highcharts.chart('<\/span><span class=\"p\">${<\/span><span class=\"nx\">str<\/span><span class=\"p\">}<\/span><span class=\"s2\">', <\/span><span class=\"p\">${<\/span><span class=\"nx\">variable<\/span><span class=\"p\">(<\/span><span class=\"dl\">'<\/span><span class=\"s1\">$html<\/span><span class=\"dl\">'<\/span> <span class=\"o\">+<\/span> <span class=\"nx\">str<\/span><span class=\"p\">,<\/span> <span class=\"nx\">object<\/span><span class=\"p\">,<\/span> <span class=\"nx\">type<\/span><span class=\"p\">)}<\/span><span class=\"s2\">);`<\/span>\n  <span class=\"p\">}<\/span>\n<span class=\"p\">}<\/span>\n\n<span class=\"nx\">eleventyConfig<\/span><span class=\"p\">.<\/span><span class=\"nx\">addLiquidFilter<\/span><span class=\"p\">(<\/span><span class=\"dl\">'<\/span><span class=\"s1\">chartize<\/span><span class=\"dl\">'<\/span><span class=\"p\">,<\/span> <span class=\"p\">(<\/span><span class=\"nx\">str<\/span><span class=\"p\">,<\/span> <span class=\"nx\">object<\/span><span class=\"p\">,<\/span> <span class=\"nx\">type<\/span><span class=\"p\">)<\/span> <span class=\"o\">=&gt;<\/span> <span class=\"p\">{<\/span>\n  <span class=\"nx\">charts<\/span><span class=\"p\">(<\/span><span class=\"nx\">str<\/span><span class=\"p\">,<\/span> <span class=\"nx\">object<\/span><span class=\"p\">,<\/span> <span class=\"nx\">type<\/span><span class=\"p\">)<\/span>\n\n  <span class=\"k\">return<\/span> <span class=\"s2\">`&lt;div class=\"chart\" id=\"<\/span><span class=\"p\">${<\/span><span class=\"nx\">str<\/span><span class=\"p\">}<\/span><span class=\"s2\">\"&gt;&lt;\/div&gt;`<\/span>\n<span class=\"p\">})<\/span>\n<\/code><\/pre>\n<div class=\"highlight__panel js-actions-panel\">\n<div class=\"highlight__panel-action js-fullscreen-code-action\">\n    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"><title>Enter fullscreen mode<\/title>\n    <path d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\/>\n<\/svg><\/p>\n<p>    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"><title>Exit fullscreen mode<\/title>\n    <path d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\/>\n<\/svg><\/p>\n<\/div>\n<\/div>\n<\/div>\n<div class=\"highlight js-code-highlight\">\n<pre class=\"highlight liquid\"><code><span class=\"p\">{{<\/span><span class=\"w\"> <\/span><span class=\"nv\">elem<\/span><span class=\"p\">.<\/span><span class=\"nv\">chart<\/span><span class=\"p\">.<\/span><span class=\"nv\">item<\/span><span class=\"w\"> <\/span><span class=\"p\">|<\/span><span class=\"w\"> <\/span><span class=\"nf\">chartize<\/span><span class=\"p\">:<\/span><span class=\"w\"> <\/span><span class=\"nv\">object<\/span><span class=\"p\">,<\/span><span class=\"w\"> <\/span><span class=\"nv\">elem<\/span><span class=\"p\">.<\/span><span class=\"nv\">chart<\/span><span class=\"p\">.<\/span><span class=\"nv\">type<\/span><span class=\"w\"> <\/span><span class=\"p\">}}<\/span>\n<\/code><\/pre>\n<div class=\"highlight__panel js-actions-panel\">\n<div class=\"highlight__panel-action js-fullscreen-code-action\">\n    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"><title>Enter fullscreen mode<\/title>\n    <path d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\/>\n<\/svg><\/p>\n<p>    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"><title>Exit fullscreen mode<\/title>\n    <path d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\/>\n<\/svg><\/p>\n<\/div>\n<\/div>\n<\/div>\n<p>I can\u2019t even figure out this code, and I wrote it last year. \ud83e\udd2f<\/p>\n<p>An additional problem was these reports were markdown files, but I used only the frontmatter part of the markdown. I created sections for text, graphs, tables, additional info like the author\u2019s bio and social shares. That made the frontmatter part quite repetitive and ugly because of the indents. When my friend Ivan wanted to write the following report, he had many problems with the frontmatter syntax. I had to jump in and format everything.<\/p>\n<p>After this second report, I didn\u2019t want to return to the project for months. Or, when I eventually did, I gave up because I couldn\u2019t believe that I created this monster that even I had problems using.<\/p>\n<p>A new football season started, some clubs left the league, and some new ones were promoted. So, going forward with the reports seemed even more challenging and meaningless.<\/p>\n<h2>\n  <a name=\"new-days\" href=\"#new-days\"><br \/>\n  <\/a><br \/>\n  New days<br \/>\n<\/h2>\n<p>Sometime this winter, I started learning more and more about 11ty and its possibilities. It was the time when I unfollowed everyone on Twitter (more than two thousand accounts). One of the first persons I followed back was <a href=\"https:\/\/twitter.com\/zachleat\">Zach Leatherman<\/a> and his project, <a href=\"https:\/\/twitter.com\/eleven_ty\">11ty<\/a>. I saw a lot of retweets, articles, and posts about 11ty.<\/p>\n<p>The breakthrough moment was when I figured that I didn\u2019t need Node.js to give me the HTML code. Instead, I needed Node.js only to generate JSON files. Then I could use these JSON files inside my Liquid templates to display graphs, tables, and other data. Something like this:<\/p>\n<div class=\"highlight js-code-highlight\">\n<pre class=\"highlight liquid\"><code><span class=\"p\">{%-<\/span><span class=\"w\"> <\/span><span class=\"kr\">if<\/span><span class=\"w\"> <\/span><span class=\"nv\">report<\/span><span class=\"w\"> <\/span><span class=\"p\">-%}<\/span>\n  &lt;table&gt;\n    &lt;thead&gt;\n      &lt;tr&gt;\n        &lt;th&gt;Site&lt;\/th&gt;\n        &lt;th&gt;Size&lt;\/th&gt;\n        &lt;th&gt;Gzip&lt;\/th&gt;\n      &lt;\/tr&gt;\n    &lt;\/thead&gt;\n    &lt;tbody&gt;\n      <span class=\"p\">{%-<\/span><span class=\"w\"> <\/span><span class=\"nt\">for<\/span><span class=\"w\"> <\/span><span class=\"nv\">item<\/span><span class=\"w\"> <\/span><span class=\"nt\">in<\/span><span class=\"w\"> <\/span><span class=\"nv\">report<\/span><span class=\"w\"> <\/span><span class=\"p\">-%}<\/span>\n        &lt;tr&gt;\n          &lt;td&gt;<span class=\"p\">{{<\/span><span class=\"w\"> <\/span><span class=\"nv\">item<\/span><span class=\"p\">.<\/span><span class=\"nv\">site<\/span><span class=\"p\">.<\/span><span class=\"nv\">title<\/span><span class=\"w\"> <\/span><span class=\"p\">}}<\/span>&lt;\/td&gt;\n          &lt;td&gt;<span class=\"p\">{{<\/span><span class=\"w\"> <\/span><span class=\"nv\">item<\/span><span class=\"p\">.<\/span><span class=\"nv\">site<\/span><span class=\"p\">.<\/span><span class=\"nf\">size<\/span><span class=\"w\"> <\/span><span class=\"p\">|<\/span><span class=\"w\"> <\/span><span class=\"nf\">fileSize<\/span><span class=\"w\"> <\/span><span class=\"p\">}}<\/span>&lt;\/td&gt;\n          &lt;td&gt;<span class=\"p\">{{<\/span><span class=\"w\"> <\/span><span class=\"nv\">item<\/span><span class=\"p\">.<\/span><span class=\"nv\">site<\/span><span class=\"p\">.<\/span><span class=\"nv\">gzip<\/span><span class=\"w\"> <\/span><span class=\"p\">|<\/span><span class=\"w\"> <\/span><span class=\"nf\">fileSize<\/span><span class=\"w\"> <\/span><span class=\"p\">}}<\/span>&lt;\/td&gt;\n        &lt;\/tr&gt;\n      <span class=\"p\">{%-<\/span><span class=\"w\"> <\/span><span class=\"nt\">endfor<\/span><span class=\"w\"> <\/span><span class=\"p\">-%}<\/span>\n    &lt;\/tbody&gt;\n  &lt;\/table&gt;\n<span class=\"p\">{%-<\/span><span class=\"w\"> <\/span><span class=\"kr\">endif<\/span><span class=\"w\"> <\/span><span class=\"p\">-%}<\/span>\n<\/code><\/pre>\n<div class=\"highlight__panel js-actions-panel\">\n<div class=\"highlight__panel-action js-fullscreen-code-action\">\n    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"><title>Enter fullscreen mode<\/title>\n    <path d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\/>\n<\/svg><\/p>\n<p>    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"><title>Exit fullscreen mode<\/title>\n    <path d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\/>\n<\/svg><\/p>\n<\/div>\n<\/div>\n<\/div>\n<p>So I rewrote the Node.js scripts to store all relevant data in JSON files in the <a href=\"https:\/\/www.11ty.dev\/docs\/data-global\/\">global data folder<\/a> to be more precise. Since 11ty could read these files, I needed to write Liquid partials that would output tables and graphs. I couldn\u2019t believe how I didn\u2019t think of it earlier. All I needed to do to include the partial from the markdown file was to write the following snippet:<\/p>\n<div class=\"highlight js-code-highlight\">\n<pre class=\"highlight liquid\"><code><span class=\"p\">{%<\/span><span class=\"w\"> <\/span><span class=\"nt\">render<\/span><span class=\"w\"> <\/span><span class=\"nv\">report<\/span>\/general-site-list,<span class=\"w\"> <\/span><span class=\"na\">report<\/span><span class=\"o\">:<\/span><span class=\"w\"> <\/span>reports.report3<span class=\"w\"> <\/span><span class=\"p\">%}<\/span>\n<\/code><\/pre>\n<div class=\"highlight__panel js-actions-panel\">\n<div class=\"highlight__panel-action js-fullscreen-code-action\">\n    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"><title>Enter fullscreen mode<\/title>\n    <path d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"\/>\n<\/svg><\/p>\n<p>    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"><title>Exit fullscreen mode<\/title>\n    <path d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"\/>\n<\/svg><\/p>\n<\/div>\n<\/div>\n<\/div>\n<p>As a final part of these rewrites, I wanted to eliminate <a href=\"https:\/\/www.highcharts.com\/\">Highcharts.js<\/a> and replace it with <a href=\"https:\/\/chartscss.org\/\">ChartsCSS<\/a>. This is the site about CSS, after all. I find ChartsCSS somewhat limiting compared to Highcharts.js, but I think it serves its purpose for this site.<\/p>\n<p>So here\u2019s how the report looked <a href=\"https:\/\/web.archive.org\/web\/20210315134658\/https:\/\/css-auditors.com\/reports\/bundesliga-2021-03\/\">before<\/a>.<br \/>And here\u2019s how it looks <a href=\"https:\/\/dev.to\/reports\/bundesliga-2021-03\/\">now<\/a>.<\/p>\n<h2>\n  <a name=\"conclusion\" href=\"#conclusion\"><br \/>\n  <\/a><br \/>\n  Conclusion<br \/>\n<\/h2>\n<p>I don\u2019t know what I learned from this process, but I am happy with things now. I certainly look forward to writing much more CSS reports this year, so be sure to follow us <a href=\"https:\/\/twitter.com\/CSSAuditors\">on Twitter<\/a> for updates.<\/p>\n<p><a href=\"https:\/\/twitter.com\/search?q=%23RespectCSS&amp;src=typed_query\">#RespectCSS<\/a><\/p>\n<\/p><\/div>\n<p><script async src=\"\/\/platform.twitter.com\/widgets.js\" charset=\"utf-8\"><\/script><br \/>\n<br \/><\/p>\n","protected":false},"excerpt":{"rendered":"<p>Last year I started this website. It was supposed to be my favorite side project, but instead, it became my nightmare. Let me tell you why and how I got to the right track. Background The idea about this site didn\u2019t come over the night. I remember how excited I was when I saw The &hellip;<\/p>\n<p class=\"read-more\"> <a class=\"\" href=\"http:\/\/localhost\/wordpress\/how-i-built-and-rewrote-the-css-auditors-website\/\"> <span class=\"screen-reader-text\">How I built and rewrote the CSS Auditors website<\/span> Read More &raquo;<\/a><\/p>\n","protected":false},"author":1,"featured_media":942,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"site-sidebar-layout":"default","site-content-layout":"default","ast-main-header-display":"","ast-hfb-above-header-display":"","ast-hfb-below-header-display":"","ast-hfb-mobile-header-display":"","site-post-title":"","ast-breadcrumbs-content":"","ast-featured-img":"","footer-sml-layout":"","theme-transparent-header-meta":"","adv-header-id-meta":"","stick-header-meta":"","header-above-stick-meta":"","header-main-stick-meta":"","header-below-stick-meta":""},"categories":[1],"tags":[],"_links":{"self":[{"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/posts\/941"}],"collection":[{"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/comments?post=941"}],"version-history":[{"count":0,"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/posts\/941\/revisions"}],"wp:featuredmedia":[{"embeddable":true,"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/media\/942"}],"wp:attachment":[{"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/media?parent=941"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/categories?post=941"},{"taxonomy":"post_tag","embeddable":true,"href":"http:\/\/localhost\/wordpress\/wp-json\/wp\/v2\/tags?post=941"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}